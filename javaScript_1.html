<!DOCTYPE html><html lang="en"><head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <link rel="shortcut icon" href="./javascript.ico" type="image/x-icon"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <script src="./oo.js" defer></script> <style> .dad { color: #f44336 !important; font-size: larger; } li { font-family: monospace; color: blue; list-style-type: none; } ol>li { font-family: monospace; color: rgb(181, 181, 201); list-style-type: decimal; font-size: 13px; } body { background: rgb(0, 0, 0); } h3 { color: #00ffff !important; font-size: initial; } .cods { color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: monospace; font-size: 14px; white-space: nowrap; overflow: auto; padding: 10px; border-radius: 3%; outline: none; } p { color: bisque !important; font-size: smaller !important; } .son li { color: bisque !important; font-size: smaller !important; list-style-type: decimal; } table, th, td { color: bisque; text-align: center; border: 1px solid white; border-collapse: collapse; font-size: small; } </style> <title>JavaScript</title></head><body> <details class="dad"> <summary>Objects: the basics</summary> <ul> <li> <details> <summary>Objects</summary> <ul> <li> <h3>Objects</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Object</span><span style="color: #d4d4d4;">(); </span><span style="color: #6a9955;">// "object constructor" syntax</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = {}; &nbsp;</span><span style="color: #6a9955;">// "object literal" syntax </span></div> </div> </div> </li> <li> <h3>Literals and properties</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// We can immediately put some properties into {...} as “key: value” pairs:</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = { &nbsp; &nbsp; </span><span style="color: #6a9955;">// an object</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;">, &nbsp;</span><span style="color: #6a9955;">// by key "name" store value "John"</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">age</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">30</span><span style="color: #d4d4d4;"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="color: #6a9955;">// by key "age" store value 30</span></div> <div><span style="color: #d4d4d4;">};</span> </div><br> <div><span style="color: #6a9955;">// get property values of the object:</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// John</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">age</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 30</span></div><br> <div><span style="color: #6a9955;">//The value can be of any type. Let’s add a boolean one: </span></div> <div><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">isAdmin</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">true</span><span style="color: #d4d4d4;">;</span> </div><br> <div><span style="color: #6a9955;">// To remove a property, we can use the delete operator:</span></div> <div><span style="color: #569cd6;">delete</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">age</span><span style="color: #d4d4d4;">;</span> </div><br><br> <div><span style="color: #6a9955;">// We can also use multiword property names, but then they must be quoted:</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">age</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">30</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #ce9178;">"likes birds"</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">true</span><span style="color: #d4d4d4;"> &nbsp;</span><span style="color: #6a9955;">// multiword property name must be quoted</span></div> <div><span style="color: #d4d4d4;">};</span> </div><br> <div><span style="color: #6a9955;">// The last property in the list may end with a comma: hanging or trailing </span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">age</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">30</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">} </span> </div> </div> </div> </li> <li> <h3>Square brackets</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// For multiword properties, the dot access doesn’t work:</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = {}</span></div> <div><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">likes</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">birds</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">true</span><span style="color: #d4d4d4;"> &nbsp; &nbsp; </span><span style="color: #6a9955;">// not valid</span></div><br><br><br> <div><span style="color: #6a9955;">// There’s an alternative “square bracket notation” that works with any string:</span></div> <div><span style="color: #6a9955;">// set</span> </div> <div><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">[</span><span style="color: #ce9178;">"likes birds"</span><span style="color: #d4d4d4;">] = </span><span style="color: #569cd6;">true</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #6a9955;">// get</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">[</span><span style="color: #ce9178;">"likes birds"</span><span style="color: #d4d4d4;">]); </span><span style="color: #6a9955;">// true</span></div> <div><span style="color: #6a9955;">// delete</span></div> <div><span style="color: #569cd6;">delete</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">[</span><span style="color: #ce9178;">"likes birds"</span><span style="color: #d4d4d4;">];</span> </div><br><br><br> <div><span style="color: #6a9955;">// Square brackets also provide a way to obtain the property name as the result of any expression – as opposed to a literal string – like from a variable as follows:</span></div> <div><span style="color: #9cdcfe;">key</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"likes birds"</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">[</span><span style="color: #9cdcfe;">key</span><span style="color: #d4d4d4;">] = </span><span style="color: #569cd6;">true</span><span style="color: #d4d4d4;">;</span> </div><br><br><br> <div><span style="color: #6a9955;">// Here, the variable key may be calculated at run-time or depend on the user input. And then we use it to access the property. That gives us a great deal of flexibility. For instance:</span> </div> <div><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">age</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">30</span> </div> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #9cdcfe;">key</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">prompt</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"What do you want to know about the user?"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"name"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #6a9955;">// access by variable</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">[</span><span style="color: #9cdcfe;">key</span><span style="color: #d4d4d4;">]); </span><span style="color: #6a9955;">// John (if enter "name") </span> </div> <br><br><br> <div><span style="color: #6a9955;">// The dot notation cannot be used in a similar way:</span></div> <div><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">age</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">30</span> </div> <div><span style="color: #d4d4d4;">};</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">key</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"name"</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">key</span><span style="color: #d4d4d4;">) </span><span style="color: #6a9955;">// undefined </span></div> <br><br><br> <div><span style="color: #6a9955;">// Computed properties : We can use square brackets in an object literal, when creating an object. That’s called computed properties.</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">fruit</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">prompt</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Which fruit to buy?"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"apple"</span><span style="color: #d4d4d4;">);</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">bag</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">[</span><span style="color: #9cdcfe;">fruit</span><span style="color: #9cdcfe;">]:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">5</span><span style="color: #d4d4d4;">, </span><span style="color: #6a9955;">// the name of the property is taken from the variable fruit</span></div> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">bag</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">apple</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 5 if fruit="apple" </span></div> <div><span style="color: #6a9955;">// We can use more complex expressions inside square brackets:</span></div> <div><span style="color: #9cdcfe;">fruit</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">'apple'</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #9cdcfe;">bag</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">[</span><span style="color: #9cdcfe;">fruit</span><span style="color: #9cdcfe;"> </span><span style="color: #d4d4d4;">+</span><span style="color: #9cdcfe;"> </span><span style="color: #ce9178;">'Computers'</span><span style="color: #9cdcfe;">]:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">5</span><span style="color: #d4d4d4;"> </span><span style="color: #6a9955;">// bag.appleComputers = 5</span> </div> <div><span style="color: #d4d4d4;">}; </span> </div> </div> </div> </li> <li> <h3>Property value shorthand</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// In real code, we often use existing variables as values for property names.</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"ali"</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">age</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">25</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">age</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">tall</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">77</span> </div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// ali</span></div> </div> </div> </li> <li> <h3>Property names limitations</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// we can use any javascript reserved word for property name</span></div> <div><span style="color: #6a9955;">// these properties are all right</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">obj</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">for</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">let</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">return</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">3</span> </div> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">obj</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">for</span><span style="color: #d4d4d4;"> + </span><span style="color: #9cdcfe;">obj</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">let</span><span style="color: #d4d4d4;"> + </span><span style="color: #9cdcfe;">obj</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">return</span><span style="color: #d4d4d4;">); &nbsp;</span><span style="color: #6a9955;">// 6</span></div><br><br><br> <div><span style="color: #6a9955;">// any object key are automatically converted to strings.</span></div> <div><span style="color: #9cdcfe;">obj</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #b5cea8;">0</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"test"</span><span style="color: #d4d4d4;"> </span><span style="color: #6a9955;">// same as "0": "test"</span></div> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #6a9955;">// both access the same property (the number 0 is converted to string "0")</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">obj</span><span style="color: #d4d4d4;">[</span><span style="color: #ce9178;">"0"</span><span style="color: #d4d4d4;">]); </span><span style="color: #6a9955;">// test</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">obj</span><span style="color: #d4d4d4;">[</span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">]); </span><span style="color: #6a9955;">// test (same property) &nbsp; </span> </div><br><br><br> <div><span style="color: #6a9955;">// __proto__ property </span></div> <div><span style="color: #9cdcfe;">obj</span><span style="color: #d4d4d4;"> = {};</span></div> <div><span style="color: #9cdcfe;">obj</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">__proto__</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">5</span><span style="color: #d4d4d4;">; </span><span style="color: #6a9955;">// assign a number</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">obj</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">__proto__</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// the value is an object, didn't work as intended</span></div> </div> </div> </li> <li> <h3>Property existence test, “in” operator</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// Reading a non-existing property just returns undefined. So we can easily test whether the property exists:</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = {};</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">noSuchProperty</span><span style="color: #d4d4d4;"> === </span><span style="color: #569cd6;">undefined</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// true means "no such property"</span> </div><br><br><br> <div><span style="color: #6a9955;">// There’s also a special operator "in" for that. Please note that on the left side of in there must be a property name. That’s usually a quoted string.</span></div> <div><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = { </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">age</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">30</span><span style="color: #d4d4d4;"> };</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"age"</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">in</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// true, user.age exists</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"blabla"</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">in</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// false, user.blabla doesn't exist</span> </div> <div><span style="color: #6a9955;">// Well, most of the time the comparison with undefined works fine. But there’s a special case when it fails, but "in" works correctly. It’s when an object property exists, but stores undefined:</span></div> <div><span style="color: #9cdcfe;">obj</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">test</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">undefined</span> </div> <div><span style="color: #d4d4d4;">};</span> </div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">obj</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">test</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// it's undefined, so - no such property?</span></div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"test"</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">in</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">obj</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// true, the property does exist! </span> </div> </div> </div> </li> <li> <h3>The "for..in" loop</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">age</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">30</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">isAdmin</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">true</span> </div> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #c586c0;">for</span><span style="color: #d4d4d4;"> (</span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">key</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">in</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// keys</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">key</span><span style="color: #d4d4d4;">); &nbsp;</span><span style="color: #6a9955;">// name, age, isAdmin</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// values for the keys</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">[</span><span style="color: #9cdcfe;">key</span><span style="color: #d4d4d4;">]); </span><span style="color: #6a9955;">// John, 30, true</span></div> <div><span style="color: #d4d4d4;">}</span> </div> </div> </div> </li> </ul> </details> </li> <li> <details> <summary>Object references and copying</summary> <ul> <li> <h3>Object references and copying</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">/*</span> </div> <div><span style="color: #6a9955;">One of the fundamental differences of objects versus primitives is that</span> </div> <div><span style="color: #6a9955;">objects are stored and copied “by reference”,</span></div> <div><span style="color: #6a9955;">whereas primitive values: strings, numbers, booleans,</span></div> <div><span style="color: #6a9955;">etc – are always copied “as a whole value”</span> </div> <div><span style="color: #6a9955;">*/</span> </div><br> <div><span style="color: #6a9955;">// When an object variable is copied, the reference is copied, but the object itself is not duplicated.</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = { </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;"> };</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">admin</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">; </span><span style="color: #6a9955;">// copy the reference</span></div> <div><span style="color: #9cdcfe;">admin</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"ali"</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// ali , changes are seen from the "user" reference</span></div> </div> </div> </li> <li> <h3>Comparison by reference</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// Two objects are equal only if they are the same object.</span></div> <div><span style="color: #6a9955;">// For instance, here a and b reference the same object, thus they are equal:</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">a</span><span style="color: #d4d4d4;"> = {};</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">b</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">a</span><span style="color: #d4d4d4;">; </span><span style="color: #6a9955;">// copy the reference</span></div> <br> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">a</span><span style="color: #d4d4d4;"> == </span><span style="color: #9cdcfe;">b</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// true, both variables reference the same object</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">a</span><span style="color: #d4d4d4;"> === </span><span style="color: #9cdcfe;">b</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// true</span></div> <br><br><br><br> <div><span style="color: #6a9955;">//here two independent objects are not equal, even though they look alike (both are empty):</span></div> <div><span style="color: #9cdcfe;">a</span><span style="color: #d4d4d4;"> = {};</span></div> <div><span style="color: #9cdcfe;">b</span><span style="color: #d4d4d4;"> = {}; </span><span style="color: #6a9955;">// two independent objects</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">a</span><span style="color: #d4d4d4;"> == </span><span style="color: #9cdcfe;">b</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// false</span></div><br><br><br> <div><span style="color: #6a9955;">// Const objects can be modified</span> </div> <div><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #4fc1ff;">user</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"John"</span> </div> <div><span style="color: #d4d4d4;">};</span> </div><br> <div><span style="color: #4fc1ff;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"Pete"</span><span style="color: #d4d4d4;">; </span><span style="color: #6a9955;">// The value of user is constant, it must always reference the same object, but properties of that object are free to change.</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #4fc1ff;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// Pete </span></div> </div> </div> </li> <li> <h3>Cloning and merging, Object.assign</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// what if we need to duplicate an object? We can create a new object and replicate the structure of the existing one, by iterating over its properties and copying them on the primitive level. Like this:</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">age</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">30</span> </div> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">clone</span><span style="color: #d4d4d4;"> = {}; </span><span style="color: #6a9955;">// the new empty object</span> </div> <div><span style="color: #6a9955;">// let's copy all user properties into it</span> </div> <div><span style="color: #c586c0;">for</span><span style="color: #d4d4d4;"> (</span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">key</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">in</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">clone</span><span style="color: #d4d4d4;">[</span><span style="color: #9cdcfe;">key</span><span style="color: #d4d4d4;">] = </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">[</span><span style="color: #9cdcfe;">key</span><span style="color: #d4d4d4;">];</span> </div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #6a9955;">// now clone is a fully independent object with the same content</span></div> <div><span style="color: #9cdcfe;">clone</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"Pete"</span><span style="color: #d4d4d4;">; </span><span style="color: #6a9955;">// changed the data in it</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// still John in the original object</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">clone</span><span style="color: #d4d4d4;"> === </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">); &nbsp;</span><span style="color: #6a9955;">// false </span></div> <br><br><br> <div><span style="color: #6a9955;">// We can also use the method Object.assign.</span></div> <div><span style="color: #9cdcfe;">clone</span><span style="color: #d4d4d4;"> = </span><span style="color: #4ec9b0;">Object</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">assign</span><span style="color: #d4d4d4;">({}, </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">clone</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// { name: "John", age: 30 } </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">clone</span><span style="color: #d4d4d4;"> === </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// false </span></div><br><br><br> <div><span style="color: #6a9955;">// we have user object, let’s add a couple of permissions to it:</span></div> <div><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = { </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;"> };</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">permissions1</span><span style="color: #d4d4d4;"> = { </span><span style="color: #9cdcfe;">canView</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">true</span><span style="color: #d4d4d4;"> };</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">permissions2</span><span style="color: #d4d4d4;"> = { </span><span style="color: #9cdcfe;">canEdit</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">true</span><span style="color: #d4d4d4;"> };</span> </div> <div><span style="color: #6a9955;">// copies all properties from permissions1 and permissions2 into user</span> </div> <div><span style="color: #4ec9b0;">Object</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">assign</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">permissions1</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">permissions2</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// John</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">canView</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// true</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">canEdit</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// true</span></div><br><br><br> <div><span style="color: #6a9955;">// If the copied property name already exists, it gets overwritten:</span></div> <div><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = { </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;"> };</span></div> <div><span style="color: #4ec9b0;">Object</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">assign</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">, { </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"Pete"</span><span style="color: #d4d4d4;"> });</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// now user = { name: "Pete" }</span></div> </div> </div> </li> <li> <h3>Nested cloning</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// Until now we assumed that all properties of user are primitive. But properties can be references to other objects.</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">sizes</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> {</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">height</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">182</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">width</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">50</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">clone</span><span style="color: #d4d4d4;"> = </span><span style="color: #4ec9b0;">Object</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">assign</span><span style="color: #d4d4d4;">({}, </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">sizes</span><span style="color: #d4d4d4;"> === </span><span style="color: #9cdcfe;">clone</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">sizes</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// true, same object </span></div> <br><br><br> <div><span style="color: #6a9955;">// to make user.sizez and &nbsp;clone.sizes different we use &nbsp;structuredClone(object)</span> </div> <div><span style="color: #9cdcfe;">clone</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">structuredClone</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">sizes</span><span style="color: #d4d4d4;"> === </span><span style="color: #9cdcfe;">clone</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">sizes</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// false, not the same object </span></div> </div> </div> </li> </ul> </details> </li> <li> <details> <summary>Object methods, "this"</summary> <ul> <li> <h3>Object methods, "this"</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// Objects are usually created to represent entities of the real world, like users, orders and so on:</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">age</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">30</span> </div> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #6a9955;">/* And, in the real world, a user can act: select something from the shopping</span></div> <div><span style="color: #6a9955;">cart, login, logout etc.Actions are represented in JavaScript by functions</span></div> <div><span style="color: #6a9955;">in properties.*/</span></div> </div> </div> </li> <li> <h3>Method examples</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// For a start, let’s teach the user to say hello : A function that is a property of an object is called its method.</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">age</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">30</span> </div> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> () {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Hello!"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">(); </span><span style="color: #6a9955;">// Hello! </span></div><br><br><br> <div><span style="color: #6a9955;">// Method shorthand : &nbsp;method shorthand looks better, right?</span> </div> <div><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">() { </span><span style="color: #6a9955;">// same as "sayHi: function(){...}"</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Hello"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">};</span> </div> </div> </div> </li> <li> <h3>“this” in methods</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// To access the object, a method can use the this keyword.</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">age</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">30</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;">// "this" is the "current object"</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">(); </span><span style="color: #6a9955;">// John</span></div><br><br><br> <div><span style="color: #6a9955;">// Technically, it’s also possible to access the object without this, by referencing it via the outer variable:</span></div> <div><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">age</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">30</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// "user" instead of "this"</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div><br> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">(); </span><span style="color: #6a9955;">// john</span></div><br><br><br> <div><span style="color: #6a9955;">// But such code is unreliable. If we decide to copy user to another variable, e.g. admin = user and overwrite user with something else, then it will access the wrong object.</span> </div> <div><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">age</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">30</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">?.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// leads to an error </span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div><br> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">admin</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">null</span><span style="color: #d4d4d4;">; </span><span style="color: #6a9955;">// overwrite to make things obvious</span> </div> <div><span style="color: #9cdcfe;">admin</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">(); </span><span style="color: #6a9955;">// TypeError: Cannot read property 'name' of null</span></div> </div> </div> </li> <li> <h3>“this” is not bound</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// The value of this is evaluated during the run-time, depending on the context.</span></div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = { </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;"> };</span></div><br><br><br> <div><span style="color: #6a9955;">//unbound this</span></div> <div><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">(); </span><span style="color: #6a9955;">// Window object but in strict mode return undefined </span></div> <br><br><br> <div><span style="color: #6a9955;">// bound this</span></div> <div><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">sayHi</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">(); </span><span style="color: #6a9955;">// &nbsp;user object</span></div> </div> </div> </li> <li> <h3>Arrow functions have no “this”</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">firstName</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"Ilya"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">_</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">firstName</span> </div> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">()); </span><span style="color: #6a9955;">// undefined because this return window object </span></div> </div> </div> </li> </ul> </details> </li> <li> <details> <summary>Constructor, operator "new"</summary> <ul> <li> <h3>Constructor, operator "new"</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">/*The regular {...} syntax allows us to create one object. But often we </span> </div> <div><span style="color: #6a9955;">need to create many similar objects, like multiple users or menu items </span></div> <div><span style="color: #6a9955;">and so on. That can be done using constructor functions and the "new" </span></div> <div><span style="color: #6a9955;">operator.*/</span> </div> </div> </div> </li> <li> <h3>Constructor function</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">/*Constructor functions technically are regular functions. There are two</span></div> <div><span style="color: #6a9955;">&nbsp;conventions though:</span></div> <div><span style="color: #6a9955;">&nbsp; &nbsp; They are named with capital letter first.</span></div> <div><span style="color: #6a9955;">&nbsp; &nbsp; They should be executed only with "new" operator.</span> </div> <div><span style="color: #6a9955;">For instance:*/</span></div><br><br> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">isAdmin</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">false</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Jack"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// Jack</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">isAdmin</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// false</span></div><br><br> <div><span style="color: #6a9955;">/*When a function is executed with new, it does the following steps:</span></div> <div><span style="color: #6a9955;">&nbsp; &nbsp; A new empty object is created and assigned to this.</span> </div> <div><span style="color: #6a9955;">&nbsp; &nbsp; The function body executes. Usually it modifies this, adds new </span></div> <div><span style="color: #6a9955;">&nbsp; &nbsp; properties to it.</span></div> <div><span style="color: #6a9955;">&nbsp; &nbsp; The value of this is returned.</span></div> <div><span style="color: #6a9955;">In other words, new User(...) does something like:</span></div><br> <div><span style="color: #6a9955;">function User(name) {</span></div> <div><span style="color: #6a9955;">&nbsp; // this = {}; &nbsp;(implicitly)</span></div> <br> <div><span style="color: #6a9955;">&nbsp; // add properties to this</span></div> <div><span style="color: #6a9955;">&nbsp; this.name = name;</span></div> <div><span style="color: #6a9955;">&nbsp; this.isAdmin = false;</span> </div><br> <div><span style="color: #6a9955;">&nbsp; // return this; &nbsp;(implicitly)</span></div> <div><span style="color: #6a9955;">}</span> </div> <div><span style="color: #6a9955;">*/</span> </div> </div> </div> </li> <li> <h3>Constructor mode test: new.target</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// Inside a function, we can check whether it was called with new or without it, using a special new.target property. </span> </div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;">.</span><span style="color: #4ec9b0;">target</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #6a9955;">// without "new":</span></div> <div><span style="color: #4ec9b0;">User</span><span style="color: #d4d4d4;">() </span><span style="color: #6a9955;">// undefined</span></div> <div><span style="color: #6a9955;">// with "new":</span></div> <div><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #d4d4d4;">(); </span><span style="color: #6a9955;">// function User { ... }</span> </div><br><br> <div><span style="color: #6a9955;">// We can also make both new and regular calls to do the same, like this:</span></div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #d4d4d4;"> (!</span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;">.</span><span style="color: #4ec9b0;">target</span><span style="color: #d4d4d4;">) { </span><span style="color: #6a9955;">// if you run me without new</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// ...I will add new for you</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">john</span><span style="color: #d4d4d4;"> = </span><span style="color: #4ec9b0;">User</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// redirects call to new User</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">john</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// John </span></div> <div><span style="color: #6a9955;">/*</span> </div> <div><span style="color: #6a9955;">This approach is sometimes used in libraries to make the syntax more </span> </div> <div><span style="color: #6a9955;">flexible. So that people may call the function with or without new, and</span></div> <div><span style="color: #6a9955;">it still works.</span></div> <div><span style="color: #6a9955;">Probably not a good thing to use everywhere though, because omitting new</span></div> <div><span style="color: #6a9955;">&nbsp;makes it a bit less obvious what’s going on. With new we all know that </span></div> <div><span style="color: #6a9955;">&nbsp;the new object is being created.</span> </div> <div><span style="color: #6a9955;">*/</span> </div> </div> </div> </li> <li> <h3>Return from constructors</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">/*</span> </div> <div><span style="color: #6a9955;">Usually, constructors do not have a return statement. Their task is to </span></div> <div><span style="color: #6a9955;">write all necessary stuff into this, and it automatically becomes the </span></div> <div><span style="color: #6a9955;">result.</span> </div> <div><span style="color: #6a9955;">But if there is a return statement, then the rule is simple:</span></div> <div><span style="color: #6a9955;">&nbsp; &nbsp; If return is called with an object, then the object is returned instead of this.</span> </div> <div><span style="color: #6a9955;">&nbsp; &nbsp; If return is called with a primitive, it’s ignored.</span> </div> <div><span style="color: #6a9955;">*/</span> </div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">BigUser</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> { </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"Godzilla"</span><span style="color: #d4d4d4;"> }; &nbsp;</span><span style="color: #6a9955;">// &lt;-- returns this object</span></div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">BigUser</span><span style="color: #d4d4d4;">().</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">); &nbsp;</span><span style="color: #6a9955;">// Godzilla, got that object </span></div><br><br><br> <div><span style="color: #6a9955;">// And here’s an example with an empty return (or we could place a primitive after it, doesn’t matter):</span></div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">SmallUser</span><span style="color: #d4d4d4;">() {</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;">;</span> </div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"ali"</span><span style="color: #d4d4d4;">; </span><span style="color: #6a9955;">// &lt;-- returns this</span></div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">SmallUser</span><span style="color: #d4d4d4;">().</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">); &nbsp;</span><span style="color: #6a9955;">// John </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">SmallUser</span><span style="color: #d4d4d4;">()); </span><span style="color: #6a9955;">// without new return the primitive "ali"</span></div><br><br><br> <div><span style="color: #6a9955;">// By the way, we can omit parentheses after new:</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">User</span><span style="color: #d4d4d4;">; </span><span style="color: #6a9955;">// &lt;-- no parentheses</span> </div> <div><span style="color: #6a9955;">// same as</span></div> <div><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">User</span><span style="color: #d4d4d4;">();</span> </div> </div> </div> </li> <li> <h3>Methods in constructor</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> () {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"My name is: "</span><span style="color: #d4d4d4;"> + </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; };</span></div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">john</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">john</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">(); </span><span style="color: #6a9955;">// My name is: John</span></div> </div> </div> </li> </ul> </details> </li> <li> <details> <summary>Optional chaining '?.'</summary> <ul> <li> <h3>Optional chaining '?.'</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">/* The optional chaining ?. is a safe way to access nested object </span></div> <div><span style="color: #6a9955;">properties, even if an intermediate property doesn’t exist.*/</span><span style="color: #d4d4d4;"> </span> </div> </div> </div> </li> <li> <h3>The “non-existing property” problem</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// if we have an object which become null or undefined during runtime , it's dangerous to access &nbsp;properties or method it will lead to errorff</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"ali"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">age</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">25</span> </div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">age</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 45</span></div> <div><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">undefined</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">age</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// error</span></div><br><br> <div><span style="color: #6a9955;">// document.querySelector('.elem') is null if there's no element</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">html</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">document</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">querySelector</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'.elem'</span><span style="color: #d4d4d4;">).</span><span style="color: #9cdcfe;">innerHTML</span><span style="color: #d4d4d4;">; </span><span style="color: #6a9955;">// error if it's null</span></div> </div> </div> </li> <li> <h3>Optional chaining</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">/* The optional chaining ?. stops the evaluation if the value before ?. is undefined or null and returns undefined.</span></div> <div><span style="color: #6a9955;">In other words, value?.prop:</span></div> <div><span style="color: #6a9955;">&nbsp; &nbsp; works as value.prop, if value exists,</span></div> <div><span style="color: #6a9955;">&nbsp; &nbsp; otherwise (when value is undefined/null) it returns undefined.</span></div><br> <div><span style="color: #6a9955;">Here’s the safe way to access user.address.street using ?.: &nbsp; </span></div> <div><span style="color: #6a9955;">*/</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = {}; </span><span style="color: #6a9955;">// user has no address</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">?.</span><span style="color: #9cdcfe;">address</span><span style="color: #d4d4d4;">?.</span><span style="color: #9cdcfe;">street</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// undefined (no error)</span> </div><br><br><br> <div><span style="color: #6a9955;">// Here’s an example with document.querySelector: </span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">html</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">document</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">querySelector</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'.elem'</span><span style="color: #d4d4d4;">)?.</span><span style="color: #9cdcfe;">innerHTML</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">html</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// undefined</span></div> <br><br><br> <div><span style="color: #6a9955;">// Reading the address with user?.address works even if user object doesn’t exist:</span></div> <div><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">null</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">?.</span><span style="color: #9cdcfe;">address</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// undefined</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">?.</span><span style="color: #9cdcfe;">address</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">street</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// undefined </span></div> </div> </div> </li> <li> <h3>Short-circuiting</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">/* the ?. immediately stops (“short-circuits”) the evaluation if the </span></div> <div><span style="color: #6a9955;">left part doesn’t exist.</span></div> <div><span style="color: #6a9955;">So, if there are any further function calls or operations to the right </span></div> <div><span style="color: #6a9955;">of ?., they won’t be made.</span></div> <div><span style="color: #6a9955;">For instance:</span></div> <div><span style="color: #6a9955;">*/</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">null</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">x</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">?.</span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">x</span><span style="color: #d4d4d4;">++); </span><span style="color: #6a9955;">// no "user", so the execution doesn't reach sayHi call and x++</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">x</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 0, value not incremented</span> </div> </div> </div> </li> <li> <h3>Other variants: ?.(), ?.[]</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">/*</span> </div> <div><span style="color: #6a9955;">The optional chaining ?. is not an operator, but a special syntax</span> </div> <div><span style="color: #6a9955;">construct,that also works with functions and square brackets.</span></div> <div><span style="color: #6a9955;">*/</span> </div><br> <div><span style="color: #6a9955;">// Then ?.() checks the left part: if the admin function exists, then it runs (that’s so for userAdmin). Otherwise (for userGuest) the evaluation stops without errors.</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">userAdmin</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">admin</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"I am admin"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">userGuest</span><span style="color: #d4d4d4;"> = {};</span></div> <div><span style="color: #9cdcfe;">userAdmin</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">admin</span><span style="color: #d4d4d4;">?.(); </span><span style="color: #6a9955;">// I am admin</span></div> <div><span style="color: #9cdcfe;">userGuest</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">admin</span><span style="color: #d4d4d4;">?.(); </span><span style="color: #6a9955;">// nothing happens (no such method) </span></div><br><br><br> <div><span style="color: #6a9955;">// The ?.[] syntax also works, if we’d like to use brackets [] to access properties instead of dot .. Similar to previous cases, it allows to safely read a property from an object that may not exist.</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">key</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"firstName"</span><span style="color: #d4d4d4;">;</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user1</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">firstName</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"John"</span> </div> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user2</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">null</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user1</span><span style="color: #d4d4d4;">?.[</span><span style="color: #9cdcfe;">key</span><span style="color: #d4d4d4;">]); </span><span style="color: #6a9955;">// John</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user2</span><span style="color: #d4d4d4;">?.[</span><span style="color: #9cdcfe;">key</span><span style="color: #d4d4d4;">]); </span><span style="color: #6a9955;">// undefined </span></div> </div> </div> </li> </ul> </details> </li> <li> <details> <summary>Symbol type</summary> <ul> <li> <h3>Symbol type</h3> <div class="cods" spellcheck="false" contenteditable=""> <div> <div><span style="color: #6a9955;">/*</span> </div> <div><span style="color: #6a9955;">By specification, only two primitive types may serve as object property keys:</span> </div> <div><span style="color: #6a9955;">&nbsp; &nbsp; string type, or</span></div> <div><span style="color: #6a9955;">&nbsp; &nbsp; symbol type.</span></div> <div><span style="color: #6a9955;">Otherwise, if one uses another type, such as number, it’s autoconverted to string. <br></span></div> <div><span style="color: #6a9955;">So that obj[1] is the same as obj["1"], and obj[true] is the same as obj["true"].</span></div> <div><span style="color: #6a9955;">*/</span> </div> </div> </div> </li> <li> <h3>Symbols</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// Symbols are guaranteed to be unique. Even if we create many symbols with exactly the same description</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">id1</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">Symbol</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"id"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">id2</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">Symbol</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"id"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">id1</span><span style="color: #d4d4d4;"> == </span><span style="color: #9cdcfe;">id2</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// false</span></div><br><br><br> <div><span style="color: #6a9955;">// Symbols don’t auto-convert to a string</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">id</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">Symbol</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"id"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #dcdcaa;">alert</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">id</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// TypeError: Cannot convert a Symbol value to a string </span> </div><br><br><br> <div><span style="color: #6a9955;">// to show a symbol, we need to explicitly call .toString() on it, like here:</span></div> <div><span style="color: #9cdcfe;">id</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">Symbol</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"id"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">id</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">toString</span><span style="color: #d4d4d4;">()); </span><span style="color: #6a9955;">// Symbol(id), now it works</span> </div> <div><span style="color: #6a9955;">// Or get symbol.description property to show the description only:</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">id</span><span style="color: #d4d4d4;">.</span><span style="color: #4fc1ff;">description</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// id</span></div> </div> </div> </li> <li> <h3>“Hidden” properties</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">/*</span> </div> <div><span style="color: #6a9955;">Symbols allow us to create “hidden” properties of an object,</span></div> <div><span style="color: #6a9955;">that no other part of code can accidentally access or overwrite.</span> </div> <div><span style="color: #6a9955;">For instance, if we’re working with user objects, that belong to</span> </div> <div><span style="color: #6a9955;">a third-party code. We’d like to add identifiers to them.</span> </div> <div><span style="color: #6a9955;">Let’s use a symbol key for it:</span></div> <div><span style="color: #6a9955;">*/</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = { </span><span style="color: #6a9955;">// belongs to another code</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"John"</span> </div> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">id</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">Symbol</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"id"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">[</span><span style="color: #9cdcfe;">id</span><span style="color: #d4d4d4;">] = </span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">[</span><span style="color: #9cdcfe;">id</span><span style="color: #d4d4d4;">]); </span><span style="color: #6a9955;">// we can access the data using the symbol as the key</span></div> <br><br><br><br> <div><span style="color: #6a9955;">/*</span> </div> <div><span style="color: #6a9955;">What’s the benefit of using Symbol("id") over a string "id"?</span></div> <div><span style="color: #6a9955;">As user objects belong to another codebase, it’s unsafe to add</span></div> <div><span style="color: #6a9955;">fields to them, since we might affect pre-defined behavior in that</span></div> <div><span style="color: #6a9955;">other codebase. However, symbols cannot be accessed accidentally. The</span></div> <div><span style="color: #6a9955;">third-party code won’t be aware of newly defined symbols, so it’s safe to add symbols to the user objects.</span></div> <div><span style="color: #6a9955;">Also, imagine that another script wants to have its own identifier inside user, for its own purposes.</span></div> <div><span style="color: #6a9955;">Then that script can create its own Symbol("id"), like this:</span> </div> <div><span style="color: #6a9955;">*/</span> </div> <div><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"John"</span> </div> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #9cdcfe;">id</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">Symbol</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"id"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">[</span><span style="color: #9cdcfe;">id</span><span style="color: #d4d4d4;">] = </span><span style="color: #ce9178;">"Their id value"</span><span style="color: #d4d4d4;">;</span> </div><br><br><br> <div><span style="color: #6a9955;">/*</span> </div> <div><span style="color: #6a9955;">Symbols are skipped by for…in</span></div> <div><span style="color: #6a9955;">*/</span> </div> <div><span style="color: #9cdcfe;">id</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">Symbol</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"id"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">age</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">30</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">[</span><span style="color: #9cdcfe;">id</span><span style="color: #9cdcfe;">]:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">123</span> </div> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #c586c0;">for</span><span style="color: #d4d4d4;"> (</span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">key</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">in</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">) </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">key</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// name, age (no symbols)</span> </div> <div><span style="color: #6a9955;">// the direct access by the symbol works</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Direct: "</span><span style="color: #d4d4d4;"> + </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">[</span><span style="color: #9cdcfe;">id</span><span style="color: #d4d4d4;">]); </span><span style="color: #6a9955;">// Direct: 123 </span></div> <br><br><br> <div><span style="color: #6a9955;">// Object.keys(user) also ignores &nbsp;symbols</span></div> <br><br><br> <div><span style="color: #6a9955;">// In contrast, Object.assign copies both string and symbol properties:</span></div> <div><span style="color: #9cdcfe;">id</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">Symbol</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"id"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">[</span><span style="color: #9cdcfe;">id</span><span style="color: #9cdcfe;">]:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">123</span> </div> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">clone</span><span style="color: #d4d4d4;"> = </span><span style="color: #4ec9b0;">Object</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">assign</span><span style="color: #d4d4d4;">({}, </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">clone</span><span style="color: #d4d4d4;">[</span><span style="color: #9cdcfe;">id</span><span style="color: #d4d4d4;">]); </span><span style="color: #6a9955;">// 123 </span></div> </div> </div> </li> <li> <h3>Global symbols</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// read from the global registry</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">id</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">Symbol</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">for</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"id"</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// if the symbol did not exist, it is created</span></div><br> <div><span style="color: #6a9955;">// read it again (maybe from another part of the code)</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">idAgain</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">Symbol</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">for</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"id"</span><span style="color: #d4d4d4;">);</span> </div><br> <div><span style="color: #6a9955;">// the same symbol</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">id</span><span style="color: #d4d4d4;"> === </span><span style="color: #9cdcfe;">idAgain</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// true</span></div><br> <div><span style="color: #6a9955;">// get symbol by name</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">sym</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">Symbol</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">for</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"name"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">sym2</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">Symbol</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">for</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"id"</span><span style="color: #d4d4d4;">);</span> </div><br> <div><span style="color: #6a9955;">// get name by symbol</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">Symbol</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">keyFor</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">sym</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// name </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">Symbol</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">keyFor</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">sym2</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// id </span></div> </div> </div> </li> <li> <h3>System symbols</h3> <p>There exist many “system” symbols that JavaScript uses internally, and we can use them to fine-tune various aspects of our objects.</p> <ul class="son"> <li><code>Symbol.hasInstance</code></li> <li><code>Symbol.isConcatSpreadable</code></li> <li><code>Symbol.iterator</code></li> <li><code>Symbol.toPrimitive</code></li> </ul> </li> </ul> </details> </li> <li> <details> <summary>Object to primitive conversion</summary> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"ali"</span><span style="color: #d4d4d4;">,</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">age</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">25</span><span style="color: #d4d4d4;">,</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">[</span><span style="color: #9cdcfe;">Symbol</span><span style="color: #9cdcfe;">.</span><span style="color: #4fc1ff;">toPrimitive</span><span style="color: #9cdcfe;">]:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">hint</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">hint</span><span style="color: #d4d4d4;"> == </span><span style="color: #ce9178;">"string"</span><span style="color: #d4d4d4;">) ? </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> : </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">age</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">}</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">`</span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">user</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">`</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// "ali"</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> + </span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 35 </span></div> </div> </div> </details> </li> </ul> </details> <details class="dad"> <summary>Data types</summary> <ul> <li> <details> <summary>Methods of primitives</summary> <ul> <li> <h3>Methods of primitives</h3> <p> key distinctions between primitives and objects.</p> <ul class="son"> <li>Is a value of a primitive type.</li> <li>There are 7 primitive types: <code>string</code>, <code>number</code>, <code>bigint</code>, <code>boolean</code>, <code>symbol</code>, <code>null</code> and <code>undefined</code>. </li> </ul> <p>An object</p> <ul class="son"> <li>Is capable of storing multiple values as properties. </li> <li>Can be created with <code>{}</code>, for instance: <code>{name: "John", age: 30}</code>. There are other kinds of objects in JavaScript: functions, for example, are objects. </li> </ul> <p>One of the best things about objects is that we can store a function as one of its properties.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">john</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> () {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Hi buddy!"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #9cdcfe;">john</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">(); </span><span style="color: #6a9955;">// Hi buddy!</span> </div> </div> </div> <p>So here we’ve made an object john with the method sayHi.</p> </li> <li> <h3>A primitive as an object</h3> <p>in order to make primitives access useful objects methods a special “object wrapper” that provides the extra functionality is created, and then is destroyed. The “object wrappers” are different for each primitive type and are called: String, Number, Boolean, Symbol and BigInt. Thus, they provide different sets of methods. </p> <p>For instance, there exists a string method str.toUpperCase() that returns a capitalized str.</p> <p>Here’s how it works:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"Hello"</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">toUpperCase</span><span style="color: #d4d4d4;">()); </span><span style="color: #6a9955;">// HELLO</span></div> </div> </div> </li> </ul> </details> </li> <li> <details> <summary>Numbers</summary> <ul> <li> <h3>Numbers</h3> <p>there are two types of numbers:</p> <ul class="son"> <li>Regular numbers in JavaScript are stored in 64-bit also known as “double precision floating point numbers”</li> <li>BigInt numbers represent integers of arbitrary length</li> </ul> </li> <li> <h3>More ways to write a number</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// Imagine we need to write 1 billion. The obvious way is:</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">billion</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">1000000000</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">billion</span><span style="color: #d4d4d4;">);</span> </div><br> <div><span style="color: #6a9955;">// We also can use underscore _ as the separator:</span></div> <div><span style="color: #9cdcfe;">billion</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">1_000_000_000</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">billion</span><span style="color: #d4d4d4;">);</span> </div><br> <div><span style="color: #6a9955;">// scientifc notation</span></div> <div><span style="color: #9cdcfe;">billion</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">1e9</span><span style="color: #d4d4d4;">; &nbsp;</span><span style="color: #6a9955;">// 1 billion, literally: 1 and 9 zeroes</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">billion</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">mcs</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">1e-6</span><span style="color: #d4d4d4;">; </span><span style="color: #6a9955;">// five zeroes to the left from 1</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">mcs</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 0.000001</span></div><br> <div><span style="color: #6a9955;">//Hex</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">0xac</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 172</span></div> <div><span style="color: #6a9955;">//binary </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">0b1011011</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 91 </span></div> </div> </div> </li> <li> <h3>toString(base)</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">255.</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">toString</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">16</span><span style="color: #d4d4d4;">)); &nbsp;</span><span style="color: #6a9955;">// ff</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">255.</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">toString</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">)); &nbsp; </span><span style="color: #6a9955;">// 11111111 </span></div> <div><span style="color: #6a9955;">// Please note that two dots in 25..toString(36) is not a typo. If we want to call a method directly on a number we use 2 dots </span></div> </div> </div> </li> <li> <h3>Rounding</h3> <p>There are several built-in functions for rounding:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// Math.floor</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">Math</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">floor</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">2.9</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 2</span></div><br> <div><span style="color: #6a9955;">// Math.ceil</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">Math</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">ceil</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">2.1</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 3</span></div><br> <div><span style="color: #6a9955;">//Math.round</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">Math</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">round</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">2.6</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 3 </span></div><br> <div><span style="color: #6a9955;">//Math.trunc</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">Math</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">trunc</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">2.9</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">//2 </span></div> </div> </div> </li> <li> <h3>Imprecise calculations</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// If a number is really huge, it may overflow the 64-bit storage and become a special numeric value Infinity:</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">1e500</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// Infinity</span></div> </div> </div> </li> <li> <h3>Tests: isFinite and isNaN</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">isNaN</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">NaN</span><span style="color: #d4d4d4;">)); &nbsp; </span><span style="color: #6a9955;">// true</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">isNaN</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"str"</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// true </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">isNaN</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">null</span><span style="color: #d4d4d4;">)); &nbsp;</span><span style="color: #6a9955;">// false </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">NaN</span><span style="color: #d4d4d4;"> === </span><span style="color: #569cd6;">NaN</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// false </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">isFinite</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"15"</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// true</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">isFinite</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"str"</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// false, because a special value: NaN</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">isFinite</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">Infinity</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// false, because a special value: Infinity </span></div> <br><br><br> <div><span style="color: #6a9955;">// Number.isNaN and Number.isFinite</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">Number</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">isNaN</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">NaN</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// true</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">Number</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">isNaN</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"str"</span><span style="color: #d4d4d4;"> / </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// true</span></div><br><br><br> <div><span style="color: #6a9955;">// Note the difference:</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">Number</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">isNaN</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"str"</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// false, because "str" belongs to the string type, not the number type</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">isNaN</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"str"</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// true, because isNaN converts string "str" into a number and gets NaN as a result of this conversion</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">isFinite</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"123"</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// true</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">Number</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">isFinite</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"123"</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// false</span></div><br><br><br> <div><span style="color: #6a9955;">// Comparison with Object.is</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">NaN</span><span style="color: #d4d4d4;"> === </span><span style="color: #569cd6;">NaN</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// false</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">Object</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">is</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">NaN</span><span style="color: #d4d4d4;">, </span><span style="color: #569cd6;">NaN</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// true </span></div> </div> </div> </li> <li> <h3>parseInt and parseFloat</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">parseInt</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'100px'</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 100</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">parseFloat</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'12.5em'</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 12.5</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">parseInt</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'12.3'</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 12, only the integer part is returned</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">parseFloat</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'12.3.4'</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 12.3, the second point stops the reading</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">parseInt</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'a123'</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// NaN, the first symbol stops the process</span></div><br><br><br> <div><span style="color: #6a9955;">//The second argument of parseInt(str, radix) </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">parseInt</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'0xff'</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">16</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 255</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">parseInt</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'ff'</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">16</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 255, without 0x also works</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">parseInt</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'2n9c'</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">36</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 123456</span></div> </div> </div> </li> <li> <h3>Other math functions</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">Math</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">random</span><span style="color: #d4d4d4;">());</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">Math</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">pow</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">3</span><span style="color: #d4d4d4;">));</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">Math</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">max</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">3</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">5</span><span style="color: #d4d4d4;">, -</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 5</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">Math</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">min</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 1</span></div> </div> </div> </li> </ul> </details> </li> <li> <details> <summary>Strings</summary> <ul> <li> <h3>Strings</h3> <p>In JavaScript, the textual data is stored as strings. There is no separate type for a single character.</p> <p>The internal format for strings is always UTF-16, it is not tied to the page encoding.</p> </li> <li> <h3>Quotes</h3> <p>Strings can be enclosed within either single quotes, double quotes or backticks:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">//quotes types </span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">single</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">'single-quoted'</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">double</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"double-quoted"</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">backticks</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">`backticks`</span><span style="color: #d4d4d4;">;</span> </div><br><br><br> <div><span style="color: #6a9955;">// Single and double quotes are essentially the same. Backticks, however, allow us to embed any expression into the string, by wrapping it in ${…}:</span></div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">sum</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">a</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">b</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">a</span><span style="color: #d4d4d4;"> + </span><span style="color: #9cdcfe;">b</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">`1 + 2 = </span><span style="color: #569cd6;">${</span><span style="color: #dcdcaa;">sum</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">)</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">.`</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 1 + 2 = 3.</span></div> <br><br><br> <div><span style="color: #6a9955;">// Another advantage of using backticks is that they allow a string to span multiple lines:</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">guestList</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">`Guests:</span> </div> <div><span style="color: #ce9178;">&nbsp;* John</span></div> <div><span style="color: #ce9178;">&nbsp;* Pete</span></div> <div><span style="color: #ce9178;">&nbsp;* Mary</span></div> <div><span style="color: #ce9178;">`</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">guestList</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// a list of guests, multiple lines</span></div> </div> </div> </li> <li> <h3>Special characters</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// new line character \n</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Guests:</span><span style="color: #d7ba7d;">\n</span><span style="color: #ce9178;"> * John</span><span style="color: #d7ba7d;">\n</span><span style="color: #ce9178;"> * Pete</span><span style="color: #d7ba7d;">\n</span><span style="color: #ce9178;"> * Mary"</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// a multiline list of guests, same as above</span></div> </div> </div> <p>There are other, less common special characters:</p> <table> <thead> <tr> <th>Character</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>\n</code></td> <td>New line</td> </tr> <tr> <td><code>\r</code></td> <td>In Windows text files a combination of two characters <code>\r\n</code> represents a new break, while on non-Windows OS it’s just <code>\n</code>. That’s for historical reasons, most Windows software also understands <code>\n</code>. </td> </tr> <tr> <td><code>\'</code>,&nbsp;<code>\"</code>,&nbsp;<code>\`</code> </td> <td>Quotes</td> </tr> <tr> <td><code>\\</code></td> <td>Backslash</td> </tr> <tr> <td><code>\t</code></td> <td>Tab</td> </tr> <tr> <td><code>\b</code>, <code>\f</code>, <code>\v</code> </td> <td>Backspace, Form Feed, Vertical Tab – mentioned for completeness, coming from old times, not used nowadays (you can forget them right now).</td> </tr> </tbody> </table> </li> <li> <h3>String length</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">`Ali`</span><span style="color: #d4d4d4;">.</span><span style="color: #4fc1ff;">length</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 3 </span></div> </div> </div> </li> <li> <h3>Accessing characters</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">`Hello`</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #6a9955;">// the first character</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;">[</span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">]); </span><span style="color: #6a9955;">// H</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">at</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// H</span></div><br><br><br> <div><span style="color: #6a9955;">// the last character</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;">[</span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;">.</span><span style="color: #4fc1ff;">length</span><span style="color: #d4d4d4;"> - </span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">]); </span><span style="color: #6a9955;">// o</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">at</span><span style="color: #d4d4d4;">(-</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// We can also iterate over characters using for..of: </span></div> <div><span style="color: #c586c0;">for</span><span style="color: #d4d4d4;"> (</span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">char</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">of</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"Hello"</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">char</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// H,e,l,l,o (char becomes "H", then "e", then "l" etc)</span> </div> <div><span style="color: #d4d4d4;">}</span> </div> </div> </div> </li> <li> <h3>Strings are immutable</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// Strings can’t be changed in JavaScript. It is impossible to change a character. Let’s try it to show that it doesn’t work:</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">'Hi'</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;">[</span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">] = </span><span style="color: #ce9178;">'h'</span><span style="color: #d4d4d4;">; </span><span style="color: #6a9955;">// error</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;">[</span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">]); </span><span style="color: #6a9955;">// doesn't work</span></div> <br><br><br> <div><span style="color: #6a9955;">// The usual workaround is to create a whole new string and assign it to str instead of the old one. For instance:</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">'Hi'</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">'h'</span><span style="color: #d4d4d4;"> + </span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;">[</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">]; </span><span style="color: #6a9955;">// replace the string</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">( </span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;"> ); </span><span style="color: #6a9955;">// hi</span></div> </div> </div> </li> <li> <h3>Changing the case</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// Methods toLowerCase() and toUpperCase() change the case:</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'Interface'</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">toUpperCase</span><span style="color: #d4d4d4;">()); </span><span style="color: #6a9955;">// INTERFACE</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'Interface'</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">toLowerCase</span><span style="color: #d4d4d4;">()); </span><span style="color: #6a9955;">// interface</span></div> <br><br><br> <div><span style="color: #6a9955;">// Or, if we want a single character lowercased:</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'Interface'</span><span style="color: #d4d4d4;">[</span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">].</span><span style="color: #dcdcaa;">toLowerCase</span><span style="color: #d4d4d4;">()); </span><span style="color: #6a9955;">// 'i' </span></div> </div> </div> </li> <li> <h3>Searching for a substring</h3> <p>There are multiple ways to look for a substring within a string.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// str.indexOf(substr, pos) , str.lastIndexOf(substr, position)</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">'Widget with id'</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">indexOf</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'Widget'</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 0, because 'Widget' is found at the beginning</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">indexOf</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'widget'</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// -1, not found, the search is case-sensitive</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">indexOf</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"id"</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 1, "id" is found at the position 1 (..idget with id)</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">indexOf</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'id'</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">)) </span><span style="color: #6a9955;">// 12</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">lastIndexOf</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"id"</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 12</span></div><br><br><br> <div><span style="color: #6a9955;">//str.includes(subtr,pos)</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Widget with id"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">includes</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Widget"</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// true</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Hello"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">includes</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Bye"</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// false</span></div><br><br><br> <div><span style="color: #6a9955;">// str.startsWith , str.endsWith </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Widget"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">startsWith</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Wid"</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// true, "Widget" starts with "Wid"</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Widget"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">endsWith</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"get"</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// true, "Widget" ends with "get" </span></div> </div> </div> </li> <li> <h3>Getting a substring</h3> <p>There are 3 methods in JavaScript to get a substring</p> <table> <thead> <tr> <th>method</th> <th>selects…</th> <th>negatives</th> </tr> </thead> <tbody> <tr> <td><code>slice(start, end)</code></td> <td>from <code>start</code> to <code>end</code> (not including <code>end</code>) </td> <td>allows negatives</td> </tr> <tr> <td><code>substring(start, end)</code> </td> <td>between <code>start</code> and <code>end</code> (not including <code>end</code>) </td> <td>negative values mean <code>0</code> </td> </tr> <tr> <td><code>substr(start, length)</code> </td> <td>from <code>start</code> get <code>length</code> characters </td> <td>allows negative <code>start</code> </td> </tr> </tbody> </table><br> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// str.slice(start [, end]) : end not included</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"stringify"</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">slice</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 'ringify', from the 2nd position till the end </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">slice</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">5</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 'strin', the substring from 0 to 5 (not including 5)</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">slice</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 's', from 0 to 1, but not including 1, so only character at 0 </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">slice</span><span style="color: #d4d4d4;">(-</span><span style="color: #b5cea8;">4</span><span style="color: #d4d4d4;">, -</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 'gif' , // start at the 4th position from the right, end at the 1st from the righ</span> </div><br><br><br> <div><span style="color: #6a9955;">// str.substring(start [, end])</span></div> <div><span style="color: #6a9955;">// these are same for substring</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">substring</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">6</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// "ring"</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">substring</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">6</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// "ring"</span></div> <div><span style="color: #6a9955;">// ...but not for slice:</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">slice</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">6</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// "ring" (the same)</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">slice</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">6</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// "" (an empty string)</span> </div> <div><span style="color: #6a9955;">// Negative arguments are (unlike slice) not supported, they are treated as 0.</span></div><br><br><br> <div><span style="color: #6a9955;">// str.substr(start [, length]) </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">substr</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">4</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 'ring', from the 2nd position get 4 characters </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">substr</span><span style="color: #d4d4d4;">(-</span><span style="color: #b5cea8;">4</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 'gi', from the 4th position get 2 characters </span></div> </div> </div> </li> <li> <h3>Comparing strings</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// A lowercase letter is always greater than the uppercase:</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'a'</span><span style="color: #d4d4d4;"> &gt; </span><span style="color: #ce9178;">'Z'</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// true </span></div><br><br><br> <div><span style="color: #6a9955;">//str.codePointAt(pos)</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Z"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">codePointAt</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 90</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"z"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">codePointAt</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 122</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"z"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">codePointAt</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">).</span><span style="color: #dcdcaa;">toString</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">16</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 7a (if we need a hexadecimal value) </span></div><br><br><br> <div><span style="color: #6a9955;">// String.fromCodePoint(code)</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">String</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">fromCodePoint</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">90</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// Z</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">String</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">fromCodePoint</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">0x5a</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// Z (we can also use a hex value as an argument)</span></div> <br><br><br> <div><span style="color: #6a9955;">// str1.localeCompare(str2)</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"A"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">localeCompare</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"a"</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 1 =&gt; i.e a &gt; A &nbsp;</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"a"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">localeCompare</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"A"</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// -1 =&gt; i.e a &gt; A &nbsp;</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"a"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">localeCompare</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"a"</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 0 =&gt; i.e a == a </span></div> </div> </div> </li> <li> <h3>String Methods</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"ali"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">at</span><span style="color: #d4d4d4;">(-</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">));</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"ali"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">charAt</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">));</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"ali"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">charCodeAt</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">));</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"ali"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">codePointAt</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">));</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"ali"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">concat</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">" saber"</span><span style="color: #d4d4d4;">));</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"ali"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">endsWith</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"i"</span><span style="color: #d4d4d4;">));</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"ali"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">includes</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"a"</span><span style="color: #d4d4d4;">));</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"ali"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">indexOf</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"l"</span><span style="color: #d4d4d4;">));</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"ali"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">lastIndexOf</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"l"</span><span style="color: #d4d4d4;">));</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"ali"</span><span style="color: #d4d4d4;">.</span><span style="color: #4fc1ff;">length</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"ali"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">localeCompare</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"a"</span><span style="color: #d4d4d4;">));</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"alia"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">match</span><span style="color: #d4d4d4;">(</span><span style="color: #d16969;">/a/</span><span style="color: #569cd6;">ig</span><span style="color: #d4d4d4;">));</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">([...</span><span style="color: #ce9178;">'test1test2'</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">matchAll</span><span style="color: #d4d4d4;">(</span><span style="color: #d16969;">/t/</span><span style="color: #569cd6;">ig</span><span style="color: #d4d4d4;">)]);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"ali"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">padEnd</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"@"</span><span style="color: #d4d4d4;">));</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"ali"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">padStart</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"@"</span><span style="color: #d4d4d4;">));</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">" ee "</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"ali"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">replace</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"i"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"ia"</span><span style="color: #d4d4d4;">));</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"aaaaaaaaaa"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">replaceAll</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"a"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"x"</span><span style="color: #d4d4d4;">));</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"ali"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">search</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"l"</span><span style="color: #d4d4d4;">));</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"ali"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">slice</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">));</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"ali"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">split</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">""</span><span style="color: #d4d4d4;">));</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"ali"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">startsWith</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"x"</span><span style="color: #d4d4d4;">));</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"one day"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">substring</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">3</span><span style="color: #d4d4d4;">));</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"s"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">toUpperCase</span><span style="color: #d4d4d4;">());</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Ali"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">toLowerCase</span><span style="color: #d4d4d4;">());</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">" &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ali &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">trim</span><span style="color: #d4d4d4;">());</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"ali &nbsp; &nbsp; &nbsp;"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">trimEnd</span><span style="color: #d4d4d4;">());</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">" &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ali"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">trimStart</span><span style="color: #d4d4d4;">()); </span></div> </div> </div> </li> </ul> </details> </li> <li> <details> <summary>Arrays</summary> <ul> <li> <h3>Declaration</h3> <p>Array : a special data structure to store ordered collections.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// There are two syntaxes for creating an empty array:</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Array</span><span style="color: #d4d4d4;">();</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">arrr</span><span style="color: #d4d4d4;"> = [];</span></div><br><br><br> <div><span style="color: #6a9955;">// Almost all the time, the second syntax is used. We can supply initial elements in the brackets:</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;"> = [</span><span style="color: #ce9178;">"Apple"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Orange"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Plum"</span><span style="color: #d4d4d4;">];</span> </div><br><br><br> <div><span style="color: #6a9955;">// We can get an element by its number in square brackets:</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">[</span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">]); </span><span style="color: #6a9955;">// Apple</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">[</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">]); </span><span style="color: #6a9955;">// Orange</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">[</span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">]); </span><span style="color: #6a9955;">// Plum </span></div><br><br><br> <div><span style="color: #6a9955;">// We can replace an element:</span></div> <div><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">[</span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">] = </span><span style="color: #ce9178;">'Pear'</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">); &nbsp;</span><span style="color: #6a9955;">// now ["Apple", "Orange", "Pear"] </span></div><br><br><br> <div><span style="color: #6a9955;">// add a new one to the array</span></div> <div><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">[</span><span style="color: #b5cea8;">3</span><span style="color: #d4d4d4;">] = </span><span style="color: #ce9178;">'Lemon'</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// now ["Apple", "Orange", "Pear", "Lemon"]</span></div> <br><br><br> <div><span style="color: #6a9955;">// The total count of the elements in the array is its length:</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">length</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 4</span></div><br><br><br> <div><span style="color: #6a9955;">// An array can store elements of any type.</span></div> <div><span style="color: #6a9955;">// mix of values</span></div> <div><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;"> = [</span><span style="color: #ce9178;">'Apple'</span><span style="color: #d4d4d4;">, { </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">'John'</span><span style="color: #d4d4d4;"> }, </span><span style="color: #569cd6;">true</span><span style="color: #d4d4d4;">, </span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> () { </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'hello'</span><span style="color: #d4d4d4;">); }];</span></div> <div><span style="color: #6a9955;">// get the object at index 1 and then show its name</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">[</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">].</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// John</span></div> <div><span style="color: #6a9955;">// get the function at index 3 and run it</span></div> <div><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">[</span><span style="color: #b5cea8;">3</span><span style="color: #d4d4d4;">](); </span><span style="color: #6a9955;">// hello </span></div><br><br><br> <div><span style="color: #6a9955;">// Trailing comma</span></div> <div><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;"> = [</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #ce9178;">"Apple"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #ce9178;">"Orange"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #ce9178;">"Plum"</span><span style="color: #d4d4d4;">, </span><span style="color: #6a9955;">// An array, just like an object, may end with a comma </span> </div> <div><span style="color: #d4d4d4;">];</span> </div> </div> </div> </li> <li> <h3>Get last elements with “at”</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;"> = [</span><span style="color: #ce9178;">"Apple"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Orange"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Plum"</span><span style="color: #d4d4d4;">];</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">[</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">length</span><span style="color: #d4d4d4;"> - </span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">]); </span><span style="color: #6a9955;">// Plum</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">at</span><span style="color: #d4d4d4;">(-</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// Plum </span></div> </div> </div> </li> <li> <h3>Methods pop/push, shift/unshift</h3> <p>A queue is one of the most common uses of an array. In computer science, this means an ordered collection of elements which supports two operations:</p> <ul class="son"> <li><code>push</code> appends an element to the end. </li> <li><code>shift</code> get an element from the beginning, advancing the queue, so that the 2nd element becomes the 1st.</li> </ul> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// arr.push(ele) =&gt; Appends new elements to the end of an array, and returns the new length of the array.</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;"> = [</span><span style="color: #ce9178;">"Apple"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Orange"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Pear"</span><span style="color: #d4d4d4;">];</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">push</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"banana"</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 4</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// [ "Apple", "Orange", "Pear", "banana" ] </span></div> <br><br><br> <div><span style="color: #6a9955;">// arr.pop() =&gt; removes the last element from an array and returns it</span></div> <div><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;"> = [</span><span style="color: #ce9178;">"Apple"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Orange"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Pear"</span><span style="color: #d4d4d4;">];</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">pop</span><span style="color: #d4d4d4;">()); </span><span style="color: #6a9955;">// remove "Pear" and return it </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// {Apple, Orange] </span></div> <br><br><br> <div><span style="color: #6a9955;">// arr.unshift() =&gt; Inserts new elements at the start of an array, and returns the new length of the array.</span> </div> <div><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;"> = [</span><span style="color: #ce9178;">"Apple"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Orange"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Pear"</span><span style="color: #d4d4d4;">];</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">unshift</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"tomato"</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 4 </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// [ "tomato", "Apple", "Orange", "Pear" ]</span></div> <br><br><br> <div><span style="color: #6a9955;">// arr.shift() =&gt; removes the first element from an array and returns it.</span></div> <div><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;"> = [</span><span style="color: #ce9178;">"Apple"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Orange"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Pear"</span><span style="color: #d4d4d4;">];</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">shift</span><span style="color: #d4d4d4;">()); </span><span style="color: #6a9955;">// remove "Apple" and return it </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// [ "Orange", "Pear" ] </span> </div> </div> </div> </li> <li> <h3>Internals</h3> <p>An array is a special kind of object. The square brackets used to access a property arr[0] actually come from the object syntax. That’s essentially the same as obj[key], where arr is the object, while numbers are used as keys. </p> <p>They extend objects providing special methods to work with ordered collections of data and also the length property. But at the core it’s still an object. Remember, there are only eight basic data types in JavaScript (see the Data types chapter for more info). Array is an object and thus behaves like an object. For instance, it is copied by reference:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;"> = [</span><span style="color: #ce9178;">"Banana"</span><span style="color: #d4d4d4;">]</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">; </span><span style="color: #6a9955;">// copy by reference (two variables reference the same array)</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;"> === </span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// true</span></div> <div><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">push</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Pear"</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// modify the array by reference</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// Banana, Pear - 2 items now </span></div> </div> </div> <p>Because Array is object we can do this</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;"> = []; </span><span style="color: #6a9955;">// make an array</span></div> <div><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">[</span><span style="color: #b5cea8;">99999</span><span style="color: #d4d4d4;">] = </span><span style="color: #b5cea8;">5</span><span style="color: #d4d4d4;">; </span><span style="color: #6a9955;">// assign a property with the index far greater than its length</span></div> <div><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">age</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">25</span><span style="color: #d4d4d4;">; </span><span style="color: #6a9955;">// create a property with an arbitrary name</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">);</span> </div> </div> </div> <p>But the engine will see that we’re working with the array as with a regular object. Array-specific optimizations are not suited for such cases and will be turned off, their benefits disappear.</p> <p>The ways to misuse an array:</p> <ul class="son"> <li>Add a non-numeric property like <code>arr.test = 5</code>. </li> <li>Make holes, like: add <code>arr[0]</code> and then <code>arr[1000]</code> (and nothing between them). </li> <li>Fill the array in the reverse order, like <code>arr[1000]</code>, <code>arr[999]</code> and so on. </li> </ul> <p>Please think of arrays as special structures to work with the ordered data. They provide special methods for that. Arrays are carefully tuned inside JavaScript engines to work with contiguous ordered data, please use them this way. And if you need arbitrary keys, chances are high that you actually require a regular object {}.</p> </li> <li> <h3>Performance</h3> <p>Methods push/pop run fast, while shift/unshift are slow.</p> <p>The shift operation must do 3 things:</p> <ol class="son"> <li>Remove the element with the index <code>0</code>. </li> <li>Move all elements to the left, renumber them from the index <code>1</code> to <code>0</code>, from <code>2</code> to <code>1</code> and so on. </li> <li>Update the <code>length</code> property.</li> </ol> <p>and that make the shift/unshift opeartions slow than push/pop </p> </li> <li> <h3>Loops</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// One of the oldest ways to cycle array items is the for loop over indexes:</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;"> = [</span><span style="color: #ce9178;">"Apple"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Orange"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Pear"</span><span style="color: #d4d4d4;">];</span> </div> <div><span style="color: #c586c0;">for</span><span style="color: #d4d4d4;"> (</span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">i</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">; </span><span style="color: #9cdcfe;">i</span><span style="color: #d4d4d4;"> &lt; </span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">length</span><span style="color: #d4d4d4;">; </span><span style="color: #9cdcfe;">i</span><span style="color: #d4d4d4;">++) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">[</span><span style="color: #9cdcfe;">i</span><span style="color: #d4d4d4;">]);</span> </div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// But for arrays there is another form of loop, for..of:</span></div> <div><span style="color: #c586c0;">for</span><span style="color: #d4d4d4;"> (</span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">fruit</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">of</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruit</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// Technically, because arrays are objects, it is also possible to use for..in:</span></div> <div><span style="color: #c586c0;">for</span><span style="color: #d4d4d4;"> (</span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">key</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">in</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">[</span><span style="color: #9cdcfe;">key</span><span style="color: #d4d4d4;">]); </span><span style="color: #6a9955;">// Apple, Orange, Pear</span></div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #6a9955;">// we shouldn’t use for..in for arrays because it's for objects </span> </div> </div> </div> </li> <li> <h3>A word about “length”</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// The length property automatically updates when we modify the array</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;"> = [];</span></div> <div><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">[</span><span style="color: #b5cea8;">123</span><span style="color: #d4d4d4;">] = </span><span style="color: #ce9178;">"Apple"</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">length</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 124</span></div><br><br><br> <div><span style="color: #6a9955;">// &nbsp;interesting thing about the length property is that it’s writable.</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;"> = [</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">3</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">4</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">5</span><span style="color: #d4d4d4;">];</span> </div> <div><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">length</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">; </span><span style="color: #6a9955;">// truncate to 2 elements</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// [1, 2]</span></div> <div><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">length</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">5</span><span style="color: #d4d4d4;">; </span><span style="color: #6a9955;">// return length back</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">[</span><span style="color: #b5cea8;">3</span><span style="color: #d4d4d4;">]); </span><span style="color: #6a9955;">// undefined: the values do not return </span></div><br><br><br> <div><span style="color: #6a9955;">// clear the array</span></div> <div><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">length</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">0</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">);</span> </div> </div> </div> </li> <li> <h3>new Array()</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// There is one more syntax to create an array which is &nbsp;rarely used, because square brackets [] are shorter</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Array</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Apple"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Pear"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"etc"</span><span style="color: #d4d4d4;">);</span> </div><br><br><br> <div><span style="color: #6a9955;">// If new Array is called with a single argument which is a number, then it creates an array without items, but with the given length.</span></div> <div><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Array</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// will it create an array of [2] ?</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">[</span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">]); </span><span style="color: #6a9955;">// undefined! no elements.</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">length</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// length 2 </span></div> <div><span style="color: #6a9955;">// To avoid such surprises, we usually use square brackets, unless we really know what we’re doing.</span></div> </div> </div> </li> <li> <h3>Multidimensional arrays</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">matrix</span><span style="color: #d4d4d4;"> = [</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; [</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">3</span><span style="color: #d4d4d4;">],</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; [</span><span style="color: #b5cea8;">4</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">5</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">6</span><span style="color: #d4d4d4;">],</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; [</span><span style="color: #b5cea8;">7</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">8</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">9</span><span style="color: #d4d4d4;">]</span> </div> <div><span style="color: #d4d4d4;">];</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">matrix</span><span style="color: #d4d4d4;">[</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">][</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">]); </span><span style="color: #6a9955;">// 5, the central element</span> </div> </div> </div> </li> <li> <h3>toString</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// Arrays have their own implementation of toString method that returns a comma-separated list of elements.</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;"> = [</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">3</span><span style="color: #d4d4d4;">];</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 1,2,3</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">String</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">) === </span><span style="color: #ce9178;">'1,2,3'</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// true &nbsp;</span></div> </div> </div> </li> <li> <h3>Don’t compare arrays with ==</h3> </li> </ul> </details> </li> <li> <details> <summary>Array methods</summary> <ul> <li> <h3>Add/remove items</h3> <div class="cods" spellcheck="false" contenteditable=""> <div> <div><span style="color: #6a9955;">// arr.push(ele) =&gt; Appends new elements to the end of an array, and returns the new length of the array.</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;"> = [</span><span style="color: #ce9178;">"Apple"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Orange"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Pear"</span><span style="color: #d4d4d4;">];</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">push</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"banana"</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 4</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// [ "Apple", "Orange", "Pear", "banana" ] </span></div> <br><br><br> <div><span style="color: #6a9955;">// arr.pop() =&gt; removes the last element from an array and returns it</span></div> <div><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;"> = [</span><span style="color: #ce9178;">"Apple"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Orange"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Pear"</span><span style="color: #d4d4d4;">];</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">pop</span><span style="color: #d4d4d4;">()); </span><span style="color: #6a9955;">// remove "Pear" and return it </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// {Apple, Orange] </span></div> <br><br><br> <div><span style="color: #6a9955;">// arr.unshift() =&gt; Inserts new elements at the start of an array, and returns the new length of the array.</span> </div> <div><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;"> = [</span><span style="color: #ce9178;">"Apple"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Orange"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Pear"</span><span style="color: #d4d4d4;">];</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">unshift</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"tomato"</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 4 </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// [ "tomato", "Apple", "Orange", "Pear" ]</span></div> <br><br><br> <div><span style="color: #6a9955;">// arr.shift() =&gt; removes the first element from an array and returns it.</span></div> <div><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;"> = [</span><span style="color: #ce9178;">"Apple"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Orange"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Pear"</span><span style="color: #d4d4d4;">];</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">shift</span><span style="color: #d4d4d4;">()); </span><span style="color: #6a9955;">// remove "Apple" and return it </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// [ "Orange", "Pear" ] </span> </div> </div> </div> <p>other methods</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// delete operator which leave the deleted index undefined and the length remain the same </span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;"> = [</span><span style="color: #ce9178;">"I"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"go"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"home"</span><span style="color: #d4d4d4;">];</span> </div> <div><span style="color: #569cd6;">delete</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">[</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">]; </span><span style="color: #6a9955;">// remove "go" </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">[</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">]); </span><span style="color: #6a9955;">// undefined </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">length</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 3 </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// splice(start,end) =&gt; Removes elements from an array and, if necessary, inserts new elements in their place, returning the deleted elements.</span></div> <div><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;"> = [</span><span style="color: #ce9178;">"I"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"study"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"JavaScript"</span><span style="color: #d4d4d4;">];</span> </div> <div><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">splice</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// from index 1 remove 1 element</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// ["I", "JavaScript"] </span> </div> <div><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;"> = [</span><span style="color: #ce9178;">"I"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"study"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"JavaScript"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"right"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"now"</span><span style="color: #d4d4d4;">];</span> </div> <div><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">splice</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">3</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Let's"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"dance"</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// remove 3 first elements and replace them with another</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// [ "Let's", "dance", "right", "now" ]</span></div> <div><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;"> = [</span><span style="color: #ce9178;">"I"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"study"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"JavaScript"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"right"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"now"</span><span style="color: #d4d4d4;">];</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">removed</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">splice</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">removed</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// [ "I", "study" ] </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// arr.slice([start], [end]) = &gt; Returns a copy of a section of an array. For both start and end, a negative index can be used to indicate an offset from the end of the array</span> </div> <div><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;"> = [</span><span style="color: #ce9178;">"t"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"e"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"s"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"t"</span><span style="color: #d4d4d4;">];</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">slice</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">3</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// e,s (copy from 1 to 3)</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">slice</span><span style="color: #d4d4d4;">(-</span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// s,t (copy from -2 till the end)</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// arr.concat(arg1,arg2...) =&gt; accepts any number of arguments – either arrays or values.</span></div> <div><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;"> = [</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">];</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">concat</span><span style="color: #d4d4d4;">([</span><span style="color: #b5cea8;">3</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">4</span><span style="color: #d4d4d4;">])); </span><span style="color: #6a9955;">// 1,2,3,4 </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">concat</span><span style="color: #d4d4d4;">([</span><span style="color: #b5cea8;">3</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">4</span><span style="color: #d4d4d4;">], [</span><span style="color: #b5cea8;">5</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">6</span><span style="color: #d4d4d4;">])); </span><span style="color: #6a9955;">// 1,2,3,4,5,6 </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">concat</span><span style="color: #d4d4d4;">([</span><span style="color: #b5cea8;">3</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">4</span><span style="color: #d4d4d4;">], </span><span style="color: #b5cea8;">5</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">6</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 1,2,3,4,5,6 &nbsp;</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">arrayLike</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #b5cea8;">0</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"something"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">length</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">1</span> </div> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">concat</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arrayLike</span><span style="color: #d4d4d4;">));</span> </div> </div> </div> </li> <li> <h3>Iterate: forEach</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #d4d4d4;">[</span><span style="color: #ce9178;">"Bilbo"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Gandalf"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Nazgul"</span><span style="color: #d4d4d4;">].</span><span style="color: #dcdcaa;">forEach</span><span style="color: #d4d4d4;">((</span><span style="color: #9cdcfe;">item</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">index</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">array</span><span style="color: #d4d4d4;">) </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">`</span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">item</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;"> is at index </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">index</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;"> in </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">array</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">`</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">});</span> </div> </div> </div> </li> <li> <h3>Searching in array</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// Array.prototype.indexOf</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;"> = [</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">, </span><span style="color: #569cd6;">false</span><span style="color: #d4d4d4;">];</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">indexOf</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 1</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">indexOf</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">false</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 2</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">indexOf</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">null</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// -1</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">includes</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// true </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// Array.prototype.lastIndexOf</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;"> = [</span><span style="color: #ce9178;">'Apple'</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">'Orange'</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">'Apple'</span><span style="color: #d4d4d4;">]</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">lastIndexOf</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'Apple'</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 2 (last Apple) </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// Array.prototype.includes </span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">includes</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Apple"</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// true </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// Array.prototype.find</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">find</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">ele</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">ele</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">includes</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"A"</span><span style="color: #d4d4d4;">))); </span><span style="color: #6a9955;">// Apple</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">find</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">ele</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">ele</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">includes</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"n"</span><span style="color: #d4d4d4;">))); </span><span style="color: #6a9955;">// Orange </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">find</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">ele</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">ele</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">includes</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"x"</span><span style="color: #d4d4d4;">))); </span><span style="color: #6a9955;">// undefined &nbsp;</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// Array.prototype.findIndex </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">findIndex</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">ele</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">ele</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">includes</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"A"</span><span style="color: #d4d4d4;">))); </span><span style="color: #6a9955;">// 0</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">findIndex</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">ele</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">ele</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">includes</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"n"</span><span style="color: #d4d4d4;">))); </span><span style="color: #6a9955;">// 1</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">findIndex</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">ele</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">ele</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">includes</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"x"</span><span style="color: #d4d4d4;">))); </span><span style="color: #6a9955;">// -1 </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// Array.prototype.filter </span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">filter</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">ele</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">ele</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">includes</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"A"</span><span style="color: #d4d4d4;">))); </span><span style="color: #6a9955;">// [ "Apple", "Apple" ]</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">filter</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">ele</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">ele</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">includes</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"n"</span><span style="color: #d4d4d4;">))); </span><span style="color: #6a9955;">// [ "Orange" ]</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">filter</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">ele</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">ele</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">includes</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"x"</span><span style="color: #d4d4d4;">))); </span><span style="color: #6a9955;">// [] </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// Array.prototype.findLastIndex</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">findLastIndex</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">ele</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">ele</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">includes</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"A"</span><span style="color: #d4d4d4;">))); </span><span style="color: #6a9955;">// 2</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">findLastIndex</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">ele</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">ele</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">includes</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"n"</span><span style="color: #d4d4d4;">))); </span><span style="color: #6a9955;">// 1</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">fruits</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">findLastIndex</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">ele</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">ele</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">includes</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"x"</span><span style="color: #d4d4d4;">))); </span><span style="color: #6a9955;">// -1 &nbsp; </span></div> </div> </div> </li> <li> <h3>Transform an array</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// Array.prototype.map</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">lengths</span><span style="color: #d4d4d4;"> = [</span><span style="color: #ce9178;">"Bilbo"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Gandalf"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Nazgul"</span><span style="color: #d4d4d4;">].</span><span style="color: #dcdcaa;">map</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">item</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">item</span><span style="color: #d4d4d4;">.</span><span style="color: #4fc1ff;">length</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">lengths</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// Array.prototype.sort</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;"> = [</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">15</span><span style="color: #d4d4d4;">];</span> </div> <div><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">sort</span><span style="color: #d4d4d4;">(); </span><span style="color: #6a9955;">// // the method reorders the content of arr</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">); &nbsp;</span><span style="color: #6a9955;">// 1, 15, 2 : The items are sorted as strings by default.</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// String.prototype.split : used to construct arrays from strings &nbsp;</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">names</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">'Bilbo, Gandalf, Nazgul'</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">names</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">split</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">","</span><span style="color: #d4d4d4;">)</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// [ "Bilbo", " Gandalf", " Nazgul" ] </span></div> <div><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">names</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">split</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">","</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">)</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// [ "Bilbo", " Gandalf" ] </span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// Array.prototype.reduce</span> </div> <div><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;"> = [</span><span style="color: #b5cea8;">5</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">5</span><span style="color: #d4d4d4;">]</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">sum</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">reduce</span><span style="color: #d4d4d4;">((</span><span style="color: #9cdcfe;">accumulator</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">item</span><span style="color: #d4d4d4;">) </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">accumulator</span><span style="color: #d4d4d4;"> + </span><span style="color: #9cdcfe;">item</span><span style="color: #d4d4d4;">)</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">sum</span><span style="color: #d4d4d4;">); &nbsp;</span></div> </div> </div> </li> <li> <h3>Array.isArray</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">Array</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">isArray</span><span style="color: #d4d4d4;">({})); </span><span style="color: #6a9955;">// false</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">Array</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">isArray</span><span style="color: #d4d4d4;">([])); </span><span style="color: #6a9955;">// true</span></div> </div> </div> </li> <li> <h3>other functions</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// every</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">names</span><span style="color: #d4d4d4;"> = [</span><span style="color: #ce9178;">"ali"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"hassan"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"hussein"</span><span style="color: #d4d4d4;">]</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">names</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">every</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">ele</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">typeof</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">ele</span><span style="color: #d4d4d4;"> == </span><span style="color: #ce9178;">"string"</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// true</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// some</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">names</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">some</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">ele</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">typeof</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">ele</span><span style="color: #d4d4d4;"> == </span><span style="color: #ce9178;">"number"</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// true</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// Array.prototype.keys()</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">([...</span><span style="color: #9cdcfe;">names</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">keys</span><span style="color: #d4d4d4;">()]); </span><span style="color: #6a9955;">// [ 0, 1, 2 ] </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// Array.prototype.values()</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">([...</span><span style="color: #9cdcfe;">names</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">values</span><span style="color: #d4d4d4;">()]);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// Array.prototype.fill</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">array1</span><span style="color: #d4d4d4;"> = [</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">3</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">4</span><span style="color: #d4d4d4;">];</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">array1</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">fill</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">4</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// fill with 0 from position 2 until position 4</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">array1</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">fill</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">5</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// fill with 5 from position 1</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">array1</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">fill</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">6</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// fill with 6 </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// Array.prototype.reverse</span> </div> <div><span style="color: #9cdcfe;">array1</span><span style="color: #d4d4d4;"> = [</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">3</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">4</span><span style="color: #d4d4d4;">];</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">array1</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">array1</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">reverse</span><span style="color: #d4d4d4;">();</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">array1</span><span style="color: #d4d4d4;">);</span> </div> </div> </div> </li> </ul> </details> </li> <li> <details> <summary>Iterables</summary> <ul> <li> <h3>Iterables</h3> <p>Iterable objects are a generalization of arrays. That’s a concept that allows us to make any object useable in a for..of loop.</p> <p>Of course, Arrays are iterable. But there are many other built-in objects, that are iterable as well. For instance, strings are also iterable.</p> <p>If an object isn’t technically an array, but represents a collection (list, set) of something, then for..of is a great syntax to loop over it, so let’s see how to make it work.</p> </li> <li> <h3>Symbol.iterator</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">range</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">from</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">to</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">50</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; [</span><span style="color: #9cdcfe;">Symbol</span><span style="color: #d4d4d4;">.</span><span style="color: #4fc1ff;">iterator</span><span style="color: #d4d4d4;">]() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">current</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">from</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">last</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">to</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #dcdcaa;">next</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #d4d4d4;"> (</span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">current</span><span style="color: #d4d4d4;"> &lt;= </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">last</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> { </span><span style="color: #9cdcfe;">done</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">false</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">value</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">current</span><span style="color: #d4d4d4;">++ };</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } </span><span style="color: #c586c0;">else</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> { </span><span style="color: #9cdcfe;">done</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">true</span><span style="color: #d4d4d4;"> };</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; }</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #c586c0;">for</span><span style="color: #d4d4d4;"> (</span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">num</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">of</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">range</span><span style="color: #d4d4d4;">) { </span><span style="color: #6a9955;">// num = &nbsp;range[Symbol.iterator]().next().value </span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">num</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 1, then 2, 3, 4, 5 </span></div> <div><span style="color: #d4d4d4;">}</span> </div> </div> </div> <p>range function</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">range</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">from</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">to</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">from</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">from</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">to</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">to</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; [</span><span style="color: #9cdcfe;">Symbol</span><span style="color: #d4d4d4;">.</span><span style="color: #4fc1ff;">iterator</span><span style="color: #d4d4d4;">]() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">current</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">from</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">last</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">to</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #dcdcaa;">next</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #d4d4d4;"> (</span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">current</span><span style="color: #d4d4d4;"> &lt;= </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">last</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> { </span><span style="color: #9cdcfe;">done</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">false</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">value</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">current</span><span style="color: #d4d4d4;">++ };</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } </span><span style="color: #c586c0;">else</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> { </span><span style="color: #9cdcfe;">done</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">true</span><span style="color: #d4d4d4;"> };</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; }</span></div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #6a9955;">// iterate over range </span></div> <div><span style="color: #c586c0;">for</span><span style="color: #d4d4d4;"> (</span><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #4fc1ff;">iterator</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">of</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">range</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">,</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">)) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #4fc1ff;">iterator</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">}</span> </div> </div> </div> </li> <li> <h3>String is iterable</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// For a string, for..of loops over its characters:</span></div> <div><span style="color: #c586c0;">for</span><span style="color: #d4d4d4;"> (</span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">char</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">of</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"test"</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// triggers 4 times: once for each character</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">char</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// t, then e, then s, then t</span> </div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// And it works correctly with surrogate pairs!</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">'𝒳😂'</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #c586c0;">for</span><span style="color: #d4d4d4;"> (</span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">char</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">of</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">char</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 𝒳, and then 😂</span></div> <div><span style="color: #d4d4d4;">}</span> </div> </div> </div> </li> <li> <h3>Calling an iterator explicitly</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"Hello"</span><span style="color: #d4d4d4;">;</span> </div><br> <div><span style="color: #6a9955;">// does the same as</span></div> <div><span style="color: #6a9955;">// for (let char of str) alert(char);</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">iterator</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;">[</span><span style="color: #9cdcfe;">Symbol</span><span style="color: #d4d4d4;">.</span><span style="color: #4fc1ff;">iterator</span><span style="color: #d4d4d4;">]();</span> </div><br> <div><span style="color: #c586c0;">while</span><span style="color: #d4d4d4;"> (</span><span style="color: #569cd6;">true</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">result</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">iterator</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">next</span><span style="color: #d4d4d4;">();</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">result</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">done</span><span style="color: #d4d4d4;">) </span><span style="color: #c586c0;">break</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">result</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// outputs characters one by one</span></div> <div><span style="color: #d4d4d4;">}</span> </div> </div> </div> </li> <li> <h3>Iterables and array-likes</h3> <p>Two official terms look similar, but are very different. Please make sure you understand them well to avoid the confusion.</p> <ul class="son"> <li><em>Iterables</em> are objects that implement the <code>Symbol.iterator</code> method, as described above. </li> <li><em>Array-likes</em> are objects that have indexes and <code>length</code>, so they look like arrays.</li> </ul> <p>When we use JavaScript for practical tasks in a browser or any other environment, we may meet objects that are iterables or array-likes, or both.</p> <p>For instance, strings are both iterable (for..of works on them) and array-like (they have numeric indexes and length).</p> <p>And here’s the object that is array-like, but not iterable: </p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">arrayLike</span><span style="color: #d4d4d4;"> = { </span><span style="color: #6a9955;">// has indexes and length =&gt; array-like</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #b5cea8;">0</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"Hello"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #b5cea8;">1</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"World"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">length</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">2</span> </div> <div><span style="color: #d4d4d4;">&nbsp; };</span></div> <div><span style="color: #d4d4d4;">&nbsp; </span></div> <div><span style="color: #d4d4d4;">&nbsp; </span><span style="color: #6a9955;">// Error (no Symbol.iterator)</span></div> <div><span style="color: #d4d4d4;">&nbsp; </span><span style="color: #c586c0;">for</span><span style="color: #d4d4d4;"> (</span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">item</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">of</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">arrayLike</span><span style="color: #d4d4d4;">) {}</span></div> </div> </div> </li> <li> <h3>Array.from</h3> <p>Both iterables and array-likes are usually not arrays, they don’t have push, pop etc. That’s rather inconvenient if we have such an object and want to work with it as with an array. E.g. we would like to work with range using array methods. How to achieve that?</p> <p>we use Array.from or [...iterable] for iterables </p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">arrayLike</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; </span><span style="color: #b5cea8;">0</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"Hello"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; </span><span style="color: #b5cea8;">1</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"World"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; </span><span style="color: #9cdcfe;">length</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">2</span> </div> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #6a9955;">// Array.from(arrayLike)</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">arr1</span><span style="color: #d4d4d4;"> = </span><span style="color: #4ec9b0;">Array</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">from</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arrayLike</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// (*)</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arr1</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">pop</span><span style="color: #d4d4d4;">()); </span><span style="color: #6a9955;">// World (method works)</span> </div><br><br><br> <div><span style="color: #6a9955;">// [...iterable] </span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">iter</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">range</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">20</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">arrayFromIter</span><span style="color: #d4d4d4;"> = [...</span><span style="color: #9cdcfe;">iter</span><span style="color: #d4d4d4;">]</span> </div> <div><span style="color: #9cdcfe;">arrayFromIter</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">forEach</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">ele</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">ele</span><span style="color: #d4d4d4;">))</span> </div> </div> </div> </li> </ul> </details> </li> <li> <details> <summary>Map and Set</summary> <ul> <li> <h3>Map</h3> <p>Map is a collection of keyed data items, just like an Object. But the main difference is that Map allows keys of any type.</p> <p>Methods and properties are:</p> <ul class="son"> <li><code>new Map()</code> – creates the map.</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/set"><code>map.set(key, value)</code></a> – stores the value by the key.</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/get"><code>map.get(key)</code></a> – returns the value by the key, <code>undefined</code> if <code>key</code> doesn’t exist in map. </li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/has"><code>map.has(key)</code></a> – returns <code>true</code> if the <code>key</code> exists, <code>false</code> otherwise. </li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/delete"><code>map.delete(key)</code></a> – removes the value by the key.</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/clear"><code>map.clear()</code></a> – removes everything from the map.</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/size"><code>map.size</code></a> – returns the current element count.</li> </ul> <p>For instance:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">map</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Map</span><span style="color: #d4d4d4;">(), </span><span style="color: #9cdcfe;">obj</span><span style="color: #d4d4d4;"> = { </span><span style="color: #ce9178;">"name"</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"ali"</span><span style="color: #d4d4d4;"> }</span></div><br> <div><span style="color: #9cdcfe;">map</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">set</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'1'</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">'str1'</span><span style="color: #d4d4d4;">); &nbsp; </span><span style="color: #6a9955;">// a string key</span></div> <div><span style="color: #9cdcfe;">map</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">set</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">'num1'</span><span style="color: #d4d4d4;">); &nbsp; &nbsp; </span><span style="color: #6a9955;">// a numeric key</span></div> <div><span style="color: #9cdcfe;">map</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">set</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">true</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">'bool1'</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// a boolean key</span></div> <div><span style="color: #9cdcfe;">map</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">set</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">obj</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"object"</span><span style="color: #d4d4d4;">) </span><span style="color: #6a9955;">// an object key </span></div><br> <div><span style="color: #6a9955;">// remember the regular Object? it would convert keys to string</span> </div> <div><span style="color: #6a9955;">// Map keeps the type, so these two are different:</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">map</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">get</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 'num1'</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">map</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">get</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'1'</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 'str1'</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">map</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">get</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">obj</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// object</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">map</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">get</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">true</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// boolean key</span></div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">map</span><span style="color: #d4d4d4;">.</span><span style="color: #4fc1ff;">size</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 3 </span></div> </div> </div> <p>Using objects as keys is one of the most notable and important Map features.</p> <p>Chaining : Every map.set call returns the map itself, so we can “chain” the calls:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">map</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Map</span><span style="color: #d4d4d4;">();</span> </div> <div><span style="color: #9cdcfe;">map</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">set</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'1'</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">'str1'</span><span style="color: #d4d4d4;">).</span><span style="color: #dcdcaa;">set</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">'num1'</span><span style="color: #d4d4d4;">).</span><span style="color: #dcdcaa;">set</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">true</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">'bool1'</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// chaining</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">map</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// { 1 → "str1", 1 → "num1", true → "bool1" }</span></div> </div> </div> </li> <li> <h3>Iteration over Map</h3> <p>For looping over a map, there are 3 methods:</p> <ul class="son"> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/keys"><code>map.keys()</code></a> – returns an iterable for keys,</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/values"><code>map.values()</code></a> – returns an iterable for values,</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/entries"><code>map.entries()</code></a> – returns an iterable for entries <code>[key, value]</code>, it’s used by default in <code>for..of</code>. </li> </ul> <p>For instance:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">recipeMap</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Map</span><span style="color: #d4d4d4;">([</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; [</span><span style="color: #ce9178;">'cucumber'</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">500</span><span style="color: #d4d4d4;">],</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; [</span><span style="color: #ce9178;">'tomatoes'</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">350</span><span style="color: #d4d4d4;">],</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; [</span><span style="color: #ce9178;">'onion'</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">50</span><span style="color: #d4d4d4;">]</span> </div> <div><span style="color: #d4d4d4;">]);</span> </div><br><br><br><br> <div><span style="color: #6a9955;">// iterate over keys (vegetables)</span> </div> <div><span style="color: #c586c0;">for</span><span style="color: #d4d4d4;"> (</span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">vegetable</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">of</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">recipeMap</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">keys</span><span style="color: #d4d4d4;">()) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">vegetable</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// cucumber, tomatoes, onion</span> </div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// iterate over values (amounts)</span> </div> <div><span style="color: #c586c0;">for</span><span style="color: #d4d4d4;"> (</span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">amount</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">of</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">recipeMap</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">values</span><span style="color: #d4d4d4;">()) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">amount</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 500, 350, 50</span></div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// iterate over [key, value] entries</span> </div> <div><span style="color: #c586c0;">for</span><span style="color: #d4d4d4;"> (</span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">entry</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">of</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">recipeMap</span><span style="color: #d4d4d4;">) { </span><span style="color: #6a9955;">// the same as of recipeMap.entries()</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">entry</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// cucumber,500 (and so on)</span> </div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">)); </span></div> </div> </div> <p>Besides that, Map has a built-in forEach method, similar to Array:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">recipeMap</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Map</span><span style="color: #d4d4d4;">([</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; [</span><span style="color: #ce9178;">'cucumber'</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">500</span><span style="color: #d4d4d4;">],</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; [</span><span style="color: #ce9178;">'tomatoes'</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">350</span><span style="color: #d4d4d4;">],</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; [</span><span style="color: #ce9178;">'onion'</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">50</span><span style="color: #d4d4d4;">]</span> </div> <div><span style="color: #d4d4d4;">]);</span> </div> <div><span style="color: #9cdcfe;">recipeMap</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">forEach</span><span style="color: #d4d4d4;">((</span><span style="color: #9cdcfe;">key</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;">) </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">`</span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">value</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;"> : </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">key</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">`</span><span style="color: #d4d4d4;">))</span> </div> </div> </div> </li> <li> <h3>Object.entries: Map from Object</h3> <p>When a Map is created, we can pass an array (or another iterable) with key/value pairs for initialization, like this:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// array of [key, value] pairs</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">map</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Map</span><span style="color: #d4d4d4;">([</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; [</span><span style="color: #ce9178;">'1'</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">'str1'</span><span style="color: #d4d4d4;">],</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; [</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">'num1'</span><span style="color: #d4d4d4;">],</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; [</span><span style="color: #569cd6;">true</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">'bool1'</span><span style="color: #d4d4d4;">]</span> </div> <div><span style="color: #d4d4d4;">]);</span> </div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">map</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">get</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'1'</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// str1 </span></div> </div> </div> <p>we can create a map from an object like this:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">obj</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">age</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">30</span> </div> <div><span style="color: #d4d4d4;">};</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">map</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Map</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">Object</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">entries</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">obj</span><span style="color: #d4d4d4;">));</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">map</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">get</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'name'</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// John &nbsp;</span></div> </div> </div> </li> <li> <h3>Object.fromEntries: Object from Map</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">map</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Map</span><span style="color: #d4d4d4;">();</span> </div> <div><span style="color: #9cdcfe;">map</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">set</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'banana'</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">map</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">set</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'orange'</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">map</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">set</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'meat'</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">4</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">obj</span><span style="color: #d4d4d4;"> = </span><span style="color: #4ec9b0;">Object</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">fromEntries</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">map</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">entries</span><span style="color: #d4d4d4;">()); </span><span style="color: #6a9955;">// make a plain object (*)</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">obj</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// { banana: 1, orange: 2, meat: 4 } </span></div> </div> </div> </li> <li> <h3>Set</h3> <p>A Set is a special type collection – “set of values” (without keys), where each value may occur only once.</p> <p>Its main methods are:</p> <ul class="son"> <li><code>new Set(iterable)</code> – creates the set, and if an <code>iterable</code> object is provided (usually an array), copies values from it into the set.</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set/add"><code>set.add(value)</code></a> – adds a value, returns the set itself.</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set/delete"><code>set.delete(value)</code></a> – removes the value, returns <code>true</code> if <code>value</code> existed at the moment of the call, otherwise <code>false</code>.</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set/has"><code>set.has(value)</code></a> – returns <code>true</code> if the value exists in the set, otherwise <code>false</code>.</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set/clear"><code>set.clear()</code></a> – removes everything from the set.</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set/size"><code>set.size</code></a> – is the elements count.</li> </ul> <p>Example:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">set</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Set</span><span style="color: #d4d4d4;">();</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">john</span><span style="color: #d4d4d4;"> = { </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;"> };</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">pete</span><span style="color: #d4d4d4;"> = { </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"Pete"</span><span style="color: #d4d4d4;"> };</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">mary</span><span style="color: #d4d4d4;"> = { </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"Mary"</span><span style="color: #d4d4d4;"> };</span></div><br> <div><span style="color: #6a9955;">// visits, some users come multiple times</span></div> <div><span style="color: #9cdcfe;">set</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">add</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">john</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">set</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">add</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">pete</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">set</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">add</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">mary</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">set</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">add</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">john</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">set</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">add</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">mary</span><span style="color: #d4d4d4;">);</span> </div><br> <div><span style="color: #6a9955;">// set keeps only unique values</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">set</span><span style="color: #d4d4d4;">.</span><span style="color: #4fc1ff;">size</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 3 </span></div><br> <div><span style="color: #c586c0;">for</span><span style="color: #d4d4d4;"> (</span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">of</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">set</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// John (then Pete and Mary)</span> </div> <div><span style="color: #d4d4d4;">}</span> </div> </div> </div> </li> <li> <h3>Iteration over Set</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">set</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Set</span><span style="color: #d4d4d4;">([</span><span style="color: #ce9178;">"oranges"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"apples"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"bananas"</span><span style="color: #d4d4d4;">]);</span> </div><br> <div><span style="color: #6a9955;">// for of</span></div> <div><span style="color: #c586c0;">for</span><span style="color: #d4d4d4;"> (</span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">of</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">set</span><span style="color: #d4d4d4;">) </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">50</span><span style="color: #d4d4d4;">));</span> </div><br> <div><span style="color: #6a9955;">// the same with forEach:</span></div> <div><span style="color: #9cdcfe;">set</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">forEach</span><span style="color: #d4d4d4;">((</span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;">) </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">});</span> </div> </div> </div> </li> </ul> </details> </li> <li> <details> <summary>WeakMap and WeakSet</summary> <p>will be reviewed later</p> </details> </li> <li> <details> <summary>Object.keys, values, entries</summary> <ul> <li> <h3>Object.keys, values, entries</h3> <p>For plain objects, the following methods are available:</p> <ul class="son"> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys">Object.keys(obj)</a> – returns an array of keys.</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/values">Object.values(obj)</a> – returns an array of values.</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/entries">Object.entries(obj)</a> – returns an array of <code>[key, value]</code> pairs.</li> </ul> <p>Example</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">age</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">30</span> </div> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">Object</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">keys</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// [ "name", "age" ] </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">Object</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">values</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// [ "John", 30 ] </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">Object</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">entries</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// [["name","john"],["age",30]] </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// loop over values</span></div> <div><span style="color: #c586c0;">for</span><span style="color: #d4d4d4;"> (</span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">of</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Object</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">values</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">)) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// John, then 30</span></div> <div><span style="color: #d4d4d4;">}</span> </div> </div> </div> </li> <li> <h3>Transforming objects </h3> <p>Objects lack many methods that exist for arrays, e.g. map, filter and others. If we’d like to apply them, then we can use Object.entries followed by Object.fromEntries: </p> <ol class="son"> <li>Use <code>Object.entries(obj)</code> to get an array of key/value pairs from <code>obj</code>.</li> <li>Use array methods on that array, e.g. <code>map</code>, to transform these key/value pairs. </li> <li>Use <code>Object.fromEntries(array)</code> on the resulting array to turn it back into an object. </li> </ol> <p>example</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">prices</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">banana</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">orange</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">meat</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">4</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">entries</span><span style="color: #d4d4d4;"> = </span><span style="color: #4ec9b0;">Object</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">entries</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">prices</span><span style="color: #d4d4d4;">)</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">doublePrices</span><span style="color: #d4d4d4;"> = </span><span style="color: #4ec9b0;">Object</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">fromEntries</span><span style="color: #d4d4d4;">(</span> </div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">entries</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">map</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">x</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> [</span><span style="color: #9cdcfe;">x</span><span style="color: #d4d4d4;">[</span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">], </span><span style="color: #9cdcfe;">x</span><span style="color: #d4d4d4;">[</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">] * </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">])</span> </div><br> <div><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">doublePrices</span><span style="color: #d4d4d4;">); </span></div> </div> </div> </li> </ul> </details> </li> <li> <details> <summary>Destructuring assignment</summary> <ul> <li> <h3>Array destructuring</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// array destructing </span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> [</span><span style="color: #9cdcfe;">firstName</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">surname</span><span style="color: #d4d4d4;">] = [</span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Smith"</span><span style="color: #d4d4d4;">];</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">firstName</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// John</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">surname</span><span style="color: #d4d4d4;">); &nbsp; </span><span style="color: #6a9955;">// Smith &nbsp;</span></div> </div> </div> <br> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> [</span><span style="color: #9cdcfe;">firstName</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">surname</span><span style="color: #d4d4d4;">] = </span><span style="color: #ce9178;">"John Smith"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">split</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">' '</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">firstName</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// John</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">surname</span><span style="color: #d4d4d4;">); &nbsp;</span><span style="color: #6a9955;">// Smith </span></div> </div> </div> <p>Ignore elements using commas</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// Unwanted elements of the array can also be thrown away via an extra comma:</span></div> <div><span style="color: #6a9955;">// second element is not needed</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> [</span><span style="color: #9cdcfe;">firstName</span><span style="color: #d4d4d4;">, , </span><span style="color: #9cdcfe;">title</span><span style="color: #d4d4d4;">] = [</span><span style="color: #ce9178;">"Julius"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Caesar"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Consul"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"of the Roman Republic"</span><span style="color: #d4d4d4;">];</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">title</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// Consul</span></div> </div> </div> <p>Works with any iterable on the right-side</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> [</span><span style="color: #9cdcfe;">a</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">b</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">c</span><span style="color: #d4d4d4;">] = </span><span style="color: #ce9178;">"123"</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> [</span><span style="color: #9cdcfe;">one</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">two</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">three</span><span style="color: #d4d4d4;">] = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Set</span><span style="color: #d4d4d4;">([</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">3</span><span style="color: #d4d4d4;">]);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">`a = </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">a</span><span style="color: #569cd6;">}</span> </div> <div><span style="color: #ce9178;">b = </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">b</span><span style="color: #569cd6;">}</span> </div> <div><span style="color: #ce9178;">c = </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">c</span><span style="color: #569cd6;">}</span> </div> <div><span style="color: #ce9178;">one = </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">one</span><span style="color: #569cd6;">}</span> </div> <div><span style="color: #ce9178;">two = </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">two</span><span style="color: #569cd6;">}</span> </div> <div><span style="color: #ce9178;">three = </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">three</span><span style="color: #569cd6;">}</span> </div> <div><span style="color: #ce9178;">`</span><span style="color: #d4d4d4;">);</span> </div> </div> </div> <p>Looping with .entries()</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// We can use it with destructuring to loop over keys-and-values of an object:</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">age</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">30</span> </div> <div><span style="color: #d4d4d4;">};</span> </div><br> <div><span style="color: #6a9955;">// loop over keys-and-values</span></div> <div><span style="color: #c586c0;">for</span><span style="color: #d4d4d4;"> (</span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> [</span><span style="color: #9cdcfe;">key</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;">] </span><span style="color: #569cd6;">of</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Object</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">entries</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">)) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">`</span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">key</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">:</span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">value</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">`</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// name:John, then age:30</span> </div> <div><span style="color: #d4d4d4;">}</span> </div> </div> </div> <p>Swap variables trick</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// There’s a well-known trick for swapping values of two variables using a destructuring assignment:</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">guest</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"Jane"</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">admin</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"Pete"</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">`guest = </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">guest</span><span style="color: #569cd6;">}</span> </div> <div><span style="color: #ce9178;">admin = </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">admin</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;"> </span> </div> <div><span style="color: #ce9178;">`</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br> <div><span style="color: #6a9955;">// Let's swap the values: make guest=Pete, admin=Jane</span></div> <div><span style="color: #d4d4d4;">[</span><span style="color: #9cdcfe;">guest</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">admin</span><span style="color: #d4d4d4;">] = [</span><span style="color: #9cdcfe;">admin</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">guest</span><span style="color: #d4d4d4;">];</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">`guest = </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">guest</span><span style="color: #569cd6;">}</span> </div> <div><span style="color: #ce9178;">admin = </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">admin</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;"> </span> </div> <div><span style="color: #ce9178;">`</span><span style="color: #d4d4d4;">); </span></div> </div> </div> <p>the rest ...</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// If we’d like also to gather all that follows – we can add one more parameter that gets “the rest” using three dots "...":</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> [</span><span style="color: #9cdcfe;">name1</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">name2</span><span style="color: #d4d4d4;">, ...</span><span style="color: #9cdcfe;">rest</span><span style="color: #d4d4d4;">] = [</span><span style="color: #ce9178;">"Julius"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Caesar"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Consul"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"of the Roman Republic"</span><span style="color: #d4d4d4;">];</span> </div> <div><span style="color: #6a9955;">// rest is array of items, starting from the 3rd one</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">rest</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 2</span></div> </div> </div> <p>Default values</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// If the array is shorter than the list of variables at the left, there’ll be no errors. Absent values are considered undefined:</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> [</span><span style="color: #9cdcfe;">firstName</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">surname</span><span style="color: #d4d4d4;">] = [];</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">firstName</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// undefined</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">surname</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// undefined</span></div> <br><br><br> <div><span style="color: #6a9955;">// If we want a “default” value to replace the missing one, we can provide it using =:</span></div> <div><span style="color: #d4d4d4;">[</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"Guest"</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">surname</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"Anonymous"</span><span style="color: #d4d4d4;">] = [</span><span style="color: #ce9178;">"Julius"</span><span style="color: #d4d4d4;">];</span> </div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">); &nbsp; &nbsp;</span><span style="color: #6a9955;">// Julius (from array)</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">surname</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// Anonymous (default used) </span> </div><br><br><br> <div><span style="color: #6a9955;">// Default values can be more complex expressions or even function calls. They are evaluated only if the value is not provided.</span></div> <div><span style="color: #6a9955;">// runs only prompt for surname</span></div> <div><span style="color: #d4d4d4;">[</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">prompt</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'name?'</span><span style="color: #d4d4d4;">), </span><span style="color: #9cdcfe;">surname</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">prompt</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'surname?'</span><span style="color: #d4d4d4;">)] = [</span><span style="color: #ce9178;">"Julius"</span><span style="color: #d4d4d4;">];</span> </div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">); &nbsp; &nbsp;</span><span style="color: #6a9955;">// Julius (from array)</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">surname</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// whatever prompt gets</span> </div><br> <div><span style="color: #6a9955;">// Please note: the prompt will run only for the missing value (surname).</span></div> </div> </div> </li> <li> <h3>Object destructuring</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// The destructuring assignment also works with objects </span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> { </span><span style="color: #9cdcfe;">title</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">width</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">height</span><span style="color: #d4d4d4;"> } = { </span><span style="color: #9cdcfe;">title</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"Menu"</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">width</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">100</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">height</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">200</span><span style="color: #d4d4d4;"> };</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">title</span><span style="color: #d4d4d4;">); &nbsp;</span><span style="color: #6a9955;">// Menu</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">width</span><span style="color: #d4d4d4;">); &nbsp;</span><span style="color: #6a9955;">// 100</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">height</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 200</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// The order does not matter. This works too:</span></div> <div><span style="color: #d4d4d4;">({ </span><span style="color: #9cdcfe;">height</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">width</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">title</span><span style="color: #d4d4d4;"> } = { </span><span style="color: #9cdcfe;">title</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"Roro"</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">height</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">120</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">width</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">70</span><span style="color: #d4d4d4;"> })</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">title</span><span style="color: #d4d4d4;">); &nbsp;</span><span style="color: #6a9955;">// Menu</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">width</span><span style="color: #d4d4d4;">); &nbsp;</span><span style="color: #6a9955;">// 100</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">height</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 200</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// If we want to assign a property to a variable with another name, for instance, make options.width go into the variable named w, then we can set the variable name using a colon:</span></div> <div><span style="color: #d4d4d4;">({ </span><span style="color: #9cdcfe;">width</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">w</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">height</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">h</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">title</span><span style="color: #d4d4d4;"> } = { </span><span style="color: #9cdcfe;">title</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"Ali"</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">width</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">20</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">height</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">5000</span><span style="color: #d4d4d4;"> })</span></div> <div><span style="color: #6a9955;">// width -&gt; w</span></div> <div><span style="color: #6a9955;">// height -&gt; h </span></div> <div><span style="color: #6a9955;">// title -&gt; title</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">title</span><span style="color: #d4d4d4;">); &nbsp;</span><span style="color: #6a9955;">// Menu</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">w</span><span style="color: #d4d4d4;">); &nbsp; &nbsp; &nbsp;</span><span style="color: #6a9955;">// 100</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">h</span><span style="color: #d4d4d4;">); &nbsp; &nbsp; &nbsp;</span><span style="color: #6a9955;">// 200 </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// For potentially missing properties we can set default values using "=", like this:</span></div> <div><span style="color: #d4d4d4;">({ </span><span style="color: #9cdcfe;">width</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">100</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">height</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">200</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">title</span><span style="color: #d4d4d4;"> } = { </span><span style="color: #9cdcfe;">title</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"Hema"</span><span style="color: #d4d4d4;"> })</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">title</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">width</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">height</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// We also can combine both the colon and equality:</span></div> <div><span style="color: #d4d4d4;">({ </span><span style="color: #9cdcfe;">width</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">w</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">28.3</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">height</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">h</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">4.88</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">title</span><span style="color: #d4d4d4;"> } = { </span><span style="color: #9cdcfe;">title</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"Sony"</span><span style="color: #d4d4d4;"> })</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">title</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">w</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">h</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// if we have a complex object with many properties, we can extract only what we need:</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">options</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">title</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"االله اكبر"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">width</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">100</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">height</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">200</span> </div> <div><span style="color: #d4d4d4;">};</span> </div><br> <div><span style="color: #6a9955;">// only extract title as a variable</span></div> <div><span style="color: #d4d4d4;">({ </span><span style="color: #9cdcfe;">title</span><span style="color: #d4d4d4;"> } = </span><span style="color: #9cdcfe;">options</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">title</span><span style="color: #d4d4d4;">);</span> </div> </div> </div> </li> <li> <h3>Nested destructuring</h3> <p>If an object or an array contain other nested objects and arrays, we can use more complex left-side patterns to extract deeper portions.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">options</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">size</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">width</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">100</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">height</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">200</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; },</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">items</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> [</span><span style="color: #ce9178;">"Cake"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Donut"</span><span style="color: #d4d4d4;">],</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">extra</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">true</span> </div> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> { </span><span style="color: #9cdcfe;">size</span><span style="color: #d4d4d4;">: { </span><span style="color: #9cdcfe;">width</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">height</span><span style="color: #d4d4d4;"> }, </span><span style="color: #9cdcfe;">items</span><span style="color: #d4d4d4;">: [</span><span style="color: #9cdcfe;">item1</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">item2</span><span style="color: #d4d4d4;">], </span><span style="color: #9cdcfe;">title</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"Menu"</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">extra</span><span style="color: #d4d4d4;"> } = </span><span style="color: #9cdcfe;">options</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">title</span><span style="color: #d4d4d4;">);</span><span style="color: #6a9955;">// Menu </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">width</span><span style="color: #d4d4d4;">);</span><span style="color: #6a9955;">// 100 </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">height</span><span style="color: #d4d4d4;">);</span><span style="color: #6a9955;">// 200 </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">item1</span><span style="color: #d4d4d4;">);</span><span style="color: #6a9955;">// Cake </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">item2</span><span style="color: #d4d4d4;">);</span><span style="color: #6a9955;">// Donut &nbsp;</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">extra</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// true</span></div> </div> </div> <p>All properties of options object except extra that is absent in the left part, are assigned to corresponding variables:</p> <img style="background-color:white;width:100%;" src="https://javascript.info/article/destructuring-assignment/destructuring-complex.svg"> <p>Note that there are no variables for size and items, as we take their content instead.</p> </li> <li> <h3>Smart function parameters</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// We can pass parameters as an object, and the function immediately destructurizes them into variables:</span></div> <div><span style="color: #6a9955;">// we pass object to function</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">options</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">title</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"My menu"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">items</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> [</span><span style="color: #ce9178;">"Item1"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Item2"</span><span style="color: #d4d4d4;">]</span> </div> <div><span style="color: #d4d4d4;">};</span> </div><br> <div><span style="color: #6a9955;">// ...and it immediately expands it to variables</span></div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">showMenu</span><span style="color: #d4d4d4;">({ </span><span style="color: #9cdcfe;">title</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"Untitled"</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">width</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">200</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">height</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">100</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">items</span><span style="color: #d4d4d4;"> = [] }) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// title, items – taken from options,</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// width, height – defaults used</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">`</span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">title</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;"> </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">width</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;"> </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">height</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">`</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// My Menu 200 100</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">items</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// Item1, Item2</span></div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #dcdcaa;">showMenu</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">options</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// We can also use more complex destructuring with nested objects and colon mappings:</span></div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">showMenu</span><span style="color: #d4d4d4;">({</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">title</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"Untitled"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">width</span><span style="color: #d4d4d4;">: </span><span style="color: #9cdcfe;">w</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">100</span><span style="color: #d4d4d4;">, &nbsp;</span><span style="color: #6a9955;">// width goes to w</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">height</span><span style="color: #d4d4d4;">: </span><span style="color: #9cdcfe;">h</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">200</span><span style="color: #d4d4d4;">, </span><span style="color: #6a9955;">// height goes to h</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">items</span><span style="color: #d4d4d4;">: [</span><span style="color: #9cdcfe;">item1</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">item2</span><span style="color: #d4d4d4;">] </span><span style="color: #6a9955;">// items first element goes to item1, second to item2</span> </div> <div><span style="color: #d4d4d4;">}) {</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">`</span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">title</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;"> </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">w</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;"> </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">h</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">`</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// My Menu 100 200</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">item1</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// Item1</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">item2</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// Item2</span></div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #dcdcaa;">showMenu</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">options</span><span style="color: #d4d4d4;">);</span> </div> </div> </div> </li> </ul> </details> </li> <li> <details> <summary>Date and time</summary> <ul> <li> <h3>Date and time</h3> <p> Date : built-in object: Date. It stores the date, time and provides methods for date/time management.</p> </li> <li> <h3>Creation</h3> <p>To create a new Date object call new Date() with one of the following arguments:</p> <ul class="son"> <li>new Date()</li><br> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// Without arguments – create a Date object for the current date and time:</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">now</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Date</span><span style="color: #d4d4d4;">();</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">now</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// shows current date/time </span></div> </div> </div><br> <li>new Date(milliseconds)</li><br> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// Create a Date object with the time equal to number of milliseconds (1/1000 of a second) passed after the Jan 1st of 1970 UTC+0.</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">Jan01_1970</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Date</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">Jan01_1970</span><span style="color: #d4d4d4;">);</span> </div><br> <div><span style="color: #6a9955;">// now add 24 hours, get 02.01.1970 UTC+0</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">Jan02_1970</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Date</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">24</span><span style="color: #d4d4d4;"> * </span><span style="color: #b5cea8;">3600</span><span style="color: #d4d4d4;"> * </span><span style="color: #b5cea8;">1000</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">Jan02_1970</span><span style="color: #d4d4d4;">); </span></div> </div> </div><br> <li>new Date(datestring)</li><br> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">date</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Date</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"1982-04-21"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">date</span><span style="color: #d4d4d4;">);</span> </div> </div> </div><br> <li>new Date(year, month, date, hours, minutes, seconds, ms)</li><br> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Date</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">2011</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">));</span><span style="color: #6a9955;">// 1 Jan 2011, 00:00:00</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Date</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">2011</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">));</span><span style="color: #6a9955;">// the same, hours etc are 0 by default</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Date</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">2011</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">3</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">4</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">567</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 1.01.2011, 02:03:04.567</span> </div> </div> </div> </ul> </li> <li> <h3>Access date components</h3> <p>There are methods to access the year, month and so on from the Date object:</p> <ul class="son"> <li>getFullYear()</li> <li>getMonth()</li> <li>getDate()</li> <li>getHours()</li> <li>getMinutes()</li> <li>getSeconds()</li> <li> getMilliseconds()</li> <li>getDay()</li> <li>getTime()</li> </ul><br> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">date</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Date</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">2011</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">3</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">4</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">567</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">date</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">getFullYear</span><span style="color: #d4d4d4;">()); </span><span style="color: #6a9955;">// 2011</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">date</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">getMonth</span><span style="color: #d4d4d4;">()); </span><span style="color: #6a9955;">// 0</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">date</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">getDate</span><span style="color: #d4d4d4;">()); </span><span style="color: #6a9955;">// 1</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">date</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">getHours</span><span style="color: #d4d4d4;">()); </span><span style="color: #6a9955;">// 2</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">date</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">getMinutes</span><span style="color: #d4d4d4;">()); </span><span style="color: #6a9955;">// 3</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">date</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">getSeconds</span><span style="color: #d4d4d4;">()); </span><span style="color: #6a9955;">// 4</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">date</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">getMilliseconds</span><span style="color: #d4d4d4;">()); </span><span style="color: #6a9955;">// 567</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">date</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">getDay</span><span style="color: #d4d4d4;">()); </span><span style="color: #6a9955;">// 6</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">date</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">getTime</span><span style="color: #d4d4d4;">()); </span><span style="color: #6a9955;">// 1293840184567</span></div> </div> </div> </li> <li> <h3>Setting date components</h3> <p>The following methods allow to set date/time components:</p> <ul class="son"> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/setFullYear"><code>setFullYear(year, [month], [date])</code></a> </li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/setMonth"><code>setMonth(month, [date])</code></a> </li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/setDate"><code>setDate(date)</code></a> </li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/setHours"><code>setHours(hour, [min], [sec], [ms])</code></a> </li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/setMinutes"><code>setMinutes(min, [sec], [ms])</code></a> </li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/setSeconds"><code>setSeconds(sec, [ms])</code></a> </li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/setMilliseconds"><code>setMilliseconds(ms)</code></a> </li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/setTime"><code>setTime(milliseconds)</code></a> (sets the whole date by milliseconds since 01.01.1970 UTC)</li> </ul><br> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">date</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Date</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">2011</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">3</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">4</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">567</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">date</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">getHours</span><span style="color: #d4d4d4;">()); </span><span style="color: #6a9955;">// 2</span></div> <div><span style="color: #9cdcfe;">date</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">setHours</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">5</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// udpate hour of date object </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">date</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">getHours</span><span style="color: #d4d4d4;">()); &nbsp;</span><span style="color: #6a9955;">// 5 </span></div> </div> </div> </li> <li> <h3>Autocorrection</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// The autocorrection is a very handy feature of Date objects. We can set out-of-range values, and it will auto-adjust itself.</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">date</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Date</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">2013</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">32</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 32 Jan 2013 ?!?</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">date</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// ...is 1st Feb 2013!</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// That feature is often used to get the date after the given period of time. For instance, let’s get the date for “70 seconds after now”:</span></div> <div><span style="color: #9cdcfe;">date</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Date</span><span style="color: #d4d4d4;">();</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">date</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">date</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">setSeconds</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">date</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">getSeconds</span><span style="color: #d4d4d4;">() + </span><span style="color: #b5cea8;">60</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">date</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// shows the correct date </span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// We can also set zero or even negative values. For example: </span> </div> <div><span style="color: #9cdcfe;">date</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Date</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">2016</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 2 Jan 2016</span></div> <div><span style="color: #9cdcfe;">date</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">setDate</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// set day 1 of month</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">date</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">date</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">setDate</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// min day is 1, so the last day of the previous month is assumed</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">date</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 31 Dec 2015 f </span></div> </div> </div> </li> <li> <h3>Date to number, date diff</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// When a Date object is converted to number, it becomes the timestamp same as date.getTime():</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">date</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Date</span><span style="color: #d4d4d4;">();</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(+</span><span style="color: #9cdcfe;">date</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// the number of milliseconds, same as date.getTime()</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// The important side effect: dates can be subtracted, the result is their difference in ms.</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">start</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Date</span><span style="color: #d4d4d4;">(); </span><span style="color: #6a9955;">// start measuring time</span> </div> <div><span style="color: #6a9955;">// do the job</span></div> <div><span style="color: #c586c0;">for</span><span style="color: #d4d4d4;"> (</span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">i</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">; </span><span style="color: #9cdcfe;">i</span><span style="color: #d4d4d4;"> &lt; </span><span style="color: #b5cea8;">100000000</span><span style="color: #d4d4d4;">; </span><span style="color: #9cdcfe;">i</span><span style="color: #d4d4d4;">++) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">doSomething</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">i</span><span style="color: #d4d4d4;"> * </span><span style="color: #9cdcfe;">i</span><span style="color: #d4d4d4;"> * </span><span style="color: #9cdcfe;">i</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">end</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Date</span><span style="color: #d4d4d4;">(); </span><span style="color: #6a9955;">// end measuring time</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">`The loop took </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">end</span><span style="color: #d4d4d4;"> - </span><span style="color: #9cdcfe;">start</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;"> ms`</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// The loop took 60 ms</span></div> </div> </div> </li> <li> <h3>Date.now()</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">/*</span> </div> <div><span style="color: #6a9955;">if we only want to measure time, we don’t need the Date object. There’s a special method Date.now() that returns the current timestamp. </span></div> <div><span style="color: #6a9955;">It is semantically equivalent to new Date().getTime(), but it doesn’t create an intermediate Date object. So it’s faster and doesn’t put </span></div> <div><span style="color: #6a9955;">pressure on garbage collection. It is used mostly for convenience or when performance matters, like in games in JavaScript or other </span></div> <div><span style="color: #6a9955;">specialized applications.</span></div> <div><span style="color: #6a9955;">*/</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">start</span><span style="color: #d4d4d4;"> = </span><span style="color: #4ec9b0;">Date</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">now</span><span style="color: #d4d4d4;">(); </span><span style="color: #6a9955;">// milliseconds count from 1 Jan 1970</span></div> <div><span style="color: #6a9955;">// do the job</span></div> <div><span style="color: #c586c0;">for</span><span style="color: #d4d4d4;"> (</span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">i</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">; </span><span style="color: #9cdcfe;">i</span><span style="color: #d4d4d4;"> &lt; </span><span style="color: #b5cea8;">100000</span><span style="color: #d4d4d4;">; </span><span style="color: #9cdcfe;">i</span><span style="color: #d4d4d4;">++) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">doSomething</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">i</span><span style="color: #d4d4d4;"> * </span><span style="color: #9cdcfe;">i</span><span style="color: #d4d4d4;"> * </span><span style="color: #9cdcfe;">i</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">end</span><span style="color: #d4d4d4;"> = </span><span style="color: #4ec9b0;">Date</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">now</span><span style="color: #d4d4d4;">(); </span><span style="color: #6a9955;">// done </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">`The loop took </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">end</span><span style="color: #d4d4d4;"> - </span><span style="color: #9cdcfe;">start</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;"> ms`</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// subtract numbers, not dates</span></div> </div> </div> </li> <li> <h3>Date.parse from a string</h3> <p>The method Date.parse(str) can read a date from a string.</p> <p>The string format should be: YYYY-MM-DDTHH:mm:ss.sssZ, where: </p> <ul class="son"> <li><code>YYYY-MM-DD</code> – is the date: year-month-day.</li> <li>The character <code>"T"</code> is used as the delimiter.</li> <li><code>HH:mm:ss.sss</code> – is the time: hours, minutes, seconds and milliseconds.</li> <li>The optional <code>'Z'</code> part denotes the time zone in the format <code>+-hh:mm</code>. A single letter <code>Z</code> would mean UTC+0. </li> </ul><br> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">ms</span><span style="color: #d4d4d4;"> = </span><span style="color: #4ec9b0;">Date</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">parse</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'2012-01-26T13:51:50.417-07:00'</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">ms</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 1327611110417 &nbsp;(timestamp)</span></div> </div> </div> </li> </ul> </details> </li> <li> <details> <summary>JSON methods, toJSON</summary> <ul> <li> <h3>JSON methods, toJSON</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">/*Let’s say we have a complex object, and we’d like to convert it into</span></div> <div><span style="color: #6a9955;">a string, to send it over a network, or just to output it for logging purposes.</span></div> <div><span style="color: #6a9955;">Naturally, such a string should include all important properties.</span> </div> <div><span style="color: #6a9955;">We could implement the conversion like this:*/</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">age</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">30</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">toString</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">`{name: "</span><span style="color: #569cd6;">${this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">", age: </span><span style="color: #569cd6;">${this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">age</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">}`</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #dcdcaa;">alert</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// {name: "John", age: 30} </span> </div><br> <div><span style="color: #6a9955;">// but we have a better method which is &nbsp;JSON.stringify </span> </div> </div> </div> </li> <li> <h3>JSON.stringify</h3> <p>JavaScript provides methods:</p> <ul class="son"> <li><code>JSON.stringify</code> to convert objects into JSON.</li> <li><code>JSON.parse</code> to convert JSON back into an object.</li> </ul> <p>For instance, here we JSON.stringify a student:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">student</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">'John'</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">age</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">30</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">isAdmin</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">false</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">courses</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> [</span><span style="color: #ce9178;">'html'</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">'css'</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">'js'</span><span style="color: #d4d4d4;">],</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">spouse</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">null</span> </div> <div><span style="color: #d4d4d4;">};</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">json</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">JSON</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">stringify</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">student</span><span style="color: #d4d4d4;">);</span> </div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">typeof</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">json</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// we've got a string!</span></div> <br> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">json</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; </span><span style="color: #6a9955;">/* JSON-encoded object:</span> </div> <div><span style="color: #6a9955;">{</span> </div> <div><span style="color: #6a9955;">&nbsp; "name": "John",</span></div> <div><span style="color: #6a9955;">&nbsp; "age": 30,</span></div> <div><span style="color: #6a9955;">&nbsp; "isAdmin": false,</span></div> <div><span style="color: #6a9955;">&nbsp; "courses": ["html", "css", "js"],</span></div> <div><span style="color: #6a9955;">&nbsp; "spouse": null</span></div> <div><span style="color: #6a9955;">}</span> </div> <div><span style="color: #6a9955;">*/</span> </div> </div> </div> <p>JSON.stringify can be applied to primitives as well.</p> <p>JSON supports following data types:</p> <ul class="son"> <li>Objects <code>{ ... }</code></li> <li>Arrays <code>[ ... ]</code></li> <li>Primitives: <ul> <li>strings,</li> <li>numbers,</li> <li>boolean values <code>true/false</code>, </li> <li><code>null</code>.</li> </ul> </li> </ul> <p>For instance:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// a number in JSON is just a number</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">JSON</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">stringify</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">)) </span><span style="color: #6a9955;">// 1</span></div><br> <div><span style="color: #6a9955;">// a string in JSON is still a string, but double-quoted</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">JSON</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">stringify</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'test'</span><span style="color: #d4d4d4;">)) </span><span style="color: #6a9955;">// "test"</span></div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">JSON</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">stringify</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">true</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// true</span></div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">JSON</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">stringify</span><span style="color: #d4d4d4;">([</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">3</span><span style="color: #d4d4d4;">])); </span><span style="color: #6a9955;">// [1,2,3]</span></div> </div> </div> <p>JSON is data-only language-independent specification, so some JavaScript-specific object properties are skipped by JSON.stringify.</p> <p>Namely:</p> <ul class="son"> <li>Function properties (methods).</li> <li>Symbolic keys and values.</li> <li>Properties that store <code>undefined</code>.</li> </ul><br> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">() { </span><span style="color: #6a9955;">// ignored</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Hello"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; },</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">[</span><span style="color: #dcdcaa;">Symbol</span><span style="color: #9cdcfe;">(</span><span style="color: #ce9178;">"id"</span><span style="color: #9cdcfe;">)]:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">123</span><span style="color: #d4d4d4;">, </span><span style="color: #6a9955;">// ignored</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">something</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">undefined</span><span style="color: #d4d4d4;"> </span><span style="color: #6a9955;">// ignored</span></div> <div><span style="color: #d4d4d4;">};</span> </div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">JSON</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">stringify</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// {} (empty object)</span></div> </div> </div> <p>nested objects are supported and converted automatically.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">meetup</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">title</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"Conference"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">room</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">number</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">23</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">participants</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> [</span><span style="color: #ce9178;">"john"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"ann"</span><span style="color: #d4d4d4;">]</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">};</span> </div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">JSON</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">stringify</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">meetup</span><span style="color: #d4d4d4;">));</span> </div> <div><span style="color: #d4d4d4;">&nbsp; </span><span style="color: #6a9955;">/* The whole structure is stringified:</span></div> <div><span style="color: #6a9955;">{</span> </div> <div><span style="color: #6a9955;">&nbsp; "title":"Conference",</span> </div> <div><span style="color: #6a9955;">&nbsp; "room":{"number":23,"participants":["john","ann"]},</span> </div> <div><span style="color: #6a9955;">}</span> </div> <div><span style="color: #6a9955;">*/</span> </div> </div> </div> <p>important limitation: there must be no circular references. </p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">room</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">number</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">23</span> </div> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">meetup</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">title</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"Conference"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">participants</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> [</span><span style="color: #ce9178;">"john"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"ann"</span><span style="color: #d4d4d4;">]</span> </div> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #9cdcfe;">meetup</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">place</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">room</span><span style="color: #d4d4d4;">; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;">// meetup references room</span> </div> <div><span style="color: #9cdcfe;">room</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">occupiedBy</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">meetup</span><span style="color: #d4d4d4;">; </span><span style="color: #6a9955;">// room references meetup</span> </div> <div><span style="color: #9cdcfe;">JSON</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">stringify</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">meetup</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// Error: Converting circular structure to JSON</span></div> </div> </div> </li> <li> <h3>Excluding and transforming: replacer</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">//stringfy cyclic object result in error </span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">info</span><span style="color: #d4d4d4;"> = { </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"ali"</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">extra</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> { </span><span style="color: #9cdcfe;">tall</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">180</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">countery</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"egypt"</span><span style="color: #d4d4d4;"> } }</span></div> <div><span style="color: #9cdcfe;">info</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">self</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">info</span> </div> <div><span style="color: #c586c0;">try</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">JSON</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">stringify</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">info</span><span style="color: #d4d4d4;">)</span> </div> <div><span style="color: #d4d4d4;">} </span><span style="color: #c586c0;">catch</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">error</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">error</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">message</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// cyclic object value</span></div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// we can use replacer -Array of properties to encode or a mapping function function(key, value)- to solve this problem</span></div><br> <div><span style="color: #6a9955;">// replacer = Array</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">infoJson</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">JSON</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">stringify</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">info</span><span style="color: #d4d4d4;">, [</span><span style="color: #ce9178;">"name"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"extra"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"tall"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"countery"</span><span style="color: #d4d4d4;">])</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">infoJson</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// {"name":"ali","extra":{"tall":180,"countery":"egypt"}}</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br> <div><span style="color: #6a9955;">// replacer = function</span></div> <div><span style="color: #9cdcfe;">infoJson</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">JSON</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">stringify</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">info</span><span style="color: #d4d4d4;">, </span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">key</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;">) { </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">key</span><span style="color: #d4d4d4;"> == </span><span style="color: #ce9178;">"self"</span><span style="color: #d4d4d4;">) ? </span><span style="color: #569cd6;">undefined</span><span style="color: #d4d4d4;"> : </span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;"> })</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">infoJson</span><span style="color: #d4d4d4;">);</span> </div> </div> </div> </li> <li> <h3>Formatting: space</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// The third argument of JSON.stringify(value, replacer, space) is the number of spaces to use for pretty formatting.</span></div> <div><span style="color: #6a9955;">// Here space = 2 tells JavaScript to show nested objects on multiple lines, with indentation of 2 spaces inside an object:</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">age</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">25</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">roles</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">isAdmin</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">false</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">isEditor</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">true</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">JSON</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">stringify</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">, </span><span style="color: #569cd6;">null</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">));</span> </div> <div><span style="color: #6a9955;">/*</span> </div> <div><span style="color: #6a9955;">{</span> </div> <div><span style="color: #6a9955;">&nbsp; "name": "John",</span></div> <div><span style="color: #6a9955;">&nbsp; "age": 25,</span></div> <div><span style="color: #6a9955;">&nbsp; "roles": {</span></div> <div><span style="color: #6a9955;">&nbsp; &nbsp; "isAdmin": false,</span></div> <div><span style="color: #6a9955;">&nbsp; &nbsp; "isEditor": true</span></div> <div><span style="color: #6a9955;">&nbsp; }</span></div> <div><span style="color: #6a9955;">}</span> </div> <div><span style="color: #6a9955;">*/</span> </div> </div> </div> </li> <li> <h3>Custom “toJSON”</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// Like toString for string conversion, an object may provide method toJSON for to-JSON conversion. JSON.stringify automatically calls it if available.</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">meetup</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">title</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"Conference"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">date</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Date</span><span style="color: #d4d4d4;">(),</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">room</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> { </span><span style="color: #9cdcfe;">number</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">23</span><span style="color: #d4d4d4;"> }</span></div> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">JSON</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">stringify</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">meetup</span><span style="color: #d4d4d4;">, </span><span style="color: #569cd6;">null</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">));</span> </div> <div><span style="color: #6a9955;">// Here we can see that date &nbsp;became a string. That’s because all dates have a built-in toJSON method which returns such kind of string.</span></div> <div><span style="color: #6a9955;">/*</span> </div> <div><span style="color: #6a9955;">{</span> </div> <div><span style="color: #6a9955;">&nbsp; "title": "Conference",</span> </div> <div><span style="color: #6a9955;">&nbsp; "date": "2022-10-09T03:40:48.493Z",</span> </div> <div><span style="color: #6a9955;">&nbsp; "room": {</span></div> <div><span style="color: #6a9955;">&nbsp; &nbsp; "number": 23</span></div> <div><span style="color: #6a9955;">&nbsp; }</span></div> <div><span style="color: #6a9955;">}</span> </div> <div><span style="color: #6a9955;">*/</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// add a custom toJSON for our object</span></div> <div><span style="color: #9cdcfe;">meetup</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">number</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">23</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">toJSON</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">number</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">JSON</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">stringify</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">meetup</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 23</span></div> </div> </div> </li> <li> <h3>JSON.parse</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// To decode a JSON-string, we need another method named JSON.parse</span> </div> <div><span style="color: #6a9955;">/*</span> </div> <div><span style="color: #6a9955;">let value = JSON.parse(str, [reviver]); reviver is a function(key,value)</span></div> <div><span style="color: #6a9955;">*/</span> </div> <div><span style="color: #6a9955;">// stringified array</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">numbers</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"[0, 1, 2, 3]"</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #9cdcfe;">numbers</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">JSON</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">parse</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">numbers</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">numbers</span><span style="color: #d4d4d4;">[</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">]); </span><span style="color: #6a9955;">// 1</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// Or for nested objects:</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">userData</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">'{ "name": "John", "age": 35, "isAdmin": false, "friends": [0,1,2,3] }'</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">JSON</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">parse</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">userData</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// Using reviver </span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">'{"title":"Conference","date":"2017-11-30T12:00:00.000Z"}'</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">meetup</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">JSON</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">parse</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;">, </span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">key</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">key</span><span style="color: #d4d4d4;"> == </span><span style="color: #ce9178;">"date"</span><span style="color: #d4d4d4;">) ? </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Date</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"2017-11-30T12:00:00.000Z"</span><span style="color: #d4d4d4;">) : </span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">})</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">meetup</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">date</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">getFullYear</span><span style="color: #d4d4d4;">()); </span><span style="color: #6a9955;">// 2017 </span></div> </div> </div> </li> </ul> <p></p> </details> </li> </ul> </details> <details class="dad"> <summary>Advanced working with functions</summary> <ul> <li> <details> <summary>Recursion and stack</summary> <ul> <li> <h3>Two ways of thinking</h3> <p>we can implement the pow function in 2 ways</p> <ol class="son"> <li>Iterative thinking: the for loop: <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">pow</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">x</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">n</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">result</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">; &nbsp;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #c586c0;">for</span><span style="color: #d4d4d4;"> (</span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">i</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">; </span><span style="color: #9cdcfe;">i</span><span style="color: #d4d4d4;"> &lt; </span><span style="color: #9cdcfe;">n</span><span style="color: #d4d4d4;">; </span><span style="color: #9cdcfe;">i</span><span style="color: #d4d4d4;">++) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">result</span><span style="color: #d4d4d4;"> *= </span><span style="color: #9cdcfe;">x</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">result</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">( </span><span style="color: #dcdcaa;">pow</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">3</span><span style="color: #d4d4d4;">) ); </span><span style="color: #6a9955;">// 8</span></div> </div> </div> </li><br> <li>Recursive thinking: simplify the task and call self: <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">pow</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">x</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">n</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">n</span><span style="color: #d4d4d4;"> == </span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">x</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; } </span><span style="color: #c586c0;">else</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">x</span><span style="color: #d4d4d4;"> * </span><span style="color: #dcdcaa;">pow</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">x</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">n</span><span style="color: #d4d4d4;"> - </span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span> </div> <div><span style="color: #d4d4d4;">&nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">( </span><span style="color: #dcdcaa;">pow</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">3</span><span style="color: #d4d4d4;">) ); </span><span style="color: #6a9955;">// 8</span></div> </div> </div><br> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">pow</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">x</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">n</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">n</span><span style="color: #d4d4d4;"> == </span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">) ? </span><span style="color: #9cdcfe;">x</span><span style="color: #d4d4d4;"> : (</span><span style="color: #9cdcfe;">x</span><span style="color: #d4d4d4;"> * </span><span style="color: #dcdcaa;">pow</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">x</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">n</span><span style="color: #d4d4d4;"> - </span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">));</span> </div> <div><span style="color: #d4d4d4;">&nbsp; }</span></div> </div> </div> </li> </ol> </li> <li> <h3>The execution context and stack</h3> <p>When a function makes a recursive call, it:</p> <ol class="son"> <li>Pauses the current function and stores its execution context in a stack.</li> <li>Executes the nested function call.</li> <li>Retrieves the old execution context from the stack once the nested function call has completed. </li> <li>Resumes the outer function from where it left off. </li> </ol> <p>Let’s see what happens during the pow(2, 3) call.</p> <ol class="son"> <li>The <code>pow()</code> function is called with <code>x</code> equal to 2 and <code>n</code> equal to 3. Its execution context is stored in the execution context stack. </li> <li>It makes recursive calls to itself with decreasing values of <code>n</code> until <code>n</code> is equal to 1. The execution contexts of the nested function calls are stored in the stack.</li> <li>It returns <code>x</code> when <code>n</code> is equal to 1.</li> <li>The return values are multiplied together to get the final result. The old execution contexts are retrieved from the stack and the outer function is resumed from where it left off. The final result of the <code>pow()</code> function is 8. </li> </ol> <h3>Recursive traversals</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">preOrderTraversal</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">node</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">node</span><span style="color: #d4d4d4;"> == </span><span style="color: #569cd6;">null</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">node</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">preOrderTraversal</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">node</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">left</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">preOrderTraversal</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">node</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">right</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">} &nbsp;</span></div> <div><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #4fc1ff;">tree</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">value</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">left</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">value</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">left</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">value</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">4</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">left</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">null</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">right</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">null</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; },</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">right</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">value</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">5</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">left</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">null</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">right</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">null</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; },</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">right</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">value</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">3</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">left</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">value</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">6</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">left</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">null</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">right</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">null</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; },</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">right</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">value</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">7</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">left</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">null</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">right</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">null</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; };</span></div> <div><span style="color: #d4d4d4;">&nbsp; </span><span style="color: #dcdcaa;">preOrderTraversal</span><span style="color: #d4d4d4;">(</span><span style="color: #4fc1ff;">tree</span><span style="color: #d4d4d4;">);</span> </div> </div> </div> <div> <p>The <code>preOrderTraversal()</code> function performs a pre-order traversal of a binary tree as follows:</p> <ol class="son"> <li>It takes a node as an argument and checks if it is <code>null</code>. If it is, the function returns without doing anything. </li> <li>It outputs the value of the node to the console.</li> <li>It calls itself with the left child of the node as an argument.</li> <li>It calls itself with the right child of the node as an argument.</li> <li>The function returns after the left and right sub-trees have been traversed. </li> </ol> </div> </li> <li></li> <li></li> <li></li> </ul> </details> </li> <li> <details> <summary>Rest parameters and spread syntax</summary> <ul> <li> <h3>Rest parameters ...</h3> <p>The rest of the parameters can be included in the function definition by using three dots ... followed by the name of the array that will contain them. The dots literally mean “gather the remaining parameters into an array”.For instance, to gather all arguments into array args:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">sumAll</span><span style="color: #d4d4d4;">(...</span><span style="color: #9cdcfe;">args</span><span style="color: #d4d4d4;">) { </span><span style="color: #6a9955;">// args is the name for the array</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">sum</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">;</span> </div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #c586c0;">for</span><span style="color: #d4d4d4;"> (</span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">arg</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">of</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">args</span><span style="color: #d4d4d4;">) </span><span style="color: #9cdcfe;">sum</span><span style="color: #d4d4d4;"> += </span><span style="color: #9cdcfe;">arg</span><span style="color: #d4d4d4;">;</span> </div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">sum</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">sumAll</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 1</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">sumAll</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 3</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">sumAll</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">3</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 6</span></div> </div> </div> <p>Here the first two arguments go into variables and the rest go into titles array:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">showName</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">firstName</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">lastName</span><span style="color: #d4d4d4;">, ...</span><span style="color: #9cdcfe;">titles</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">firstName</span><span style="color: #d4d4d4;"> + </span><span style="color: #ce9178;">' '</span><span style="color: #d4d4d4;"> + </span><span style="color: #9cdcfe;">lastName</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// Julius Caesar</span> </div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// the rest go into titles array</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// i.e. titles = ["Consul", "Imperator"]</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">titles</span><span style="color: #d4d4d4;">[</span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">]); </span><span style="color: #6a9955;">// Consul</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">titles</span><span style="color: #d4d4d4;">[</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">]); </span><span style="color: #6a9955;">// Imperator</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">titles</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">length</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 2</span></div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #dcdcaa;">showName</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Julius"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Caesar"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Consul"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Imperator"</span><span style="color: #d4d4d4;">); </span></div> </div> </div> <p>The rest parameters must be at the end</p> <h3>The “arguments” variable</h3> <p>There is also a special array-like object named arguments that contains all arguments by their index.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">showName</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">( </span><span style="color: #569cd6;">arguments</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">length</span><span style="color: #d4d4d4;"> );</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">( </span><span style="color: #569cd6;">arguments</span><span style="color: #d4d4d4;">[</span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">] );</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">( </span><span style="color: #569cd6;">arguments</span><span style="color: #d4d4d4;">[</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">] );</span></div> <div><span style="color: #d4d4d4;">&nbsp; </span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// it's iterable</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// for(let arg of arguments) alert(arg);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; </span></div> <div><span style="color: #d4d4d4;">&nbsp; </span><span style="color: #6a9955;">// shows: 2, Julius, Caesar</span></div> <div><span style="color: #d4d4d4;">&nbsp; </span><span style="color: #dcdcaa;">showName</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Julius"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Caesar"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; </span></div> <div><span style="color: #d4d4d4;">&nbsp; </span><span style="color: #6a9955;">// shows: 1, Ilya, undefined (no second argument)</span></div> <div><span style="color: #d4d4d4;">&nbsp; </span><span style="color: #dcdcaa;">showName</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Ilya"</span><span style="color: #d4d4d4;">);</span> </div> </div> </div> <p>it's for legacy code , rest parameters are preferred.</p> <p>Arrow functions do not have "arguments"</p> </li> <li> <h3>Spread syntax</h3> <p>The spread syntax in JavaScript allows you to expand an iterable (such as an array) into individual elements. It is represented by three dots (...).</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">//In this example, the copy array will contain the same elements as the numbers array</span></div> <div><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #4fc1ff;">numbers</span><span style="color: #d4d4d4;"> = [</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">3</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">4</span><span style="color: #d4d4d4;">];</span> </div> <div><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #4fc1ff;">copy</span><span style="color: #d4d4d4;"> = [...</span><span style="color: #4fc1ff;">numbers</span><span style="color: #d4d4d4;">];</span> </div><br> <div><span style="color: #6a9955;">// You can also use the spread syntax to merge multiple arrays into a single array:</span></div> <div><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #4fc1ff;">a</span><span style="color: #d4d4d4;"> = [</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">3</span><span style="color: #d4d4d4;">];</span> </div> <div><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #4fc1ff;">b</span><span style="color: #d4d4d4;"> = [</span><span style="color: #b5cea8;">4</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">5</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">6</span><span style="color: #d4d4d4;">];</span> </div> <div><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #4fc1ff;">c</span><span style="color: #d4d4d4;"> = [...</span><span style="color: #4fc1ff;">a</span><span style="color: #d4d4d4;">, ...</span><span style="color: #4fc1ff;">b</span><span style="color: #d4d4d4;">];</span> </div><br> <div><span style="color: #6a9955;">// The spread syntax can also be used to expand an iterable in function calls:</span></div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">sum</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">x</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">y</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">z</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">x</span><span style="color: #d4d4d4;"> + </span><span style="color: #9cdcfe;">y</span><span style="color: #d4d4d4;"> + </span><span style="color: #9cdcfe;">z</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; </span><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #4fc1ff;">numberss</span><span style="color: #d4d4d4;"> = [</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">3</span><span style="color: #d4d4d4;">];</span> </div> <div><span style="color: #d4d4d4;">&nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">sum</span><span style="color: #d4d4d4;">(...</span><span style="color: #4fc1ff;">numbers</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 6</span></div><br><br> <div><span style="color: #6a9955;">// Split the word into an array of individual characters.</span></div> <div><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #4fc1ff;">word</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">'hello'</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #4fc1ff;">chars</span><span style="color: #d4d4d4;"> = [...</span><span style="color: #4fc1ff;">word</span><span style="color: #d4d4d4;">];</span> </div><br> <div><span style="color: #6a9955;">// Output the resulting array.</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #4fc1ff;">chars</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// ['h', 'e', 'l', 'l', 'o']</span> </div><br> <div><span style="color: #6a9955;">// Define a function that takes individual letters as arguments.</span> </div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">printLetters</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">a</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">b</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">c</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">d</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">e</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; </span><span style="color: #6a9955;">// Output the letters to the console.</span></div> <div><span style="color: #d4d4d4;">&nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">a</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">b</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">c</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">d</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">e</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #6a9955;">// Call the function with the spread syntax to expand the word into separate arguments.</span></div> <div><span style="color: #dcdcaa;">printLetters</span><span style="color: #d4d4d4;">(...</span><span style="color: #4fc1ff;">word</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// h e l l o</span></div> </div> </div> <p>with objects</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// Define an object with some properties.</span></div> <div><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #4fc1ff;">obj</span><span style="color: #d4d4d4;"> = { </span><span style="color: #9cdcfe;">x</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">y</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">z</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">3</span><span style="color: #d4d4d4;"> };</span></div><br> <div><span style="color: #6a9955;">// Use the spread syntax to create a copy of the object.</span></div> <div><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #4fc1ff;">copy</span><span style="color: #d4d4d4;"> = { ...</span><span style="color: #4fc1ff;">obj</span><span style="color: #d4d4d4;"> };</span></div><br> <div><span style="color: #6a9955;">// Output the copy to the console.</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #4fc1ff;">copy</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// { x: 1, y: 2, z: 3 }</span> </div><br> <div><span style="color: #6a9955;">// Define two more objects with overlapping properties.</span></div> <div><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #4fc1ff;">a</span><span style="color: #d4d4d4;"> = { </span><span style="color: #9cdcfe;">x</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">y</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;"> };</span></div> <div><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #4fc1ff;">b</span><span style="color: #d4d4d4;"> = { </span><span style="color: #9cdcfe;">y</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">3</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">z</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">4</span><span style="color: #d4d4d4;"> };</span></div><br> <div><span style="color: #6a9955;">// Use the spread syntax to merge the two objects into a single object.</span></div> <div><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #4fc1ff;">c</span><span style="color: #d4d4d4;"> = { ...</span><span style="color: #4fc1ff;">a</span><span style="color: #d4d4d4;">, ...</span><span style="color: #4fc1ff;">b</span><span style="color: #d4d4d4;"> };</span></div><br> <div><span style="color: #6a9955;">// Output the merged object to the console.</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #4fc1ff;">c</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// { x: 1, y: 3, z: 4 }</span> </div> </div> </div> </li> </ul> </details> </li> <li> <details> <summary>Variable scope, closure</summary> <ul> <li> <h3>Variable scope, closure</h3> <ol class="son"> <li>JavaScript is a language that places a lot of emphasis on functions.</li> <li>Functions can be created at any time and passed as arguments to other functions.</li> <li>Functions can access variables that are outside of them (known as "outer" variables).</li> <li>If an outer variable changes after a function is created, the function will still have access to the original value.</li> <li>When a function is passed as an argument and called from another location, it will have access to the outer variables in that new location.</li> </ol> <h3>Code blocks</h3> <table style="width: 100%;"> <thead> <tr> <th>Keyword</th> <th>Scope</th> <th>Reassignable?</th> </tr> </thead> <tbody> <tr> <td><code>var</code></td> <td>Function</td> <td>Yes</td> </tr> <tr> <td><code>let</code></td> <td>Block</td> <td>Yes</td> </tr> <tr> <td><code>const</code></td> <td>Block</td> <td>No</td> </tr> </tbody> </table><br> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// Variables declared with the "let" keyword are block-scoped, which means that they are only visible within the block in which they are declared.</span></div> <div><span style="color: #d4d4d4;">{</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">message</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"Hello"</span><span style="color: #d4d4d4;">; &nbsp;</span><span style="color: #6a9955;">// Declare a block-scoped variable "message" with the value "Hello"</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">alert</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">message</span><span style="color: #d4d4d4;">); &nbsp;</span><span style="color: #6a9955;">// Output: "Hello"</span></div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #dcdcaa;">alert</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">message</span><span style="color: #d4d4d4;">); &nbsp;</span><span style="color: #6a9955;">// This line will throw an error because the "message" variable is not defined outside of the block</span></div><br> <div><span style="color: #6a9955;">// We can use blocks to isolate pieces of code and prevent variables from leaking into the global scope or into other blocks</span></div> <div><span style="color: #d4d4d4;">{</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">message</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"Hello"</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">alert</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">message</span><span style="color: #d4d4d4;">); &nbsp;</span><span style="color: #6a9955;">// Output: "Hello"</span></div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #d4d4d4;">{</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">message</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"Goodbye"</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">alert</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">message</span><span style="color: #d4d4d4;">); &nbsp;</span><span style="color: #6a9955;">// Output: "Goodbye"</span></div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #6a9955;">// Without separate blocks, we would get an error if we tried to declare a variable with the same name as an existing variable</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">message</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"Hello"</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #dcdcaa;">alert</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">message</span><span style="color: #d4d4d4;">); &nbsp;</span><span style="color: #6a9955;">// Output: "Hello"</span></div><br> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">message</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"Goodbye"</span><span style="color: #d4d4d4;">; &nbsp;</span><span style="color: #6a9955;">// This line will throw an error because the "message" variable has already been declared</span> </div> <div><span style="color: #dcdcaa;">alert</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">message</span><span style="color: #d4d4d4;">);</span> </div><br> <div><span style="color: #6a9955;">// Variables declared within a "for" loop or an "if" statement are also only visible within the block of that loop or statement</span></div> <div><span style="color: #c586c0;">if</span><span style="color: #d4d4d4;"> (</span><span style="color: #569cd6;">true</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">phrase</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"Hello!"</span><span style="color: #d4d4d4;">; &nbsp;</span><span style="color: #6a9955;">// Declare a block-scoped variable "phrase" with the value "Hello!"</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">alert</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">phrase</span><span style="color: #d4d4d4;">); &nbsp;</span><span style="color: #6a9955;">// Output: "Hello!"</span></div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #dcdcaa;">alert</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">phrase</span><span style="color: #d4d4d4;">); &nbsp;</span><span style="color: #6a9955;">// This line will throw an error because the "phrase" variable is not defined outside of the block</span></div><br> <div><span style="color: #c586c0;">for</span><span style="color: #d4d4d4;"> (</span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">i</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">; </span><span style="color: #9cdcfe;">i</span><span style="color: #d4d4d4;"> &lt; </span><span style="color: #b5cea8;">3</span><span style="color: #d4d4d4;">; </span><span style="color: #9cdcfe;">i</span><span style="color: #d4d4d4;">++) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// The "i" variable is only visible within this "for" loop</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">alert</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">i</span><span style="color: #d4d4d4;">); &nbsp;</span><span style="color: #6a9955;">// Output: 0, 1, 2</span></div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #dcdcaa;">alert</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">i</span><span style="color: #d4d4d4;">); &nbsp;</span><span style="color: #6a9955;">// This line will throw an error because the "i" variable is not defined outside of the loop</span></div> </div> </div> </li> <li> <h3>Nested functions</h3><br> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// This is the outer function "sayHiBye"</span></div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">sayHiBye</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">firstName</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">lastName</span><span style="color: #d4d4d4;">) {</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// This is the nested function "getFullName"</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">getFullName</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;">// The nested function has access to the variables declared in the outer function</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">firstName</span><span style="color: #d4d4d4;"> + </span><span style="color: #ce9178;">" "</span><span style="color: #d4d4d4;"> + </span><span style="color: #9cdcfe;">lastName</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// We can use the nested function to return the full name</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">alert</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Hello, "</span><span style="color: #d4d4d4;"> + </span><span style="color: #dcdcaa;">getFullName</span><span style="color: #d4d4d4;">());</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">alert</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Bye, "</span><span style="color: #d4d4d4;"> + </span><span style="color: #dcdcaa;">getFullName</span><span style="color: #d4d4d4;">());</span> </div><br> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #6a9955;">// We can call the outer function to run the nested function</span></div> <div><span style="color: #dcdcaa;">sayHiBye</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"Doe"</span><span style="color: #d4d4d4;">); &nbsp;</span><span style="color: #6a9955;">// Output: "Hello, John Doe" and "Bye, John Doe"</span></div> </div> </div> </li> <li> <h3>Lexical Environment</h3> <a href="https://javascript.info/closure#lexical-environment">click here</a> </li> <li> <h3>Closure</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">outer</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">x</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">;</span> </div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">inner</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">x</span><span style="color: #d4d4d4;">); &nbsp;</span><span style="color: #6a9955;">// Output: 10</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">inner</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">closure</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">outer</span><span style="color: #d4d4d4;">();</span> </div> <div><span style="color: #dcdcaa;">closure</span><span style="color: #d4d4d4;">(); &nbsp;</span></div> </div> </div> <p>in this code, the outer function declares a variable x with the let keyword and assigns it a value of 10. It then defines an inner function called inner that logs the value of x. Finally, it returns the inner function. When the outer function is called, it creates a new lexical environment and associates it with the inner function using the [[Environment]] property. This lexical environment contains the identifier-variable mapping for the x variable, which has a value of 10. When the closure function is called, it uses the [[Environment]] property to access the lexical environment associated with the inner function and retrieves the value of the x variable. Because the x variable has a value of 10, the closure function logs the value 10. I hope this helps to clarify the role of the [[Environment]] property in JavaScript! Let me know if you have any other questions.</p> </li> <li> <p>The [[Environment]] property is a hidden internal property of functions in JavaScript that references the lexical environment in which the function was created. It is used by closures to remember and access the outer variables that they need to close over. Every time you create a function in JavaScript, the JavaScript engine creates a new lexical environment and associates it with the function using the [[Environment]] property. This lexical environment contains the identifier-variable mappings for the code that the function executes.</p> </li> <li> <h3>Garbage collection</h3> <a href="https://javascript.info/closure#garbage-collection"> click here</a> </li> </ul><br> </details> </li> <li> <details> <summary>the old "var"</summary> <ul> <li> <h3>“var” has no block scope</h3> <p>Variables, declared with var, are either function-scoped or global-scoped. They are visible through blocks.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #c586c0;">if</span><span style="color: #d4d4d4;"> (</span><span style="color: #569cd6;">true</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">var</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">test</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">true</span><span style="color: #d4d4d4;">; </span><span style="color: #6a9955;">// use "var" instead of "let"</span></div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">test</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// true, the variable lives after if </span></div> </div> </div> <p>The same thing for loops: var cannot be block- or loop-local: </p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #c586c0;">for</span><span style="color: #d4d4d4;"> (</span><span style="color: #569cd6;">var</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">i</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">; </span><span style="color: #9cdcfe;">i</span><span style="color: #d4d4d4;"> &lt; </span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">; </span><span style="color: #9cdcfe;">i</span><span style="color: #d4d4d4;">++) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">var</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">one</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// ...</span></div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">i</span><span style="color: #d4d4d4;">); &nbsp; </span><span style="color: #6a9955;">// 10, "i" is visible after loop, it's a global variable</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">one</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 1, "one" is visible after loop, it's a global variable</span> </div> </div> </div> <p>If a code block is inside a function, then var becomes a function-level variable:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #d4d4d4;"> (</span><span style="color: #569cd6;">true</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">var</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">phrase</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"Hello"</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">phrase</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// works</span></div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">();</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">phrase</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// ReferenceError: phrase is not defined</span></div> </div> </div> </li> <li> <h3>“var” tolerates redeclarations</h3> <p>With var, we can redeclare a variable any number of times. If we use var with an already-declared variable, it’s just ignored:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">var</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"Pete"</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #569cd6;">var</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;">; </span><span style="color: #6a9955;">// this "var" does nothing (already declared)</span></div> <div><span style="color: #6a9955;">// ...it doesn't trigger an error</span> </div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// John </span></div> </div> </div> </li> <li> <h3>“var” variables can be declared below their use</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">phrase</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"Hello"</span><span style="color: #d4d4d4;">;</span> </div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">phrase</span><span style="color: #d4d4d4;">);</span> </div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">var</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">phrase</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">();</span> </div> </div> </div> <p>Declarations are hoisted, but assignments are not.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">phrase</span><span style="color: #d4d4d4;">);</span> </div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">var</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">phrase</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"Hello"</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">();</span> </div> </div> </div> </li> <li> <h3>IIFE:“immediately-invoked function expressions”</h3> </li> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// Ways to create IIFE</span></div><br> <div><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> () {</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Parentheses around the function"</span><span style="color: #d4d4d4;">);</span></div> <div><span style="color: #d4d4d4;">})();</span></div> <br> <div><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> () {</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Parentheses around the whole thing"</span><span style="color: #d4d4d4;">);</span></div> <div><span style="color: #d4d4d4;">}());</span></div> <br> <div><span style="color: #d4d4d4;">!</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> () {</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Bitwise NOT operator starts the expression"</span><span style="color: #d4d4d4;">);</span></div> <div><span style="color: #d4d4d4;">}();</span></div><br> <div><span style="color: #d4d4d4;">+</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> () {</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Unary plus starts the expression"</span><span style="color: #d4d4d4;">);</span></div> <div><span style="color: #d4d4d4;">}();</span></div> </div> </div> <li></li> </ul> </details> </li> <li> <details> <summary>Global object</summary> <ul> <li> <h3>global object</h3> <ul class="son"> <li> The global object provides variables and functions that are available anywhere in the environment.</li> <li>In a browser, the global object is called <code>window</code>. In Node.js, it is called <code>global</code>. </li> <li>The standardized name for the global object is <code>globalThis</code>, which is supported in all major browsers. </li> <li>It is recommended to use <code>globalThis</code> instead of <code>window</code> in scripts that may run in other environments. </li> </ul> <p>All properties of the global object can be accessed directly </p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Hello"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #6a9955;">// is the same as</span></div> <div><span style="color: #9cdcfe;">window</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Hello"</span><span style="color: #d4d4d4;">);</span> </div> </div> </div> <p>In a browser, global functions and variables declared with var (not let/const!) become the property of the global object:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">var</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">gVar</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">5</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">window</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">gVar</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 5 (became a property of the global object)</span></div> </div> </div> </li> <li> <h3>function declaration</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// This function declaration creates a global variable "gFunc"</span> </div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">gFunc</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// Function code goes here</span> </div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">window</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">gFunc</span><span style="color: #d4d4d4;">); &nbsp;</span><span style="color: #6a9955;">// Output: function gFunc() { ... }</span></div> <div><span style="color: #6a9955;">// Declare a variable with the "let" keyword</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">gLet</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">5</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">window</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">gLet</span><span style="color: #d4d4d4;">); &nbsp;</span><span style="color: #6a9955;">// Output: undefined (does not become a property of the global object) &nbsp;</span></div> </div> </div> <p>In this example, the function declaration function gFunc() { ... } creates a global variable gFunc, which becomes a property of the global object (e.g. window.gFunc). On the other hand, the let declaration let gLet = 5 does not create a global variable. Instead, it is only accessible within the block in which it is defined. This can be seen in the second console.log statement, which logs undefined to the console because gLet is not a property of the global object.</p> </li> <li> <h3>Using for polyfills</h3> <p>We use the global object to test for support of modern language features.</p> <p>For instance, test if a built-in Promise object exists (it doesn’t in really old browsers):</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #c586c0;">if</span><span style="color: #d4d4d4;"> (!</span><span style="color: #9cdcfe;">window</span><span style="color: #d4d4d4;">.</span><span style="color: #4ec9b0;">Promise</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Your browser is really old!"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">}</span> </div> </div> </div> <p>If there’s none (say, we’re in an old browser), we can create “polyfills”: add functions that are not supported by the environment, but exist in the modern standard.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #c586c0;">if</span><span style="color: #d4d4d4;"> (!</span><span style="color: #9cdcfe;">window</span><span style="color: #d4d4d4;">.</span><span style="color: #4ec9b0;">Promise</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">window</span><span style="color: #d4d4d4;">.</span><span style="color: #4ec9b0;">Promise</span><span style="color: #d4d4d4;"> = ... </span><span style="color: #6a9955;">// custom implementation of the modern language feature</span> </div> <div><span style="color: #d4d4d4;">}</span> </div> </div> </div> </li> </ul> </details> </li> <li> <details> <summary>Function object, NFE</summary> <ul> <li> <h3>Function object, NFE</h3> <p>In JavaScript, functions are objects.</p> <p>A good way to imagine functions is as callable “action objects”. We can not only call them, but also treat them as objects: add/remove properties, pass by reference etc.</p> </li> <li> <h3>The “name” property</h3> <p>Function objects contain some useable properties.For instance, a function’s name is accessible as the “name” property:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">() {</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Hi"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">.</span><span style="color: #4fc1ff;">name</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// sayHi </span> </div> </div> </div> <p>What’s kind of funny, the name-assigning logic is smart. It also assigns the correct name to a function even if it’s created without one, and then immediately assigned:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> () {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Hi"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">.</span><span style="color: #4fc1ff;">name</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// sayHi (there's a name!)</span> </div> </div> </div> <p>Object methods have names too:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = {</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;">// ...</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; },</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">sayBye</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> () {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;">// ...</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div><br> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">.</span><span style="color: #4fc1ff;">name</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// sayHi</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">sayBye</span><span style="color: #d4d4d4;">.</span><span style="color: #4fc1ff;">name</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// sayBye</span></div> </div> </div> <p>There are cases when there’s no way to figure out the right name. In that case, the name property is empty, like here:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// function created inside array</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;"> = [</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> () { }];</span></div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">[</span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">].</span><span style="color: #4fc1ff;">name</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// &lt;empty string&gt;</span> </div> <div><span style="color: #6a9955;">// the engine has no way to set up the right name, so there is none</span> </div> </div> </div> </li> <li> <h3>The “length” property</h3> <p>There is another built-in property “length” that returns the number of function parameters, for instance:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">f1</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">a</span><span style="color: #d4d4d4;">) { }</span></div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">f2</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">a</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">b</span><span style="color: #d4d4d4;">) { }</span></div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">many</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">a</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">b</span><span style="color: #d4d4d4;">, ...</span><span style="color: #9cdcfe;">more</span><span style="color: #d4d4d4;">) { }</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">f1</span><span style="color: #d4d4d4;">.</span><span style="color: #4fc1ff;">length</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 1</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">f2</span><span style="color: #d4d4d4;">.</span><span style="color: #4fc1ff;">length</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 2</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">many</span><span style="color: #d4d4d4;">.</span><span style="color: #4fc1ff;">length</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 2</span></div> </div> </div> <p>we can use the length as follow</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">ask</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">question</span><span style="color: #d4d4d4;">, ...</span><span style="color: #9cdcfe;">handlers</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// Prompt the user with the specified question and store the result in a variable</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">isYes</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">confirm</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">question</span><span style="color: #d4d4d4;">);</span> </div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// Iterate through each handler function in the "handlers" array</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #c586c0;">for</span><span style="color: #d4d4d4;"> (</span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">handler</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">of</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">handlers</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;">// Check if the current handler function has a length of 0 (meaning it takes no arguments)</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">handler</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">length</span><span style="color: #d4d4d4;"> == </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;">// If the handler function takes no arguments, call it if the user answered "yes" to the question</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">isYes</span><span style="color: #d4d4d4;">) </span><span style="color: #dcdcaa;">handler</span><span style="color: #d4d4d4;">();</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; } </span><span style="color: #c586c0;">else</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;">// If the handler function takes at least one argument, call it and pass in the value of "isYes" as an argument</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #dcdcaa;">handler</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">isYes</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div><br> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #6a9955;">// Call the "ask" function with two handler functions as arguments</span> </div> <div><span style="color: #6a9955;">// For a positive answer, both handler functions will be called</span> </div> <div><span style="color: #6a9955;">// For a negative answer, only the second handler function will be called</span></div> <div><span style="color: #dcdcaa;">ask</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Question?"</span><span style="color: #d4d4d4;">, () </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'You said yes'</span><span style="color: #d4d4d4;">), </span><span style="color: #9cdcfe;">result</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">result</span><span style="color: #d4d4d4;">)); &nbsp;</span></div> </div> </div> </li> <li> <h3>Custom properties</h3> <p>We can also add properties of our own.</p> <p>Here we add the counter property to track the total calls count:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Hi"</span><span style="color: #d4d4d4;">);</span> </div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// let's count how many times we run</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">counter</span><span style="color: #d4d4d4;">++;</span> </div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">counter</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">; </span><span style="color: #6a9955;">// initial value</span></div><br> <div><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">(); </span><span style="color: #6a9955;">// Hi</span></div> <div><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">(); </span><span style="color: #6a9955;">// Hi</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">`Called </span><span style="color: #569cd6;">${</span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">counter</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;"> times`</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// Called 2 times </span></div> </div> </div> <p>Function properties can replace closures sometimes. For instance, we can rewrite the counter function example from the chapter Variable scope, closure to use a function property:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">makeCounter</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// instead of:</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// let count = 0</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">counter</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">counter</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">count</span><span style="color: #d4d4d4;">++;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; };</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">counter</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">count</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">;</span> </div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">counter</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">counter</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">makeCounter</span><span style="color: #d4d4d4;">();</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">counter</span><span style="color: #d4d4d4;">()); </span><span style="color: #6a9955;">// 0</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">counter</span><span style="color: #d4d4d4;">()); </span><span style="color: #6a9955;">// 1</span></div> </div> </div> </li> <li> <h3>Named Function Expression</h3> <p>Named Function Expression, or NFE, is a term for Function Expressions that have a name.</p> <p>For instance, let’s take an ordinary Function Expression:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">who</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">`Hello, </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">who</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">`</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">};</span> </div> </div> </div> <p>And add a name to it:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">func</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">who</span><span style="color: #d4d4d4;">) { </span><span style="color: #6a9955;">// the name func</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">`Hello, </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">who</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">`</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">};</span> </div> </div> </div> <p>There are two special things about the name func, that are the reasons for it:</p> <ol class="son"> <li>It allows the function to reference itself internally.</li> <li>It is not visible outside of the function.</li> </ol> <p>notice the follwing :</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">func</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">who</span><span style="color: #d4d4d4;">) { &nbsp;</span><span style="color: #6a9955;">// use a named function expression (func) to give the function a name</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">who</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">`Hello, </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">who</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">`</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; } </span><span style="color: #c586c0;">else</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #dcdcaa;">func</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Guest"</span><span style="color: #d4d4d4;">); &nbsp;</span><span style="color: #6a9955;">// use the function's name (func) to call it</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">};</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">welcome</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">null</span><span style="color: #d4d4d4;">;</span> </div><br> <div><span style="color: #dcdcaa;">welcome</span><span style="color: #d4d4d4;">(); &nbsp;</span><span style="color: #6a9955;">// "Hello, Guest"</span></div> </div> </div> <p>in this code, we use a named function expression (func) to give the function a name. This allows us to reference the function even if its value has been reassigned. Inside the body of the function, we use the function's name (func) to call it. This allows the code to run correctly even after the value of sayHi is reassigned to null.</p> </li> </ul> </details> </li> <li> <details> <summary>The "new Function" syntax</summary> <ul> <li> <h3>The "new Function" syntax</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// let func = new Function ([arg1, arg2, ...argN], functionBody)</span> </div><br> <div><span style="color: #6a9955;">// The function is created with the arguments arg1...argN and the given functionBody.</span></div> <br> <div><span style="color: #6a9955;">// It’s easier to understand by looking at an example. Here’s a function with two arguments:</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">sum</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Function</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'a'</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">'b'</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">'return a + b'</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">sum</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 3 </span></div><br><br> <div><span style="color: #6a9955;">// And here there’s a function without arguments, with only the function body:</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">sayHi</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Function</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'alert("Hello")'</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">(); </span><span style="color: #6a9955;">// Hello</span></div> </div> </div> <p>The major difference from other ways we’ve seen is that the function is created literally from a string, that is passed at run time</p> <p>All previous declarations required us, programmers, to write the function code in the script. But new Function allows to turn any string into a function. For example, we can receive a new function from a server and then execute it:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;"> = ... </span><span style="color: #9cdcfe;">receive</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">the</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">code</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">from</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">a</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">server</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">dynamically</span><span style="color: #d4d4d4;"> ...</span></div><br> <div><span style="color: #9cdcfe;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">func</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Function</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">str</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #dcdcaa;">func</span><span style="color: #d4d4d4;">();</span> </div> </div> </div> </li> <li> <h3>Closure</h3> <p>Usually, a function remembers where it was born in the special property [[Environment]]. It references the Lexical Environment from where it’s created</p> <p>But when a function is created using new Function, its [[Environment]] is set to reference not the current Lexical Environment, but the global one.</p> <p>So, such function doesn’t have access to outer variables, only to the global ones.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">getFunc</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"test"</span><span style="color: #d4d4d4;">;</span> </div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">func</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Function</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'alert(value)'</span><span style="color: #d4d4d4;">);</span> </div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">func</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #dcdcaa;">getFunc</span><span style="color: #d4d4d4;">()(); </span><span style="color: #6a9955;">// error: value is not defined</span></div> </div> </div> </li> </ul> </details> </li> <li> <details> <summary>Scheduling: setTimeout and setInterval</summary> <ul> <li> <h3>setTimeout</h3> <p>The syntax:</p> <div class="cods" contenteditable="" spellcheck="false"> <div class="cods" spellcheck="false" contenteditable=""> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">timerId</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">setTimeout</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">func</span><span style="color: #d4d4d4;"> | </span><span style="color: #9cdcfe;">code</span><span style="color: #d4d4d4;">, [</span><span style="color: #9cdcfe;">delay</span><span style="color: #d4d4d4;">], [</span><span style="color: #9cdcfe;">arg1</span><span style="color: #d4d4d4;">], [</span><span style="color: #9cdcfe;">arg2</span><span style="color: #d4d4d4;">], ...)</span></div> </div> </div> </div> <p>Parameters</p> <dl style="color: white;font-size:small;"> <dt><code>func|code</code></dt> <dd>Function or a string of code to execute. Usually, that’s a function. For historical reasons, a string of code can be passed, but that’s not recommended.</dd> <dt><code>delay</code></dt> <dd>The delay before run, in milliseconds (1000 ms = 1 second), by default 0.</dd> <dt><code>arg1</code>, <code>arg2</code>…</dt> <dd>Arguments for the function</dd> </dl> </li> <li> <p>Canceling with clearTimeout</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">timerId</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">setTimeout</span><span style="color: #d4d4d4;">(...);</span> </div> <div><span style="color: #dcdcaa;">clearTimeout</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">timerId</span><span style="color: #d4d4d4;">);</span> </div> </div> </div> </li> <li> <h3>setInterval</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">timerId</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">setInterval</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">func</span><span style="color: #d4d4d4;"> | </span><span style="color: #9cdcfe;">code</span><span style="color: #d4d4d4;">, [</span><span style="color: #9cdcfe;">delay</span><span style="color: #d4d4d4;">], [</span><span style="color: #9cdcfe;">arg1</span><span style="color: #d4d4d4;">], [</span><span style="color: #9cdcfe;">arg2</span><span style="color: #d4d4d4;">], ...)</span></div> </div> </div> <p>To stop further calls, we should call clearInterval(timerId).The following example will show the message every 2 seconds. After 5 seconds, the output is stopped:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// repeat with the interval of 2 seconds</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">timerId</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">setInterval</span><span style="color: #d4d4d4;">(() </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'tick'</span><span style="color: #d4d4d4;">), </span><span style="color: #b5cea8;">2000</span><span style="color: #d4d4d4;">);</span> </div><br> <div><span style="color: #6a9955;">// after 5 seconds stop</span></div> <div><span style="color: #dcdcaa;">setTimeout</span><span style="color: #d4d4d4;">(() </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> { </span><span style="color: #dcdcaa;">clearInterval</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">timerId</span><span style="color: #d4d4d4;">); </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'stop'</span><span style="color: #d4d4d4;">); }, </span><span style="color: #b5cea8;">5000</span><span style="color: #d4d4d4;">);</span> </div> </div> </div> </li> <li> <h3>Zero delay setTimeout</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #dcdcaa;">setTimeout</span><span style="color: #d4d4d4;">(() </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'This message will be logged after a 0 millisecond delay'</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">}, </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">);</span> </div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'This message will be logged immediately'</span><span style="color: #d4d4d4;">); &nbsp;</span></div> </div> </div> <p>In this code, the console.log statement with the zero delay setTimeout will be scheduled to run as soon as possible, but the normal console.log statement will be executed first because it is not scheduled to run at a specific time.</p> <p>This is because the setTimeout function runs asynchronously, meaning that it does not block the execution of the current context. Instead, it schedules the task to be executed at a later time, allowing the current context to continue executing.</p> <p>Therefore, the normal console.log statement will be executed immediately, while the console.log statement inside the setTimeout function will be executed at the earliest opportunity, after the current context has finished executing.</p> </li> </ul> </details> </li> <li> <details> <summary>call ,apply and bind</summary> <ul> <li> <h3>Call</h3> <p>Call is a method on functions that allows us to invoke the function and specify the this value and arguments to be passed to the function.</p> <p>Here is an example of using the call method:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">greet</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">greeting</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">punctuation</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">greeting</span><span style="color: #d4d4d4;"> + </span><span style="color: #ce9178;">' '</span><span style="color: #d4d4d4;"> + </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> + </span><span style="color: #9cdcfe;">punctuation</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">person</span><span style="color: #d4d4d4;"> = { </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">'John'</span><span style="color: #d4d4d4;"> };</span></div><br> <div><span style="color: #dcdcaa;">greet</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">call</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">person</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">'Hello'</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">'!'</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// Output: "Hello John!"</span> </div> </div> </div> <p>In the example above, the greet function is invoked with the this value of person and the arguments 'Hello' and '!'. </p> </li> <li> <h3>Apply</h3> <p>Apply is similar to call, but instead of passing the arguments as a list of separate values, we pass them as an array.</p> <p>Here is an example of using the apply method:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">greet</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">greeting</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">punctuation</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">greeting</span><span style="color: #d4d4d4;"> + </span><span style="color: #ce9178;">' '</span><span style="color: #d4d4d4;"> + </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> + </span><span style="color: #9cdcfe;">punctuation</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">person</span><span style="color: #d4d4d4;"> = { </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">'John'</span><span style="color: #d4d4d4;"> };</span></div><br> <div><span style="color: #dcdcaa;">greet</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">apply</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">person</span><span style="color: #d4d4d4;">, [</span><span style="color: #ce9178;">'Hello'</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">'!'</span><span style="color: #d4d4d4;">]); </span><span style="color: #6a9955;">// Output: "Hello John!" &nbsp;</span></div> </div> </div> </li> <li> <h3>Bind</h3> <p>Bind is a method on functions that creates a new function with the this value and arguments fixed. The new function can then be called at a later time with the correct this value and arguments.</p> <p>Here is an example of using the bind method:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">greet</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">greeting</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">punctuation</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">greeting</span><span style="color: #d4d4d4;"> + </span><span style="color: #ce9178;">' '</span><span style="color: #d4d4d4;"> + </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> + </span><span style="color: #9cdcfe;">punctuation</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">person</span><span style="color: #d4d4d4;"> = { </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">'John'</span><span style="color: #d4d4d4;"> };</span></div><br> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">greetJohn</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">greet</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">bind</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">person</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">'Hello'</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">'!'</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #dcdcaa;">greetJohn</span><span style="color: #d4d4d4;">(); </span><span style="color: #6a9955;">// Output: "Hello John!"</span> </div> </div> </div> <p>In the example above, the greetJohn function is created by calling the bind method on the greet function with the this value of person and the arguments 'Hello' and '!'. When greetJohn is called, it will invoke the greet function with the correct this value and arguments.</p> </li> </ul> </details> </li> <li> <details> <summary>Arrow functions revisited</summary> <ul> <li> <h3>arrow function</h3> <p>An arrow function is a shorter syntax for writing function expressions. It is a more concise way of defining a function, especially when the function is a short, one-line block of code.</p> <p>Here is an example of an ordinary function:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">add</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">x</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">y</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">x</span><span style="color: #d4d4d4;"> + </span><span style="color: #9cdcfe;">y</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">} &nbsp;</span></div> </div> </div> <p>And here is the same function written as an arrow function: </p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">add</span><span style="color: #d4d4d4;"> = (</span><span style="color: #9cdcfe;">x</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">y</span><span style="color: #d4d4d4;">) </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">x</span><span style="color: #d4d4d4;"> + </span><span style="color: #9cdcfe;">y</span><span style="color: #d4d4d4;">;</span> </div> </div> </div> <p>As you can see, the arrow function is shorter and easier to read.</p> <p>There are a few differences between arrow functions and ordinary functions:</p> <ol> <li>Arrow functions do not have their own <code>this</code> value. They inherit the <code>this</code> value from the surrounding scope. </li> <li>Arrow functions do not have the <code>arguments</code> object. If you need to access the arguments of the function, you can use the rest operator (<code>...</code>) instead. </li> <li>Arrow functions cannot be used as constructors.</li> <li>Arrow functions do not have a <code>prototype</code> property.</li> </ol> <p>Here is an example of how the this value is different in arrow functions compared to ordinary functions:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #4fc1ff;">obj</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">'John'</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">ordinaryFunction</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; },</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">arrowFunction</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> () </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">)</span> </div> <div><span style="color: #d4d4d4;">};</span> </div><br> <div><span style="color: #4fc1ff;">obj</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">ordinaryFunction</span><span style="color: #d4d4d4;">(); </span><span style="color: #6a9955;">// Output: 'John'</span></div> <div><span style="color: #4fc1ff;">obj</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">arrowFunction</span><span style="color: #d4d4d4;">(); </span><span style="color: #6a9955;">// Output: undefined (because 'this' refers to the global object) &nbsp;</span></div> </div> </div> <p>And here is an example of how to use the rest operator to access the arguments of an arrow function:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">add</span><span style="color: #d4d4d4;"> = (...</span><span style="color: #9cdcfe;">numbers</span><span style="color: #d4d4d4;">) </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">numbers</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">reduce</span><span style="color: #d4d4d4;">((</span><span style="color: #9cdcfe;">total</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">n</span><span style="color: #d4d4d4;">) </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">total</span><span style="color: #d4d4d4;"> + </span><span style="color: #9cdcfe;">n</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">);</span> </div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">add</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">3</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">4</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">5</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// Output: 15</span></div> </div> </div> <p>In summary, arrow functions are a shorter and more concise way to define functions, but they have some differences compared to ordinary functions. They do not have their own this value or arguments object, and they cannot be used as constructors or have a prototype property.</p> </li> </ul> </details> </li> </ul> </details> <details class="dad"> <summary>Object properties configuration</summary> <ul> <li> <details> <summary>Property flags and descriptors</summary> <ul> <li> <h3>Property flags</h3> </li> <p>Object properties, besides a value, have three special attributes (so-called “flags”):</p> <ul class="son"> <li><strong><code>writable</code></strong> – if <code>true</code>, the value can be changed, otherwise it’s read-only. </li> <li><strong><code>enumerable</code></strong> – if <code>true</code>, then listed in loops, otherwise not listed. </li> <li><strong><code>configurable</code></strong> – if <code>true</code>, the property can be deleted and these attributes can be modified, otherwise not. </li> </ul> <p>When we create a property “the usual way”, all of them are true. But we also can change them anytime.</p> <p>The method Object.getOwnPropertyDescriptor allows to query the full information about a property.</p> <p>The syntax is:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">descriptor</span><span style="color: #d4d4d4;"> = </span><span style="color: #4ec9b0;">Object</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">getOwnPropertyDescriptor</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">obj</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">propertyName</span><span style="color: #d4d4d4;">);</span></div> </div> </div> <p>For instance:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = {</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"John"</span> </div> <div><span style="color: #d4d4d4;">};</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">descriptor</span><span style="color: #d4d4d4;"> = </span><span style="color: #4ec9b0;">Object</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">getOwnPropertyDescriptor</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">'name'</span><span style="color: #d4d4d4;">);</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">JSON</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">stringify</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">descriptor</span><span style="color: #d4d4d4;">, </span><span style="color: #569cd6;">null</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">));</span></div> </div> </div> <p>To change the flags, we can use Object.defineProperty.</p> <p>The syntax is:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #4ec9b0;">Object</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">defineProperty</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">obj</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">propertyName</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">descriptor</span><span style="color: #d4d4d4;">)</span></div> </div> </div> <p>If the property exists, defineProperty updates its flags. Otherwise, it creates the property with the given value and flags; in that case, if a flag is not supplied, it is assumed false.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = {};</span> </div><br> <div><span style="color: #4ec9b0;">Object</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">defineProperty</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"name"</span><span style="color: #d4d4d4;">, {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">value</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"John"</span> </div> <div><span style="color: #d4d4d4;">});</span></div><br> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">descriptor</span><span style="color: #d4d4d4;"> = </span><span style="color: #4ec9b0;">Object</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">getOwnPropertyDescriptor</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">'name'</span><span style="color: #d4d4d4;">);</span></div> <br> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">JSON</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">stringify</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">descriptor</span><span style="color: #d4d4d4;">, </span><span style="color: #569cd6;">null</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">));</span></div> <div><span style="color: #6a9955;">/*</span></div> <div><span style="color: #6a9955;">{</span></div> <div><span style="color: #6a9955;">&nbsp; "value": "John",</span></div> <div><span style="color: #6a9955;">&nbsp; "writable": false,</span></div> <div><span style="color: #6a9955;">&nbsp; "enumerable": false,</span></div> <div><span style="color: #6a9955;">&nbsp; "configurable": false</span></div> <div><span style="color: #6a9955;">}</span></div> <div><span style="color: #6a9955;">&nbsp;*/</span></div> </div> </div> <li> <h3>writable</h3> <p>Let’s make user.name non-writable (can’t be reassigned) by changing writable flag:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #ce9178;">"use strict"</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"John"</span> </div> <div><span style="color: #d4d4d4;">};</span> </div><br> <div><span style="color: #4ec9b0;">Object</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">defineProperty</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"name"</span><span style="color: #d4d4d4;">, {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">writable</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">false</span> </div> <div><span style="color: #d4d4d4;">});</span> </div><br> <div><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"Pete"</span><span style="color: #d4d4d4;">; </span><span style="color: #6a9955;">// Uncaught TypeError: "name" is read-only</span></div> </div> </div> <p>Now no one can change the name of our user, unless they apply their own defineProperty to override ours.</p> <p>Here’s the same example, but the property is created from scratch:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #ce9178;">"use strict"</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = {};</span></div> <div><span style="color: #4ec9b0;">Object</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">defineProperty</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"name"</span><span style="color: #d4d4d4;">, {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">value</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// for new properties we need to explicitly list what's true</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">enumerable</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">true</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">configurable</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">true</span> </div> <div><span style="color: #d4d4d4;">});</span> </div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// John</span></div> <div><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"Pete"</span><span style="color: #d4d4d4;">; </span><span style="color: #6a9955;">// Error</span></div> </div> </div> </li> <li> <h3>enumerable</h3> <p>The enumerable flag is a property of an object that determines whether or not it will be included in a for-in loop or Object.keys() method. By default, all properties of an object are enumerable. However, the enumerable flag can be set to false to exclude a property from these types of loops and methods.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #4fc1ff;">object</span><span style="color: #d4d4d4;"> = {};</span> </div><br> <div><span style="color: #4ec9b0;">Object</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">defineProperty</span><span style="color: #d4d4d4;">(</span><span style="color: #4fc1ff;">object</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">'hidden'</span><span style="color: #d4d4d4;">, {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">value</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">'I am a hidden property!'</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">enumerable</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">false</span> </div> <div><span style="color: #d4d4d4;">});</span> </div><br> <div><span style="color: #c586c0;">for</span><span style="color: #d4d4d4;"> (</span><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #4fc1ff;">key</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">in</span><span style="color: #d4d4d4;"> </span><span style="color: #4fc1ff;">object</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #4fc1ff;">key</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #6a9955;">// Output: (nothing)</span></div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #4fc1ff;">object</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">hidden</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #6a9955;">// Output: "I am a hidden property!"</span></div> </div> </div> </li> <li> <h3>configurable </h3> <p>In JavaScript, object properties have several characteristics that can be set or modified. One of these characteristics is the configurable flag, which determines whether or not the property can be deleted or modified.</p> <p>Here's an example of how the configurable flag can be used: </p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #4fc1ff;">obj</span><span style="color: #d4d4d4;"> = {};</span></div><br> <div><span style="color: #4ec9b0;">Object</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">defineProperty</span><span style="color: #d4d4d4;">(</span><span style="color: #4fc1ff;">obj</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">'name'</span><span style="color: #d4d4d4;">, {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">value</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">'John'</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">configurable</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">false</span><span style="color: #d4d4d4;"> </span><span style="color: #6a9955;">// the "name" property is not configurable</span></div> <div><span style="color: #d4d4d4;">});</span> </div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #4fc1ff;">obj</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// Output: "John"</span></div><br> <div><span style="color: #569cd6;">delete</span><span style="color: #d4d4d4;"> </span><span style="color: #4fc1ff;">obj</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">; </span><span style="color: #6a9955;">// This operation fails because the "name" property is not configurable</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #4fc1ff;">obj</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// Output: "John" (the "name" property still exists)</span> </div><br> <div><span style="color: #4ec9b0;">Object</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">defineProperty</span><span style="color: #d4d4d4;">(</span><span style="color: #4fc1ff;">obj</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">'name'</span><span style="color: #d4d4d4;">, {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">value</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">'Jane'</span><span style="color: #d4d4d4;"> </span><span style="color: #6a9955;">// This operation fails because the "name" property is not configurable</span></div> <div><span style="color: #d4d4d4;">});</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #4fc1ff;">obj</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// Output: "John" (the "name" property was not modified)</span></div> </div> </div> </li> <li> <h3>Object.defineProperties</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">obj</span> = {}; </div><br> <div><span style="color: #4ec9b0;">Object</span>.<span style="color: #dcdcaa;">defineProperties</span>(<span style="color: #9cdcfe;">obj</span>, {</div> <div>&nbsp; &nbsp; <span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span> {</div> <div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #9cdcfe;">value</span><span style="color: #9cdcfe;">:</span> <span style="color: #ce9178;">"John"</span>, </div> <div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #9cdcfe;">writable</span><span style="color: #9cdcfe;">:</span> <span style="color: #569cd6;">true</span>, </div> <div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #9cdcfe;">enumerable</span><span style="color: #9cdcfe;">:</span> <span style="color: #569cd6;">true</span>, </div> <div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #9cdcfe;">configurable</span><span style="color: #9cdcfe;">:</span> <span style="color: #569cd6;">true</span> </div> <div>&nbsp; &nbsp; },</div> <div>&nbsp; &nbsp; <span style="color: #9cdcfe;">age</span><span style="color: #9cdcfe;">:</span> {</div> <div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #9cdcfe;">value</span><span style="color: #9cdcfe;">:</span> <span style="color: #b5cea8;">30</span>, </div> <div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #9cdcfe;">writable</span><span style="color: #9cdcfe;">:</span> <span style="color: #569cd6;">false</span>, <span style="color: #6a9955;">// cannot be changed</span> </div> <div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #9cdcfe;">enumerable</span><span style="color: #9cdcfe;">:</span> <span style="color: #569cd6;">false</span>, <span style="color: #6a9955;">// won't appear in a for-in loop</span> </div> <div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #9cdcfe;">configurable</span><span style="color: #9cdcfe;">:</span> <span style="color: #569cd6;">false</span> <span style="color: #6a9955;">// cannot be deleted</span> </div> <div>&nbsp; &nbsp; }</div> <div>});</div><br> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #9cdcfe;">obj</span>.<span style="color: #9cdcfe;">name</span>); <span style="color: #6a9955;">// John</span> </div> <div><span style="color: #9cdcfe;">obj</span>.<span style="color: #9cdcfe;">name</span> = <span style="color: #ce9178;">"Jack"</span>; </div> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #9cdcfe;">obj</span>.<span style="color: #9cdcfe;">name</span>); <span style="color: #6a9955;">// Jack</span> </div><br> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #9cdcfe;">obj</span>.<span style="color: #9cdcfe;">age</span>); <span style="color: #6a9955;">// 30</span> </div> <div><span style="color: #9cdcfe;">obj</span>.<span style="color: #9cdcfe;">age</span> = <span style="color: #b5cea8;">31</span>; </div> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #9cdcfe;">obj</span>.<span style="color: #9cdcfe;">age</span>); <span style="color: #6a9955;">// 30 (still the same)</span> </div> <br> <div><span style="color: #c586c0;">for</span> (<span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">prop</span> <span style="color: #569cd6;">in</span> <span style="color: #9cdcfe;">obj</span>) <span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #9cdcfe;">prop</span>); <span style="color: #6a9955;">// only logs "name"</span> </div><br> <div><span style="color: #569cd6;">delete</span> <span style="color: #9cdcfe;">obj</span>.<span style="color: #9cdcfe;">name</span>; </div> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #9cdcfe;">obj</span>.<span style="color: #9cdcfe;">name</span>); <span style="color: #6a9955;">// undefined (deleted)</span> </div> <br> <div><span style="color: #569cd6;">delete</span> <span style="color: #9cdcfe;">obj</span>.<span style="color: #9cdcfe;">age</span>; </div> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #9cdcfe;">obj</span>.<span style="color: #9cdcfe;">age</span>); <span style="color: #6a9955;">// still 30 (cannot be deleted)</span> </div> </div> </div> </li> <li> <h3>Object.getOwnPropertyDescriptors</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">const</span> <span style="color: #4fc1ff;">obj</span> = { </div> <div>&nbsp; &nbsp; <span style="color: #9cdcfe;">a</span><span style="color: #9cdcfe;">:</span> <span style="color: #b5cea8;">1</span>, </div> <div>&nbsp; &nbsp; <span style="color: #9cdcfe;">b</span><span style="color: #9cdcfe;">:</span> <span style="color: #b5cea8;">2</span> </div> <div>};</div><br> <div><span style="color: #569cd6;">const</span> <span style="color: #4fc1ff;">propertyDescriptors</span> = <span style="color: #4ec9b0;">Object</span>.<span style="color: #dcdcaa;">getOwnPropertyDescriptors</span>(<span style="color: #4fc1ff;">obj</span>); </div><br> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #9cdcfe;">JSON</span>.<span style="color: #dcdcaa;">stringify</span>(<span style="color: #4fc1ff;">propertyDescriptors</span>, <span style="color: #569cd6;">null</span>, <span style="color: #b5cea8;">2</span>)); </div> <div>&nbsp; <span style="color: #6a9955;">// Output:</span></div> <div><span style="color: #6a9955;">// &nbsp; {</span></div> <div><span style="color: #6a9955;">// &nbsp; &nbsp; "a": {</span></div> <div><span style="color: #6a9955;">// &nbsp; &nbsp; &nbsp; "value": 1,</span> </div> <div><span style="color: #6a9955;">// &nbsp; &nbsp; &nbsp; "writable": true,</span></div> <div><span style="color: #6a9955;">// &nbsp; &nbsp; &nbsp; "enumerable": true,</span></div> <div><span style="color: #6a9955;">// &nbsp; &nbsp; &nbsp; "configurable": true</span></div> <div><span style="color: #6a9955;">// &nbsp; &nbsp; },</span></div> <div><span style="color: #6a9955;">// &nbsp; &nbsp; "b": {</span></div> <div><span style="color: #6a9955;">// &nbsp; &nbsp; &nbsp; "value": 2,</span> </div> <div><span style="color: #6a9955;">// &nbsp; &nbsp; &nbsp; "writable": true,</span></div> <div><span style="color: #6a9955;">// &nbsp; &nbsp; &nbsp; "enumerable": true,</span></div> <div><span style="color: #6a9955;">// &nbsp; &nbsp; &nbsp; "configurable": true</span></div> <div><span style="color: #6a9955;">// &nbsp; &nbsp; }</span></div> <div><span style="color: #6a9955;">// &nbsp; }</span></div> </div> </div> </li> <li> <h3>preventExtensions,seal and freeze</h3> <table> <thead> <tr> <th>Method</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>preventExtensions</code></td> <td>Prevents new properties from being added to the object. Existing properties can still be modified.</td> </tr> <tr> <td><code>seal</code></td> <td>Prevents new properties from being added to the object and marks all existing properties as non-configurable. Values of present properties can still be changed.</td> </tr> <tr> <td><code>freeze</code></td> <td>Prevents new properties from being added to the object, marks all existing properties as non-configurable, and sets all values to non-writable. Values cannot be changed.</td> </tr> </tbody> </table><br> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">const</span> <span style="color: #4fc1ff;">obj</span> = { <span style="color: #9cdcfe;">a</span><span style="color: #9cdcfe;">:</span> <span style="color: #b5cea8;">1</span>, <span style="color: #9cdcfe;">b</span><span style="color: #9cdcfe;">:</span> <span style="color: #b5cea8;">2</span> }; </div><br> <div><span style="color: #4ec9b0;">Object</span>.<span style="color: #dcdcaa;">preventExtensions</span>(<span style="color: #4fc1ff;">obj</span>); </div> <div><span style="color: #4fc1ff;">obj</span>.<span style="color: #9cdcfe;">c</span> = <span style="color: #b5cea8;">3</span>; <span style="color: #6a9955;">// TypeError: Cannot add property c, object is not extensible</span> </div><br> <div><span style="color: #4ec9b0;">Object</span>.<span style="color: #dcdcaa;">seal</span>(<span style="color: #4fc1ff;">obj</span>); </div> <div><span style="color: #4fc1ff;">obj</span>.<span style="color: #9cdcfe;">c</span> = <span style="color: #b5cea8;">3</span>; <span style="color: #6a9955;">// TypeError: Cannot add property c, object is not extensible</span> </div> <div><span style="color: #4fc1ff;">obj</span>.<span style="color: #9cdcfe;">a</span> = <span style="color: #b5cea8;">4</span>; <span style="color: #6a9955;">// allowed, but the property is now non-configurable</span> </div> <div><span style="color: #569cd6;">delete</span> <span style="color: #4fc1ff;">obj</span>.<span style="color: #9cdcfe;">a</span>; <span style="color: #6a9955;">// TypeError: Cannot delete property 'a' of #&lt;Object&gt;</span> </div><br> <div><span style="color: #4ec9b0;">Object</span>.<span style="color: #dcdcaa;">freeze</span>(<span style="color: #4fc1ff;">obj</span>); </div> <div><span style="color: #4fc1ff;">obj</span>.<span style="color: #9cdcfe;">c</span> = <span style="color: #b5cea8;">3</span>; <span style="color: #6a9955;">// TypeError: Cannot add property c, object is not extensible</span> </div> <div><span style="color: #4fc1ff;">obj</span>.<span style="color: #9cdcfe;">a</span> = <span style="color: #b5cea8;">4</span>; <span style="color: #6a9955;">// TypeError: Cannot assign to read only property 'a' of object '#&lt;Object&gt;'</span> </div> <div><span style="color: #569cd6;">delete</span> <span style="color: #4fc1ff;">obj</span>.<span style="color: #9cdcfe;">a</span>; <span style="color: #6a9955;">// TypeError: Cannot delete property 'a' of #&lt;Object&gt;</span> </div> </div> </div> </ul> </details> </li> <li> <details> <summary>Property getters and setters</summary> <ul> <li> <h3>Property getters and setters</h3> <p>There are two types of object properties: data properties and accessor properties. Data properties are the properties we are familiar with and have been using until now. Accessor properties are functions that execute when a value is set or gotten, but appear as regular properties to external code.</p> </li> <li> <h3>Getters and setters</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">const</span> <span style="color: #4fc1ff;">obj</span> = { </div> <div>&nbsp; &nbsp; <span style="color: #9cdcfe;">_name</span><span style="color: #9cdcfe;">:</span> <span style="color: #ce9178;">'John'</span>, </div> <div>&nbsp; &nbsp; <span style="color: #569cd6;">get</span> <span style="color: #9cdcfe;">name</span>() { </div> <div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #ce9178;">'Getting name'</span>);</div> <div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #c586c0;">return</span> <span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">_name</span>; </div> <div>&nbsp; &nbsp; },</div> <div>&nbsp; &nbsp; <span style="color: #569cd6;">set</span> <span style="color: #9cdcfe;">name</span>(<span style="color: #9cdcfe;">value</span>) { </div> <div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #ce9178;">'Setting name'</span>);</div> <div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">_name</span> = <span style="color: #9cdcfe;">value</span>; </div> <div>&nbsp; &nbsp; }</div> <div>};</div><br> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #4fc1ff;">obj</span>.<span style="color: #9cdcfe;">name</span>); <span style="color: #6a9955;">// logs 'Getting name' and returns 'John'</span> </div> <div><span style="color: #4fc1ff;">obj</span>.<span style="color: #9cdcfe;">name</span> = <span style="color: #ce9178;">'Jane'</span>; <span style="color: #6a9955;">// logs 'Setting name'</span> </div> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #4fc1ff;">obj</span>.<span style="color: #9cdcfe;">name</span>); <span style="color: #6a9955;">// logs 'Getting name' and returns 'Jane' &nbsp;</span> </div> </div> </div> <p>In this example, name is an accessor property with a get function that is called when the property is accessed and a set function that is called when the property is set to a new value. The get and set functions can contain any logic that you want to execute when the property is accessed or set. The _name property is the actual data property that is being accessed or set by the accessor property.</p> </li> </ul> </details> </li> </ul> </details> <details class="dad"> <summary>Prototypes, inheritance</summary> <ul> <li> <details> <summary>Prototypal inheritance</summary> <ul> <li> <h3>[[Prototype]]</h3> <p>In JavaScript, objects have a special hidden property [[Prototype]] (as named in the specification), that is either null or references another object. That object is called “a prototype”:</p> <p>When we read a property from object, and it’s missing, JavaScript automatically takes it from the prototype. In programming, this is called “prototypal inheritance”. And soon we’ll study many examples of such inheritance, as well as cooler language features built upon it.</p> <p>The property [[Prototype]] is internal and hidden, but there are many ways to set it</p> <p>One of them is to use the special name __proto__, like this: </p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">animal</span> = { </div> <div>&nbsp; &nbsp; <span style="color: #9cdcfe;">eats</span><span style="color: #9cdcfe;">:</span> <span style="color: #569cd6;">true</span> </div> <div>};</div> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">rabbit</span> = { </div> <div>&nbsp; &nbsp; <span style="color: #9cdcfe;">jumps</span><span style="color: #9cdcfe;">:</span> <span style="color: #569cd6;">true</span> </div> <div>};</div><br> <div><span style="color: #9cdcfe;">rabbit</span>.<span style="color: #9cdcfe;">__proto__</span> = <span style="color: #9cdcfe;">animal</span>; <span style="color: #6a9955;">// sets rabbit.[[Prototype]] = animal</span> </div> </div> </div> <p>Now if we read a property from rabbit, and it’s missing, JavaScript will automatically take it from animal. </p> <p>For instance:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">animal</span> = { </div> <div>&nbsp; &nbsp; <span style="color: #9cdcfe;">eats</span><span style="color: #9cdcfe;">:</span> <span style="color: #569cd6;">true</span> </div> <div>};</div> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">rabbit</span> = { </div> <div>&nbsp; &nbsp; <span style="color: #9cdcfe;">jumps</span><span style="color: #9cdcfe;">:</span> <span style="color: #569cd6;">true</span> </div> <div>};</div><br> <div><span style="color: #9cdcfe;">rabbit</span>.<span style="color: #9cdcfe;">__proto__</span> = <span style="color: #9cdcfe;">animal</span>; <span style="color: #6a9955;">// (*)</span> </div><br> <div><span style="color: #6a9955;">// we can find both properties in rabbit now:</span></div> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #9cdcfe;">rabbit</span>.<span style="color: #9cdcfe;">eats</span>); <span style="color: #6a9955;">// true (**)</span> </div> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #9cdcfe;">rabbit</span>.<span style="color: #9cdcfe;">jumps</span>); <span style="color: #6a9955;">// true</span> </div> </div> </div> <p>Here we can say that "animal is the prototype of rabbit" or "rabbit prototypically inherits from animal".</p> <p>So if animal has a lot of useful properties and methods, then they become automatically available in rabbit. Such properties are called “inherited”.</p> <p>If we have a method in animal, it can be called on rabbit: </p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">animal</span> = { </div> <div>&nbsp; &nbsp; <span style="color: #9cdcfe;">eats</span><span style="color: #9cdcfe;">:</span> <span style="color: #569cd6;">true</span>, </div> <div>&nbsp; &nbsp; <span style="color: #dcdcaa;">walk</span>() {</div> <div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #ce9178;">"Animal walk"</span>);</div> <div>&nbsp; &nbsp; }</div> <div>};</div><br> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">rabbit</span> = { </div> <div>&nbsp; &nbsp; <span style="color: #9cdcfe;">jumps</span><span style="color: #9cdcfe;">:</span> <span style="color: #569cd6;">true</span>, </div> <div>&nbsp; &nbsp; <span style="color: #9cdcfe;">__proto__</span><span style="color: #9cdcfe;">:</span> <span style="color: #9cdcfe;">animal</span> </div> <div>};</div> <div><span style="color: #6a9955;">// walk is taken from the prototype</span> </div> <div><span style="color: #9cdcfe;">rabbit</span>.<span style="color: #dcdcaa;">walk</span>(); <span style="color: #6a9955;">// Animal walk</span> </div> </div> </div> <p>The prototype chain can be longer:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">animal</span> = { </div> <div>&nbsp; &nbsp; <span style="color: #9cdcfe;">eats</span><span style="color: #9cdcfe;">:</span> <span style="color: #569cd6;">true</span>, </div> <div>&nbsp; &nbsp; <span style="color: #dcdcaa;">walk</span>() {</div> <div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #ce9178;">"Animal walk"</span>);</div> <div>&nbsp; &nbsp; }</div> <div>};</div><br> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">rabbit</span> = { </div> <div>&nbsp; &nbsp; <span style="color: #9cdcfe;">jumps</span><span style="color: #9cdcfe;">:</span> <span style="color: #569cd6;">true</span>, </div> <div>&nbsp; &nbsp; <span style="color: #9cdcfe;">__proto__</span><span style="color: #9cdcfe;">:</span> <span style="color: #9cdcfe;">animal</span> </div> <div>};</div><br> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">longEar</span> = { </div> <div>&nbsp; &nbsp; <span style="color: #9cdcfe;">earLength</span><span style="color: #9cdcfe;">:</span> <span style="color: #b5cea8;">10</span>, </div> <div>&nbsp; &nbsp; <span style="color: #9cdcfe;">__proto__</span><span style="color: #9cdcfe;">:</span> <span style="color: #9cdcfe;">rabbit</span> </div> <div>};</div><br> <div><span style="color: #6a9955;">// walk is taken from the prototype chain</span></div> <div><span style="color: #9cdcfe;">longEar</span>.<span style="color: #dcdcaa;">walk</span>(); <span style="color: #6a9955;">// Animal walk</span> </div> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #9cdcfe;">longEar</span>.<span style="color: #9cdcfe;">jumps</span>); <span style="color: #6a9955;">// true (from rabbit)</span> </div> </div> </div> <p>There are only two limitations:</p> <ol> <li>The references can’t go in circles. JavaScript will throw an error if we try to assign <code>__proto__</code> in a circle. </li> <li>The value of <code>__proto__</code> can be either an object or <code>null</code>. Other types are ignored.</li> <li>there can be only one [[Prototype]]. An object may not inherit from two others.</li> </ol> </li> <li> <h3>Writing doesn’t use prototype</h3> <p>The prototype is only used for reading properties.</p> <p>Write/delete operations work directly with the object.</p> <p>In the example below, we assign its own walk method to rabbit:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">animal</span> = { </div> <div>&nbsp; &nbsp; <span style="color: #9cdcfe;">eats</span><span style="color: #9cdcfe;">:</span> <span style="color: #569cd6;">true</span>, </div> <div>&nbsp; &nbsp; <span style="color: #dcdcaa;">walk</span>() {</div> <div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #6a9955;">/* this method won't be used by rabbit */</span></div> <div>&nbsp; &nbsp; }</div> <div>};</div><br> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">rabbit</span> = { </div> <div>&nbsp; &nbsp; <span style="color: #9cdcfe;">__proto__</span><span style="color: #9cdcfe;">:</span> <span style="color: #9cdcfe;">animal</span> </div> <div>};</div><br> <div><span style="color: #9cdcfe;">rabbit</span>.<span style="color: #dcdcaa;">walk</span> = <span style="color: #569cd6;">function</span> () {</div> <div>&nbsp; &nbsp; <span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #ce9178;">"Rabbit! Bounce-bounce!"</span>);</div> <div>};</div><br> <div><span style="color: #9cdcfe;">rabbit</span>.<span style="color: #dcdcaa;">walk</span>(); <span style="color: #6a9955;">// Rabbit! Bounce-bounce!</span> </div> </div> </div> <p>From now on, rabbit.walk() call finds the method immediately in the object and executes it, without using the prototype:</p> <p>Accessor properties are an exception, as assignment is handled by a setter function. So writing to such a property is actually the same as calling a function</p> <p>For that reason admin.fullName works correctly in the code below:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">user</span> = { </div> <div>&nbsp; &nbsp; <span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span> <span style="color: #ce9178;">"John"</span>, </div> <div>&nbsp; &nbsp; <span style="color: #9cdcfe;">surname</span><span style="color: #9cdcfe;">:</span> <span style="color: #ce9178;">"Smith"</span>, </div><br> <div>&nbsp; &nbsp; <span style="color: #569cd6;">set</span> <span style="color: #9cdcfe;">fullName</span>(<span style="color: #9cdcfe;">value</span>) { </div> <div>&nbsp; &nbsp; &nbsp; &nbsp; [<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">name</span>, <span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">surname</span>] = <span style="color: #9cdcfe;">value</span>.<span style="color: #dcdcaa;">split</span>(<span style="color: #ce9178;">" "</span>); </div> <div>&nbsp; &nbsp; },</div><br> <div>&nbsp; &nbsp; <span style="color: #569cd6;">get</span> <span style="color: #9cdcfe;">fullName</span>() { </div> <div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #c586c0;">return</span> <span style="color: #ce9178;">`</span><span style="color: #569cd6;">${this</span>.<span style="color: #9cdcfe;">name</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;"> </span><span style="color: #569cd6;">${this</span>.<span style="color: #9cdcfe;">surname</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">`</span>; </div> <div>&nbsp; &nbsp; }</div> <div>};</div><br> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">admin</span> = { </div> <div>&nbsp; &nbsp; <span style="color: #9cdcfe;">__proto__</span><span style="color: #9cdcfe;">:</span> <span style="color: #9cdcfe;">user</span>, </div> <div>&nbsp; &nbsp; <span style="color: #9cdcfe;">isAdmin</span><span style="color: #9cdcfe;">:</span> <span style="color: #569cd6;">true</span> </div> <div>};</div><br> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #9cdcfe;">admin</span>.<span style="color: #9cdcfe;">fullName</span>); <span style="color: #6a9955;">// John Smith (*)</span> </div><br> <div><span style="color: #6a9955;">// setter triggers!</span></div> <div><span style="color: #9cdcfe;">admin</span>.<span style="color: #9cdcfe;">fullName</span> = <span style="color: #ce9178;">"Alice Cooper"</span>; <span style="color: #6a9955;">// (**)</span></div><br> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #9cdcfe;">admin</span>.<span style="color: #9cdcfe;">fullName</span>); <span style="color: #6a9955;">// Alice Cooper, state of admin modified</span> </div> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #9cdcfe;">user</span>.<span style="color: #9cdcfe;">fullName</span>); <span style="color: #6a9955;">// John Smith, state of user protected </span> </div> </div> </div> </li> <li> <h3>The value of “this”</h3> <p>In JavaScript, the value of this inside a method is determined by the object before the dot at the time the method is called. It is not affected by the prototype chain and will always refer to the object on which the method is called. This is important because it allows objects that inherit methods from a prototype to modify their own states, rather than the state of the prototype object.</p> <p>For instance, here animal represents a “method storage”, and rabbit makes use of it.</p> <p>The call rabbit.sleep() sets this.isSleeping on the rabbit object:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// animal has methods</span></div> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">animal</span> = { </div> <div>&nbsp; &nbsp; <span style="color: #dcdcaa;">walk</span>() {</div> <div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #c586c0;">if</span> (!<span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">isSleeping</span>) {</div> <div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #ce9178;">`I walk`</span>); </div> <div>&nbsp; &nbsp; &nbsp; &nbsp; }</div> <div>&nbsp; &nbsp; },</div> <div>&nbsp; &nbsp; <span style="color: #dcdcaa;">sleep</span>() {</div> <div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">isSleeping</span> = <span style="color: #569cd6;">true</span>; </div> <div>&nbsp; &nbsp; }</div> <div>};</div><br> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">rabbit</span> = { </div> <div>&nbsp; &nbsp; <span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span> <span style="color: #ce9178;">"White Rabbit"</span>, </div> <div>&nbsp; &nbsp; <span style="color: #9cdcfe;">__proto__</span><span style="color: #9cdcfe;">:</span> <span style="color: #9cdcfe;">animal</span> </div> <div>};</div><br> <div><span style="color: #6a9955;">// modifies rabbit.isSleeping</span></div> <div><span style="color: #9cdcfe;">rabbit</span>.<span style="color: #dcdcaa;">sleep</span>(); </div><br> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #9cdcfe;">rabbit</span>.<span style="color: #9cdcfe;">isSleeping</span>); <span style="color: #6a9955;">// true</span> </div> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #9cdcfe;">animal</span>.<span style="color: #9cdcfe;">isSleeping</span>); <span style="color: #6a9955;">// undefined (no such property in the prototype)</span> </div> </div> </div> </li> <li> <h3>for…in loop</h3> <p>The for..in loop iterates over inherited properties too.</p> <p>For instance:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">animal</span> = { </div> <div>&nbsp; &nbsp; <span style="color: #9cdcfe;">eats</span><span style="color: #9cdcfe;">:</span> <span style="color: #569cd6;">true</span> </div> <div>};</div><br> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">rabbit</span> = { </div> <div>&nbsp; &nbsp; <span style="color: #9cdcfe;">jumps</span><span style="color: #9cdcfe;">:</span> <span style="color: #569cd6;">true</span>, </div> <div>&nbsp; &nbsp; <span style="color: #9cdcfe;">__proto__</span><span style="color: #9cdcfe;">:</span> <span style="color: #9cdcfe;">animal</span> </div> <div>};</div><br> <div><span style="color: #6a9955;">// Object.keys only returns own keys</span></div> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #4ec9b0;">Object</span>.<span style="color: #dcdcaa;">keys</span>(<span style="color: #9cdcfe;">rabbit</span>)); <span style="color: #6a9955;">// jumps</span> </div><br> <div><span style="color: #6a9955;">// for..in loops over both own and inherited keys</span></div> <div><span style="color: #c586c0;">for</span> (<span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">prop</span> <span style="color: #569cd6;">in</span> <span style="color: #9cdcfe;">rabbit</span>) <span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #9cdcfe;">prop</span>); <span style="color: #6a9955;">// jumps, then eats</span> </div> </div> </div> <p>If that’s not what we want, and we’d like to exclude inherited properties, there’s a built-in method obj.hasOwnProperty(key): it returns true if obj has its own (not inherited) property named key. So we can filter out inherited properties (or do something else with them):</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">animal</span> = { </div> <div>&nbsp; &nbsp; <span style="color: #9cdcfe;">eats</span><span style="color: #9cdcfe;">:</span> <span style="color: #569cd6;">true</span> </div> <div>};</div><br> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">rabbit</span> = { </div> <div>&nbsp; &nbsp; <span style="color: #9cdcfe;">jumps</span><span style="color: #9cdcfe;">:</span> <span style="color: #569cd6;">true</span>, </div> <div>&nbsp; &nbsp; <span style="color: #9cdcfe;">__proto__</span><span style="color: #9cdcfe;">:</span> <span style="color: #9cdcfe;">animal</span> </div> <div>};</div><br> <div><span style="color: #c586c0;">for</span> (<span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">prop</span> <span style="color: #569cd6;">in</span> <span style="color: #9cdcfe;">rabbit</span>) { </div> <div>&nbsp; &nbsp; <span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">isOwn</span> = <span style="color: #9cdcfe;">rabbit</span>.<span style="color: #dcdcaa;">hasOwnProperty</span>(<span style="color: #9cdcfe;">prop</span>); </div><br> <div>&nbsp; &nbsp; <span style="color: #c586c0;">if</span> (<span style="color: #9cdcfe;">isOwn</span>) {</div> <div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #ce9178;">`Our: </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">prop</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">`</span>); <span style="color: #6a9955;">// Our: jumps</span> </div> <div>&nbsp; &nbsp; } <span style="color: #c586c0;">else</span> {</div> <div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #ce9178;">`Inherited: </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">prop</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">`</span>); <span style="color: #6a9955;">// Inherited: eats</span> </div> <div>&nbsp; &nbsp; }</div> <div>}</div> </div> </div> <p>Here we have the following inheritance chain: rabbit inherits from animal, that inherits from Object.prototype (because animal is a literal object {...}, so it’s by default), and then null above it:</p> <svg xmlns="http://www.w3.org/2000/svg" width="233" height="344" viewBox="0 0 233 344"> <defs> <style> @import url(https://fonts.googleapis.com/css?family=Open+Sans:bold,italic,bolditalic%7CPT+Mono); @font-face { font-family: 'PT Mono'; font-weight: 700; font-style: normal; src: local('PT MonoBold'), url(/font/PTMonoBold.woff2) format('woff2'), url(/font/PTMonoBold.woff) format('woff'), url(/font/PTMonoBold.ttf) format('truetype') } </style> </defs> <g id="inheritance" fill="none" fill-rule="evenodd" stroke="none" stroke-width="1"> <g id="rabbit-animal-object.svg"> <path id="Rectangle-1" fill="#252732" stroke="#4b4e65" stroke-width="2" d="M14 96h218v58H14z" /><text id="toString:-function" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="24" y="113">toString: function</tspan> <tspan x="24" y="128"> hasOwnProperty: function </tspan> <tspan x="24" y="143">... </tspan> </text><text id="Object.prototype" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="13" y="88"> Object.prototype</tspan> </text> <path id="Rectangle-1" fill="#252732" stroke="#4b4e65" stroke-width="2" d="M14 213h218v28H14z" /><text id="animal" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="13" y="205">animal </tspan> </text> <path id="Line" fill="#7a7f9c" fill-rule="nonzero" d="M73.5 162.5l7 14h-6v28h-2v-28h-6l7-14z" /> <text id="[[Prototype]]" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="83" y="184"> [[Prototype]]</tspan> </text><text id="[[Prototype]]-Copy" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="83" y="274"> [[Prototype]]</tspan> </text> <path id="Line-2" fill="#7a7f9c" fill-rule="nonzero" d="M73.5 30.5l7 14h-6v28h-2v-28h-6l7-14z" /> <text id="[[Prototype]]" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="83" y="52"> [[Prototype]]</tspan> </text><text id="null" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="59" y="19">null </tspan> </text><text id="eats:-true" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="24" y="231">eats: true </tspan> </text> <path id="Rectangle-1-Copy" fill="#252732" stroke="#4b4e65" stroke-width="2" d="M14 302h218v28H14z" /><text id="rabbit-copy" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="13" y="294">rabbit </tspan> </text> <path id="Line-Copy" fill="#7a7f9c" fill-rule="nonzero" d="M73.5 251.5l7 14h-6v28h-2v-28h-6l7-14z" /> <text id="jumps:-true" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="24" y="320">jumps: true</tspan> </text> </g> </g> </svg> <p>Note, there’s one funny thing. Where is the method rabbit.hasOwnProperty coming from? We did not define it. Looking at the chain we can see that the method is provided by Object.prototype.hasOwnProperty. In other words, it’s inherited. …But why does hasOwnProperty not appear in the for..in loop like eats and jumps do, if for..in lists inherited properties? The answer is simple: it’s not enumerable. Just like all other properties of Object.prototype, it has enumerable:false flag. And for..in only lists enumerable properties. That’s why it and the rest of the Object.prototype properties are not listed.</p> </li> <li></li> </ul> </details> </li> <li> <details> <summary>F.prototype</summary> <ul> <li> <h3> F.prototype</h3> <p>Remember, new objects can be created with a constructor function, like new F(). If F.prototype is an object, then the new operator uses it to set [[Prototype]] for the new object.</p> <p>Please note that F.prototype here means a regular property named "prototype" on F. It sounds something similar to the term “prototype”, but here we really mean a regular property with this name.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <br> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">animal</span> = { </div> <div>&nbsp; &nbsp; <span style="color: #9cdcfe;">eats</span><span style="color: #9cdcfe;">:</span> <span style="color: #569cd6;">true</span> </div> <div>};</div><br> <div><span style="color: #569cd6;">function</span> <span style="color: #4ec9b0;">Rabbit</span>(<span style="color: #9cdcfe;">name</span>) { </div> <div>&nbsp; &nbsp; <span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">name</span> = <span style="color: #9cdcfe;">name</span>; </div> <div>}</div><br> <div><span style="color: #4ec9b0;">Rabbit</span>.<span style="color: #9cdcfe;">prototype</span> = <span style="color: #9cdcfe;">animal</span>; </div><br> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">rabbit</span> = <span style="color: #569cd6;">new</span> <span style="color: #4ec9b0;">Rabbit</span>(<span style="color: #ce9178;">"White Rabbit"</span>); <span style="color: #6a9955;">// &nbsp;rabbit.__proto__ == animal</span> </div><br> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #9cdcfe;">rabbit</span>.<span style="color: #9cdcfe;">eats</span>); <span style="color: #6a9955;">// true</span> </div> </div> </div> <p>Setting Rabbit.prototype = animal literally states the following: "When a new Rabbit is created, assign its [[Prototype]] to animal".</p> <p>That’s the resulting picture:</p> <svg xmlns="http://www.w3.org/2000/svg" width="453" height="160" viewBox="0 0 453 160"> <defs> <style> @import url(https://fonts.googleapis.com/css?family=Open+Sans:bold,italic,bolditalic%7CPT+Mono); @font-face { font-family: 'PT Mono'; font-weight: 700; font-style: normal; src: local('PT MonoBold'), url(/font/PTMonoBold.woff2) format('woff2'), url(/font/PTMonoBold.woff) format('woff'), url(/font/PTMonoBold.ttf) format('truetype') } </style> </defs> <g id="inheritance" fill="none" fill-rule="evenodd" stroke="none" stroke-width="1"> <g id="proto-constructor-animal-rabbit.svg"> <path id="Rectangle-1" fill="#252732" stroke="#4b4e65" stroke-width="2" d="M233 23h187v28H233z" /><text id="eats:-true" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="243" y="42">eats: true </tspan> </text> <path id="Rectangle-1-Copy" fill="#252732" stroke="#4b4e65" stroke-width="2" d="M233 124h187v28H233z" /><text id="name:-&quot;White-Rabbit&quot;" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="246" y="143">name: "White Rabbit"</tspan> </text><text id="animal" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="232" y="15">animal </tspan> </text> <path id="Rectangle-1-Copy-2" fill="#252732" stroke="#4b4e65" stroke-width="2" d="M10 23h99v28H10z" /><text id="Rabbit" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="9" y="15">Rabbit </tspan> </text><text id="rabbit" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="238" y="113">rabbit </tspan> </text> <path id="Line" fill="#7a7f9c" fill-rule="nonzero" d="M321.5 68.5l7 14h-6v28h-2v-28h-6l7-14z" /> <path id="Line-Copy" fill="#7a7f9c" fill-rule="nonzero" d="M208 27l14 7-14 7v-6h-81v-2h81v-6z" /> <text id="[[Prototype]]" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="331" y="92"> [[Prototype]]</tspan> </text><text id="prototype" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="134" y="22">prototype </tspan> </text> </g> </g> </svg> </li> <li> <h3>Default F.prototype, constructor property</h3> <p>Every function has the "prototype" property even if we don’t supply it.</p> <p>The default "prototype" is an object with the only property constructor that points back to the function itself. </p> <p>Like this:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function</span> <span style="color: #dcdcaa;">Rabbit</span>() {} </div> <div><span style="color: #6a9955;">/* default prototype</span></div> <div><span style="color: #6a9955;">Rabbit.prototype = { constructor: Rabbit };</span></div> <div><span style="color: #6a9955;">*/</span> </div> </div> </div> <svg xmlns="http://www.w3.org/2000/svg" width="449" height="73" viewBox="0 0 449 73"> <defs> <style> @import url(https://fonts.googleapis.com/css?family=Open+Sans:bold,italic,bolditalic%7CPT+Mono); @font-face { font-family: 'PT Mono'; font-weight: 700; font-style: normal; src: local('PT MonoBold'), url(/font/PTMonoBold.woff2) format('woff2'), url(/font/PTMonoBold.woff) format('woff'), url(/font/PTMonoBold.ttf) format('truetype') } </style> </defs> <g id="inheritance" fill="none" fill-rule="evenodd" stroke="none" stroke-width="1"> <g id="function-prototype-constructor.svg"> <path id="Rectangle-1" fill="#252732" stroke="#4b4e65" stroke-width="2" d="M233 23h170v28H233z" /> <path id="Rectangle-1-Copy-2" fill="#252732" stroke="#4b4e65" stroke-width="2" d="M10 23h108v28H10z" /><text id="Rabbit" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="9" y="15">Rabbit </tspan> </text> <path id="Line-Copy" fill="#7a7f9c" fill-rule="nonzero" d="M218 25.5l14 7-14 7v-6H101v-2h117v-6z" /> <path id="Line-Copy-2" fill="#7a7f9c" fill-rule="nonzero" d="M133 36.5v6h116v2H133v6l-14-7 14-7z" /> <text id="prototype" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="20" y="35">prototype </tspan> </text><text id="constructor" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="259" y="47"> constructor</tspan> </text><text id="default-&quot;prototype&quot;" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="234.2" y="15">default "prototype"</tspan> </text> </g> </g> </svg> <p>Naturally, if we do nothing, the constructor property is available to all rabbits through [[Prototype]]: </p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function</span> <span style="color: #dcdcaa;">Rabbit</span>() {} </div> <div><span style="color: #6a9955;">// by default:</span></div> <div><span style="color: #6a9955;">// Rabbit.prototype = { constructor: Rabbit }</span> </div> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">rabbit</span> = <span style="color: #569cd6;">new</span> <span style="color: #dcdcaa;">Rabbit</span>(); <span style="color: #6a9955;">// inherits from {constructor: Rabbit}</span> </div> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #9cdcfe;">rabbit</span>.<span style="color: #9cdcfe;">constructor</span> == <span style="color: #dcdcaa;">Rabbit</span>); <span style="color: #6a9955;">// true (from prototype)</span> </div> </div> </div> <p>We can use constructor property to create a new object using the same constructor as the existing one.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function</span> <span style="color: #4ec9b0;">Rabbit</span>(<span style="color: #9cdcfe;">name</span>) { </div> <div>&nbsp; &nbsp; <span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">name</span> = <span style="color: #9cdcfe;">name</span>; </div> <div>&nbsp; &nbsp; <span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #9cdcfe;">name</span>); </div> <div>}</div> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">rabbit</span> = <span style="color: #569cd6;">new</span> <span style="color: #4ec9b0;">Rabbit</span>(<span style="color: #ce9178;">"White Rabbit"</span>); </div> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">rabbit2</span> = <span style="color: #569cd6;">new</span> <span style="color: #9cdcfe;">rabbit</span>.<span style="color: #9cdcfe;">constructor</span>(<span style="color: #ce9178;">"Black Rabbit"</span>); </div> </div> </div> <ol> <li>The "constructor" property can be useful when creating an object of the same kind as an unknown object from a third-party library.</li> <li>JavaScript does not ensure the "constructor" value is correct.</li> <li>The "constructor" property exists in the default "prototype" of functions, but can be changed or removed.</li> <li>Replacing the default prototype as a whole will remove the "constructor" property.</li> </ol> <p>For instance:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function</span> <span style="color: #4ec9b0;">Rabbit</span>() {} </div> <div><span style="color: #4ec9b0;">Rabbit</span>.<span style="color: #9cdcfe;">prototype</span> = {</div> <div>&nbsp; <span style="color: #9cdcfe;">jumps</span><span style="color: #9cdcfe;">:</span> <span style="color: #569cd6;">true</span> </div> <div>};</div> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">rabbit</span> = <span style="color: #569cd6;">new</span> <span style="color: #4ec9b0;">Rabbit</span>(); </div> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #9cdcfe;">rabbit</span>.<span style="color: #9cdcfe;">constructor</span> === <span style="color: #4ec9b0;">Rabbit</span>); <span style="color: #6a9955;">// false</span> </div> </div> </div> </li> </ul> </details> </li> <li> <details> <summary>Native prototypes</summary> <ul> <li> <h3>Object.prototype</h3> <p>Let’s say we output an empty object:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">obj</span> = {}; </div> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #ce9178;">`</span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">obj</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">`</span>); <span style="color: #6a9955;">// "[object Object]" ? </span> </div> </div> </div> <p>Where’s the code that generates the string "[object Object]"? That’s a built-in toString method, but where is it? The obj is empty!</p> <p>…But the short notation obj = {} is the same as obj = new Object(), where Object is a built-in object constructor function, with its own prototype referencing a huge object with toString and other methods.</p> <p>Here’s what’s going on:</p> <svg xmlns="http://www.w3.org/2000/svg" width="453" height="94" viewBox="0 0 453 94"> <defs> <style> @import url(https://fonts.googleapis.com/css?family=Open+Sans:bold,italic,bolditalic%7CPT+Mono); @font-face { font-family: 'PT Mono'; font-weight: 700; font-style: normal; src: local('PT MonoBold'), url(/font/PTMonoBold.woff2) format('woff2'), url(/font/PTMonoBold.woff) format('woff'), url(/font/PTMonoBold.ttf) format('truetype') } </style> </defs> <g id="inheritance" fill="none" fill-rule="evenodd" stroke="none" stroke-width="1"> <g id="object-prototype.svg"> <path id="Rectangle-1" fill="#252732" stroke="#4b4e65" stroke-width="2" d="M233 23h208v58H233z" /><text id="constructor:-Object" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="243" y="39"> constructor: Object </tspan> <tspan x="243" y="54">toString: function</tspan> <tspan x="243" y="69">... </tspan> </text><text id="Object.prototype" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="232" y="15"> Object.prototype</tspan> </text> <path id="Rectangle-1-Copy-2" fill="#252732" stroke="#4b4e65" stroke-width="2" d="M10 23h107v28H10z" /><text id="Object" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="9" y="15">Object </tspan> </text> <path id="Line-Copy" fill="#7a7f9c" fill-rule="nonzero" d="M194 27l14 7-14 7v-6h-67v-2h67v-6z" /> <text id="prototype" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="134" y="22">prototype </tspan> </text> </g> </g> </svg> <p>When new Object() is called (or a literal object {...} is created), the [[Prototype]] of it is set to Object.prototype according to the rule that we discussed in the previous chapter:</p> <svg xmlns="http://www.w3.org/2000/svg" width="453" height="199" viewBox="0 0 453 199"> <defs> <style> @import url(https://fonts.googleapis.com/css?family=Open+Sans:bold,italic,bolditalic%7CPT+Mono); @font-face { font-family: 'PT Mono'; font-weight: 700; font-style: normal; src: local('PT MonoBold'), url(/font/PTMonoBold.woff2) format('woff2'), url(/font/PTMonoBold.woff) format('woff'), url(/font/PTMonoBold.ttf) format('truetype') } </style> </defs> <g id="inheritance" fill="none" fill-rule="evenodd" stroke="none" stroke-width="1"> <g id="object-prototype-1.svg"> <path id="Rectangle-1" fill="#252732" stroke="#4b4e65" stroke-width="2" d="M238 23h208v58H238z" /><text id="constructor:-Object" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="248" y="40"> constructor: Object </tspan> <tspan x="248" y="55">toString: function</tspan> <tspan x="248" y="70">... </tspan> </text> <path id="Rectangle-1-Copy" fill="#252732" stroke="#4b4e65" stroke-width="2" d="M238 164h178v28H238z" /><text id="Object.prototype" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="237" y="15"> Object.prototype</tspan> </text> <path id="Rectangle-1-Copy-2" fill="#252732" stroke="#4b4e65" stroke-width="2" d="M10 23h108v28H10z" /><text id="Object" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="9" y="15">Object </tspan> </text><text id="obj-=-new-Object()" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="243" y="154">obj = new Object()</tspan> </text> <path id="Line" fill="#7a7f9c" fill-rule="nonzero" d="M326.5 94.5l7 14h-6v28h-2v-28h-6l7-14z" /> <path id="Line-Copy" fill="#7a7f9c" fill-rule="nonzero" d="M212.5 27l14 7-14 7v-6H127v-2h85.5v-6z" /> <text id="[[Prototype]]" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="336" y="118"> [[Prototype]]</tspan> </text><text id="prototype" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="134" y="22">prototype </tspan> </text> </g> </g> </svg> <p>So then when obj.toString() is called the method is taken from Object.prototype.</p> <p>We can check it like this:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">obj</span> = {}; </div><br> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #9cdcfe;">obj</span>.<span style="color: #9cdcfe;">__proto__</span> === <span style="color: #4ec9b0;">Object</span>.<span style="color: #4fc1ff;">prototype</span>); <span style="color: #6a9955;">// true</span> </div><br> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #9cdcfe;">obj</span>.<span style="color: #dcdcaa;">toString</span> === <span style="color: #9cdcfe;">obj</span>.<span style="color: #9cdcfe;">__proto__</span>.<span style="color: #9cdcfe;">toString</span>); <span style="color: #6a9955;">//true</span> </div> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #9cdcfe;">obj</span>.<span style="color: #dcdcaa;">toString</span> === <span style="color: #4ec9b0;">Object</span>.<span style="color: #4fc1ff;">prototype</span>.<span style="color: #dcdcaa;">toString</span>); <span style="color: #6a9955;">//true</span> </div> </div> </div> <p>Please note that there is no more [[Prototype]] in the chain above Object.prototype:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #4ec9b0;">Object</span>.<span style="color: #4fc1ff;">prototype</span>.<span style="color: #9cdcfe;">__proto__</span>); <span style="color: #6a9955;">// null</span> </div> </div> <p> Other built-in objects such as Array, Date, Function and others also keep methods in prototypes.</p> <p>For instance, when we create an array [1, 2, 3], the default new Array() constructor is used internally. So Array.prototype becomes its prototype and provides methods. That’s very memory-efficient.</p> <p>By specification, all of the built-in prototypes have Object.prototype on the top. That’s why some people say that “everything inherits from objects”.</p> <svg xmlns="http://www.w3.org/2000/svg" width="692" height="411" viewBox="0 0 692 411"> <defs> <style> @import url(https://fonts.googleapis.com/css?family=Open+Sans:bold,italic,bolditalic%7CPT+Mono); @font-face { font-family: 'PT Mono'; font-weight: 700; font-style: normal; src: local('PT MonoBold'), url(/font/PTMonoBold.woff2) format('woff2'), url(/font/PTMonoBold.woff) format('woff'), url(/font/PTMonoBold.ttf) format('truetype') } </style> </defs> <g id="inheritance" fill="none" fill-rule="evenodd" stroke="none" stroke-width="1"> <g id="native-prototypes-classes.svg"> <path id="Rectangle-1" fill="#252732" stroke="#4b4e65" stroke-width="2" d="M240 93h198v58H240z" /><text id="toString:-function" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="250" y="116">toString: function</tspan> <tspan x="250" y="131">other object methods</tspan> </text><text id="Object.prototype" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="239" y="85"> Object.prototype</tspan> </text> <path id="Line-2" fill="#7a7f9c" fill-rule="nonzero" d="M299.5 27.5l7 14h-6v28h-2v-28h-6l7-14z" /> <path id="Line-3" fill="#7a7f9c" fill-rule="nonzero" d="M299.5 160.5l7 14h-6v28h-2v-28h-6l7-14z" /> <text id="null" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="285" y="16">null </tspan> </text> <path id="Rectangle-1" fill="#252732" stroke="#4b4e65" stroke-width="2" d="M14 224h198v58H14z" /><text id="slice:-function" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="24" y="247">slice: function</tspan> <tspan x="24" y="262">other array methods</tspan> </text><text id="[[Prototype]]" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="66" y="174"> [[Prototype]]</tspan> </text><text id="[[Prototype]]-Copy-6" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="518" y="175"> [[Prototype]]</tspan> </text><text id="[[Prototype]]-Copy" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="310" y="187"> [[Prototype]]</tspan> </text><text id="[[Prototype]]-Copy-2" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="310" y="54"> [[Prototype]]</tspan> </text><text id="[[Prototype]]" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="310" y="317"> [[Prototype]]</tspan> </text><text id="[[Prototype]]-Copy-4" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="582" y="317"> [[Prototype]]</tspan> </text><text id="[[Prototype]]-Copy-5" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="117" y="317"> [[Prototype]]</tspan> </text><text id="Array.prototype" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="13" y="216"> Array.prototype</tspan> </text> <path id="Rectangle-1" fill="#252732" stroke="#4b4e65" stroke-width="2" d="M243 224h198v58H243z" /><text id="call:-function-other" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="253" y="247">call: function</tspan> <tspan x="253" y="262">other function methods</tspan> </text><text id="Function.prototype" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="242" y="216"> Function.prototype </tspan> </text> <path id="Rectangle-1" fill="#252732" stroke="#4b4e65" stroke-width="2" d="M474 224h198v58H474z" /><text id="toFixed:-function" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="484" y="247">toFixed: function</tspan> <tspan x="484" y="262">other number methods</tspan> </text><text id="Number.prototype" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="473" y="216"> Number.prototype</tspan> </text> <path id="Line" fill="#7a7f9c" fill-rule="nonzero" d="M204.855 157.011l15.645.489-9.778 12.223-2.515-5.448-65.288 30.133-.908.419-.838-1.816.908-.419 65.288-30.133-2.514-5.448zM478.147 157.088l-2.542 5.435 64.319 30.071.905.424-.847 1.811-.906-.423-64.318-30.071-2.54 5.436L462.5 157.5l15.647-.412z" /> <path id="Rectangle-5" fill="#252732" stroke="#4b4e65" stroke-width="2" d="M48 339h117v23H48z" /><text id="[1,-2,-3]" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="71" y="354">[1, 2, 3] </tspan> </text> <path id="Rectangle-6" fill="#252732" stroke="#4b4e65" stroke-width="2" d="M243 339h198v65H243z" /><text id="function-f(args)-{" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="264" y="358">function f(args) {</tspan> <tspan x="264" y="373"> ... </tspan> <tspan x="264" y="388">}</tspan> </text> <path id="Rectangle-7" fill="#252732" stroke="#4b4e65" stroke-width="2" d="M541 339h69v23h-69z" /><text id="5" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="573" y="355">5</tspan> </text> <path id="Line-4" fill="#7a7f9c" fill-rule="nonzero" d="M299.5 290.5l7 14h-6v28h-2v-28h-6l7-14z" /> <path id="Line-5" fill="#7a7f9c" fill-rule="nonzero" d="M576.5 290.5l7 14h-6v28h-2v-28h-6l7-14z" /> <path id="Line-6" fill="#7a7f9c" fill-rule="nonzero" d="M106.5 290.5l7 14h-6v28h-2v-28h-6l7-14z" /> </g> </g> </svg> <p>Let’s check the prototypes manually:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">arr</span> = [<span style="color: #b5cea8;">1</span>, <span style="color: #b5cea8;">2</span>, <span style="color: #b5cea8;">3</span>]; </div><br> <div><span style="color: #6a9955;">// it inherits from Array.prototype?</span></div> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>( <span style="color: #9cdcfe;">arr</span>.<span style="color: #9cdcfe;">__proto__</span> === <span style="color: #4ec9b0;">Array</span>.<span style="color: #4fc1ff;">prototype</span> ); <span style="color: #6a9955;">// true</span> </div><br> <div><span style="color: #6a9955;">// then from Object.prototype?</span></div> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>( <span style="color: #9cdcfe;">arr</span>.<span style="color: #9cdcfe;">__proto__</span>.<span style="color: #9cdcfe;">__proto__</span> === <span style="color: #4ec9b0;">Object</span>.<span style="color: #4fc1ff;">prototype</span> ); <span style="color: #6a9955;">// true</span> </div><br> <div><span style="color: #6a9955;">// and null on the top.</span></div> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>( <span style="color: #9cdcfe;">arr</span>.<span style="color: #9cdcfe;">__proto__</span>.<span style="color: #9cdcfe;">__proto__</span>.<span style="color: #9cdcfe;">__proto__</span> ); <span style="color: #6a9955;">// null</span> </div> </div> </div> <p>Some methods in prototypes may overlap, for instance, Array.prototype has its own toString that lists comma-delimited elements:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">arr</span> = [<span style="color: #b5cea8;">1</span>, <span style="color: #b5cea8;">2</span>, <span style="color: #b5cea8;">3</span>] </div> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #9cdcfe;">arr</span>); <span style="color: #6a9955;">// 1,2,3 &lt;-- the result of Array.prototype.toString</span> </div> </div> </div> <p>As we’ve seen before, Object.prototype has toString as well, but Array.prototype is closer in the chain, so the array variant is used.</p> <svg xmlns="http://www.w3.org/2000/svg" width="209" height="316" viewBox="0 0 209 316"> <defs> <style> @import url(https://fonts.googleapis.com/css?family=Open+Sans:bold,italic,bolditalic%7CPT+Mono); @font-face { font-family: 'PT Mono'; font-weight: 700; font-style: normal; src: local('PT MonoBold'), url(/font/PTMonoBold.woff2) format('woff2'), url(/font/PTMonoBold.woff) format('woff'), url(/font/PTMonoBold.ttf) format('truetype') } </style> </defs> <g id="inheritance" fill="none" fill-rule="evenodd" stroke="none" stroke-width="1"> <g id="native-prototypes-array-tostring.svg"> <path id="Rectangle-1" fill="#252732" stroke="#4b4e65" stroke-width="2" d="M17 156h168v58H17z" /><text id="toString:-function" font-family="PTMono-Bold, PT Mono" font-size="14" font-weight="bold"> <tspan x="27" y="179" fill="#7a7f9c">toString: function</tspan> <tspan x="27" y="194" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-weight="normal">... </tspan> </text><text id="Array.prototype" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="16" y="148"> Array.prototype</tspan> </text> <path id="Rectangle-1" fill="#252732" stroke="#4b4e65" stroke-width="2" d="M17 23h168v58H17z" /><text id="toString:-function" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="27" y="46">toString: function</tspan> <tspan x="27" y="61">...</tspan> </text><text id="Object.prototype" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="16" y="15"> Object.prototype</tspan> </text> <path id="Rectangle-1" fill="#252732" stroke="#4b4e65" stroke-width="2" d="M17 273h168v28H17z" /> <path id="Line" fill="#7a7f9c" fill-rule="nonzero" d="M76.5 222.5l7 14h-6v28h-2v-28h-6l7-14z" /> <text id="[[Prototype]]" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="86" y="244"> [[Prototype]]</tspan> </text> <path id="Line-2" fill="#7a7f9c" fill-rule="nonzero" d="M76.5 90.5l7 14h-6v28h-2v-28h-6l7-14z" /> <text id="[[Prototype]]" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="86" y="112"> [[Prototype]]</tspan> </text><text id="[1,-2,-3]" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="41" y="291">[1, 2, 3] </tspan> </text> </g> </g> </svg> <p>Other built-in objects also work the same way. Even functions – they are objects of a built-in Function constructor, and their methods (call/apply and others) are taken from Function.prototype. Functions have their own toString too.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function</span> <span style="color: #dcdcaa;">f</span>() {} </div><br> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #dcdcaa;">f</span>.<span style="color: #9cdcfe;">__proto__</span> == <span style="color: #4ec9b0;">Function</span>.<span style="color: #4fc1ff;">prototype</span>); <span style="color: #6a9955;">// true</span> </div> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #dcdcaa;">f</span>.<span style="color: #9cdcfe;">__proto__</span>.<span style="color: #9cdcfe;">__proto__</span> == <span style="color: #4ec9b0;">Object</span>.<span style="color: #4fc1ff;">prototype</span>); <span style="color: #6a9955;">// true, inherit from objects</span> </div> </div> </div> </li> <li> <h3>Primitives</h3> <ol> <li>Strings, numbers, and booleans are not objects, but temporary wrapper objects can be created when we try to access their properties.</li> <li>These wrapper objects are created using the built-in constructors String, Number, and Boolean.</li> <li>These wrapper objects provide methods and then disappear.</li> <li>The wrapper objects are created invisibly and are usually optimized out by engines, but the specification specifies this behavior.</li> <li>The methods of these wrapper objects are located in the prototypes String.prototype, Number.prototype, and Boolean.prototype.</li> </ol> <p>Values null and undefined have no object wrappers Special values null and undefined stand apart. They have no object wrappers, so methods and properties are not available for them. And there are no corresponding prototypes either.</p> </li> <li> <h3>Changing native prototypes</h3> <p>Native prototypes can be modified. For instance, if we add a method to String.prototype, it becomes available to all strings:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #4ec9b0;">String</span>.<span style="color: #4fc1ff;">prototype</span>.<span style="color: #dcdcaa;">show</span> = <span style="color: #569cd6;">function</span> () {</div> <div>&nbsp; <span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #569cd6;">this</span>); </div> <div>};</div><br> <div><span style="color: #ce9178;">"BOOM!"</span>.<span style="color: #dcdcaa;">show</span>(); <span style="color: #6a9955;">// BOOM!</span> </div> </div> </div> </li> <li> <h3>Borrowing from prototypes</h3> <p>Method borrowing is when a method from one object is copied to another object. Native prototype methods, such as Array methods, are often borrowed for use in array-like objects.</p> <p>E.g.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">obj</span> = { </div> <div>&nbsp; <span style="color: #b5cea8;">0</span><span style="color: #9cdcfe;">:</span> <span style="color: #ce9178;">"Hello"</span>, </div> <div>&nbsp; <span style="color: #b5cea8;">1</span><span style="color: #9cdcfe;">:</span> <span style="color: #ce9178;">"world!"</span>, </div> <div>&nbsp; <span style="color: #9cdcfe;">length</span><span style="color: #9cdcfe;">:</span> <span style="color: #b5cea8;">2</span>, </div> <div>};</div><br> <div><span style="color: #9cdcfe;">obj</span>.<span style="color: #9cdcfe;">join</span> = <span style="color: #4ec9b0;">Array</span>.<span style="color: #4fc1ff;">prototype</span>.<span style="color: #dcdcaa;">join</span>; </div><br> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>( <span style="color: #9cdcfe;">obj</span>.<span style="color: #dcdcaa;">join</span>(<span style="color: #ce9178;">','</span>) ); <span style="color: #6a9955;">// Hello,world!</span> </div> </div> </div> <ol> <li>Built-in methods, such as the <code>join</code> method, only care about the correct indexes and the <code>length</code> property, and do not check if an object is actually an array.</li> <li>It is possible to inherit Array methods by setting <code>obj.__proto__</code> to <code>Array.prototype</code>, but this is not possible if <code>obj</code> already inherits from another object. </li> <li>Borrowing methods is flexible and allows mixing functionalities from different objects.</li> </ol> </li> </ul> </details> </li> <li> <details> <summary>Prototype methods, objects without __proto__</summary> <ul> <li> <h3>Prototype methods, objects without __proto__</h3> <ol> <li><code>obj.__proto__</code> is considered outdated and is only meant for use in browsers.</li> <li>The modern ways to get or set a prototype are <code>Object.getPrototypeOf(obj)</code> and <code>Object.setPrototypeOf(obj, proto)</code>, respectively. </li> <li><code>__proto__</code> is still acceptable to use as a property when creating a new object, but there is also a special method for this: <code>Object.create(proto, [descriptors])</code>. </li> <li><code>Object.create</code> creates an empty object with a given prototype and optional property descriptors.</li> <li><code>Object.getPrototypeOf</code> returns the prototype of an object.</li> </ol> <p>For instance:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">animal</span> = { </div> <div>&nbsp; <span style="color: #9cdcfe;">eats</span><span style="color: #9cdcfe;">:</span> <span style="color: #569cd6;">true</span> </div> <div>};</div><br> <div><span style="color: #6a9955;">// create a new object with animal as a prototype</span></div> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">rabbit</span> = <span style="color: #4ec9b0;">Object</span>.<span style="color: #dcdcaa;">create</span>(<span style="color: #9cdcfe;">animal</span>); <span style="color: #6a9955;">// same as {__proto__: animal}</span> </div> <br> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #9cdcfe;">rabbit</span>.<span style="color: #9cdcfe;">eats</span>); <span style="color: #6a9955;">// true</span> </div><br> <div><span style="color: #6a9955;">// console.log(Object.getPrototypeOf(rabbit) === animal); // true</span> </div><br> <div><span style="color: #6a9955;">// Object.setPrototypeOf(rabbit, {}); // change the prototype of rabbit to {}</span></div> </div> </div> <p>The Object.create method is a bit more powerful, as it has an optional second argument: property descriptors.</p> <p>We can provide additional properties to the new object there, like this:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">animal</span> = { </div> <div>&nbsp; <span style="color: #9cdcfe;">eats</span><span style="color: #9cdcfe;">:</span> <span style="color: #569cd6;">true</span> </div> <div>};</div><br> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">rabbit</span> = <span style="color: #4ec9b0;">Object</span>.<span style="color: #dcdcaa;">create</span>(<span style="color: #9cdcfe;">animal</span>, { </div> <div>&nbsp; <span style="color: #9cdcfe;">jumps</span><span style="color: #9cdcfe;">:</span> {</div> <div>&nbsp; &nbsp; <span style="color: #9cdcfe;">value</span><span style="color: #9cdcfe;">:</span> <span style="color: #569cd6;">true</span> </div> <div>&nbsp; }</div> <div>});</div><br> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #9cdcfe;">rabbit</span>.<span style="color: #9cdcfe;">jumps</span>); <span style="color: #6a9955;">// true</span> </div> </div> </div> <p>We can use Object.create to perform an object cloning more powerful than copying properties in for..in:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">obj</span> = { <span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span> <span style="color: #ce9178;">"ali"</span>, <span style="color: #9cdcfe;">age</span><span style="color: #9cdcfe;">:</span> <span style="color: #b5cea8;">41</span>, <span style="color: #9cdcfe;">tall</span><span style="color: #9cdcfe;">:</span> <span style="color: #b5cea8;">180</span> } </div> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">clone</span> = <span style="color: #4ec9b0;">Object</span>.<span style="color: #dcdcaa;">create</span>( </div> <div>&nbsp; <span style="color: #4ec9b0;">Object</span>.<span style="color: #dcdcaa;">getPrototypeOf</span>(<span style="color: #9cdcfe;">obj</span>), <span style="color: #4ec9b0;">Object</span>.<span style="color: #dcdcaa;">getOwnPropertyDescriptors</span>(<span style="color: #9cdcfe;">obj</span>) </div> <div>);</div> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #9cdcfe;">clone</span>); </div> </div> </div> <p>This call makes a truly exact copy of obj, including all properties: enumerable and non-enumerable, data properties and setters/getters – everything, and with the right [[Prototype]].</p> </li> <li> <h3>"Very plain" objects</h3> <ol> <li>Assigning a value to the <code>__proto__</code> property is ignored if the value is not an object or <code>null</code>.</li> <li>This can lead to bugs if a key-value pair with a key of <code>"__proto__"</code> is not properly saved.</li> <li>This can also cause unexpected behavior if objects are stored in the object and the prototype is changed as a result.</li> <li>Such bugs can be difficult to notice and may even turn into vulnerabilities, especially when using JavaScript on the server-side.</li> <li>Unexpected things may also happen when assigning to <code>obj.toString</code>, as it is a built-in object method. </li> <li>One way to avoid these problems is to use the <code>Map</code> object for storage instead of plain objects. </li> </ol> <p>First, we can just switch to using Map for storage instead of plain objects, then everything’s fine:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">map</span> = <span style="color: #569cd6;">new</span> <span style="color: #4ec9b0;">Map</span>(); </div> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">key</span> = <span style="color: #dcdcaa;">prompt</span>(<span style="color: #ce9178;">"What's the key?"</span>, <span style="color: #ce9178;">"__proto__"</span>); </div> <div><span style="color: #9cdcfe;">map</span>.<span style="color: #dcdcaa;">set</span>(<span style="color: #9cdcfe;">key</span>, <span style="color: #ce9178;">"some value"</span>); </div> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #9cdcfe;">map</span>.<span style="color: #dcdcaa;">get</span>(<span style="color: #9cdcfe;">key</span>)); <span style="color: #6a9955;">// "some value" (as intended)</span> </div> </div> </div> <ol> <li>The <code>__proto__</code> property is an accessor property of <code>Object.prototype</code>, not a property of an object.</li> <li>When <code>obj.__proto__</code> is read or set, the corresponding getter or setter function is called from the object's prototype.</li> <li><code>__proto__</code> is a way to access the prototype, but it is not the prototype itself. </li> <li>To use an object as an associative array and avoid issues with the <code>__proto__</code> property, a trick can be used.</li> <li>This trick involves using an object with a null prototype.</li> <li>The null prototype can be set using <code>Object.create(null)</code>. </li> </ol> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">obj</span> = <span style="color: #4ec9b0;">Object</span>.<span style="color: #dcdcaa;">create</span>(<span style="color: #569cd6;">null</span>); </div> <div><span style="color: #6a9955;">// or: obj = { __proto__: null }</span></div> <br> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">key</span> = <span style="color: #dcdcaa;">prompt</span>(<span style="color: #ce9178;">"What's the key?"</span>, <span style="color: #ce9178;">"__proto__"</span>); </div> <div><span style="color: #9cdcfe;">obj</span>[<span style="color: #9cdcfe;">key</span>] = <span style="color: #ce9178;">"some value"</span>;</div><br> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #9cdcfe;">obj</span>[<span style="color: #9cdcfe;">key</span>]); <span style="color: #6a9955;">// "some value"</span> </div> </div> </div> <p>Object.create(null) creates an empty object without a prototype ([[Prototype]] is null):</p> <p>So, there is no inherited getter/setter for __proto__. Now it is processed as a regular data property, so the example above works right. We can call such objects “very plain” or “pure dictionary” objects, because they are even simpler than the regular plain object {...}.</p> <p>A downside is that such objects lack any built-in object methods, e.g. toString:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">obj</span> = <span style="color: #4ec9b0;">Object</span>.<span style="color: #dcdcaa;">create</span>(<span style="color: #569cd6;">null</span>); </div> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #ce9178;">`</span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">obj</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">`</span>); <span style="color: #6a9955;">// Error (no toString)</span> </div> </div> </div> <p>Note that most object-related methods are Object.something(...), like Object.keys(obj) – they are not in the prototype, so they will keep working on such objects:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">chineseDictionary</span> = <span style="color: #4ec9b0;">Object</span>.<span style="color: #dcdcaa;">create</span>(<span style="color: #569cd6;">null</span>); </div> <div><span style="color: #9cdcfe;">chineseDictionary</span>.<span style="color: #9cdcfe;">hello</span> = <span style="color: #ce9178;">"你好"</span>; </div> <div><span style="color: #9cdcfe;">chineseDictionary</span>.<span style="color: #9cdcfe;">bye</span> = <span style="color: #ce9178;">"再见"</span>; </div><br> <div><span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #4ec9b0;">Object</span>.<span style="color: #dcdcaa;">keys</span>(<span style="color: #9cdcfe;">chineseDictionary</span>)); <span style="color: #6a9955;">// hello,bye</span> </div> </div> </div> </li> <li></li> </ul> </details> </li> </ul> </details> <details class="dad"> <summary>Classes</summary> <ul> <li> <details> <summary>class basic syntax</summary> <ul> <li> <h3>The “class” syntax</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">constructor</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #6a9955;">// Usage:</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">(); </span></div> </div> </div> <p>When new User("John") is called:</p> <ol> <li>A new object is created.</li> <li>The constructor runs with the given argument and assigns it to this.name.</li> </ol> <p>…Then we can call object methods, such as user.sayHi().</p> </li> <li> <h3>What is a class?</h3> </li> <p>a class is a kind of function.</p> <p>Here, take a look:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">constructor</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">) { </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">() { </span><span style="color: #dcdcaa;">alert</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">); }</span> </div> <div><span style="color: #d4d4d4;">}</span></div><br> <div><span style="color: #6a9955;">// proof: User is a function</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">typeof</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// function</span></div> </div> </div> <p>What class User {...} construct really does is:</p> <ol> <li>Creates a function named User, that becomes the result of the class declaration. The function code is taken from the constructor method (assumed empty if we don’t write such method).</li> <li>Stores class methods, such as sayHi, in User.prototype.</li> </ol> <p>After new User object is created, when we call its method, it’s taken from the prototype, just as described in the chapter F.prototype. So the object has access to class methods.</p> <p>We can illustrate the result of class User declaration as:</p> <svg xmlns="http://www.w3.org/2000/svg" width="486" height="94" viewBox="0 0 486 94"> <defs> <style> @import url(https://fonts.googleapis.com/css?family=Open+Sans:bold,italic,bolditalic%7CPT+Mono); @font-face { font-family: 'PT Mono'; font-weight: 700; font-style: normal; src: local('PT MonoBold'), url(/font/PTMonoBold.woff2) format('woff2'), url(/font/PTMonoBold.woff) format('woff'), url(/font/PTMonoBold.ttf) format('truetype') } </style> </defs> <g id="inheritance" fill="none" fill-rule="evenodd" stroke="none" stroke-width="1"> <g id="class-user.svg"> <path id="Rectangle-1" fill="#252732" stroke="#4b4e65" stroke-width="2" d="M298 22h178v68H298z" /><text id="sayHi:-function" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="303" y="42">sayHi: function </tspan> </text> <path id="Rectangle-1-Copy-2" fill="#252732" stroke="#4b4e65" stroke-width="2" d="M8 22h178v68H8z" /><text id="User" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="17" y="15">User</tspan> </text><text id="User.prototype" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="302" y="15">User.prototype </tspan> </text> <path id="Line-Copy" fill="#7a7f9c" fill-rule="nonzero" d="M273 37l14 7-14 7v-6h-76v-2h76v-6z" /> <text id="prototype" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="203" y="32">prototype</tspan> </text><text id="constructor:-User" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="303" y="60">constructor: User </tspan> </text> <path id="constructor(name){this.name=name;}" fill="#7a7f9c" fill-rule="nonzero" d="M23.146 35.078a5.531 5.531 0 00-.693-.189 3.61 3.61 0 00-.735-.077c-.915 0-1.596.215-2.044.644-.448.43-.672 1.11-.672 2.044 0 .41.065.777.196 1.099.13.322.317.595.56.819.243.224.534.397.875.518.34.121.716.182 1.127.182.439 0 .866-.075 1.281-.224.415-.15.763-.345 1.043-.588l.49.812c-.13.112-.294.229-.49.35a4.837 4.837 0 01-1.533.602 4.962 4.962 0 01-1.015.098c-.607 0-1.141-.086-1.603-.259a3.045 3.045 0 01-1.155-.742 3.176 3.176 0 01-.7-1.162 4.525 4.525 0 01-.238-1.505c0-.588.082-1.11.245-1.568.163-.457.399-.84.707-1.148a3.08 3.08 0 011.12-.707 4.187 4.187 0 011.47-.245c.69 0 1.253.06 1.687.182.434.121.8.257 1.099.406l-.014.042v1.946h-1.008v-1.33zm3.052 2.422c0-1.13.294-2.023.882-2.681.588-.658 1.428-.987 2.52-.987.588 0 1.094.096 1.519.287.425.191.777.45 1.057.777.28.327.488.714.623 1.162.135.448.203.929.203 1.442 0 .56-.075 1.066-.224 1.519-.15.453-.369.838-.658 1.155-.29.317-.646.562-1.071.735a3.82 3.82 0 01-1.449.259c-.579 0-1.083-.096-1.512-.287a2.967 2.967 0 01-1.064-.777 3.168 3.168 0 01-.623-1.162 4.963 4.963 0 01-.203-1.442zm1.162 0c0 .327.04.653.119.98.08.327.208.62.385.882.177.261.408.471.693.63.285.159.632.238 1.043.238.747 0 1.309-.231 1.687-.693.378-.462.567-1.141.567-2.037 0-.336-.04-.665-.119-.987a2.608 2.608 0 00-.392-.875 2.066 2.066 0 00-.7-.63c-.285-.159-.632-.238-1.043-.238-.747 0-1.307.229-1.68.686-.373.457-.56 1.139-.56 2.044zm7.742-1.05a14.05 14.05 0 00-.063-1.176 4.657 4.657 0 00-.049-.364h-.938V34h1.876l.126 1.134h.07c.093-.159.217-.315.371-.469a2.91 2.91 0 011.225-.721c.252-.075.518-.112.798-.112.43 0 .81.047 1.141.14.331.093.607.259.826.497.22.238.385.56.497.966.112.406.168.922.168 1.547V41h-1.092v-3.808c0-.775-.126-1.358-.378-1.75-.252-.392-.71-.588-1.372-.588-.243 0-.478.049-.707.147a2.44 2.44 0 00-.623.385c-.187.159-.35.343-.49.553-.14.21-.243.432-.308.665V41h-1.078v-4.55zm13.23 2.66a.796.796 0 00-.35-.693 2.872 2.872 0 00-.868-.392 16.056 16.056 0 00-1.127-.273 6.502 6.502 0 01-1.127-.336 2.525 2.525 0 01-.868-.567c-.233-.238-.35-.572-.35-1.001 0-.355.077-.658.231-.91a1.94 1.94 0 01.609-.623c.252-.163.546-.285.882-.364.336-.08.686-.119 1.05-.119.653 0 1.216.082 1.687.245.471.163.847.334 1.127.511l-.448.882a11.79 11.79 0 00-1.001-.483c-.36-.154-.81-.231-1.351-.231-.205 0-.408.021-.609.063-.2.042-.383.105-.546.189a1.088 1.088 0 00-.392.329.825.825 0 00-.147.497c0 .243.117.43.35.56.233.13.523.24.868.329.345.089.721.173 1.127.252.406.08.782.194 1.127.343.345.15.635.35.868.602.233.252.35.593.35 1.022 0 .644-.254 1.176-.763 1.596-.509.42-1.272.63-2.289.63-.308 0-.611-.028-.91-.084a5.52 5.52 0 01-.84-.224 5.054 5.054 0 01-.714-.315 3.002 3.002 0 01-.532-.357l.56-.91c.112.112.261.226.448.343a4.229 4.229 0 001.337.539 3.76 3.76 0 001.484.021c.22-.042.413-.107.581-.196a1.08 1.08 0 00.399-.35.914.914 0 00.147-.525zM51.034 34H52.7v-1.386l1.092-.308V34h3.738v.938h-3.738v3.304c0 .681.166 1.185.497 1.512.331.327.805.49 1.421.49.42 0 .786-.08 1.099-.238.313-.159.595-.331.847-.518l.364.826a3.938 3.938 0 01-1.169.63 4.182 4.182 0 01-1.393.238 3.41 3.41 0 01-1.057-.161 2.426 2.426 0 01-.875-.497 2.38 2.38 0 01-.602-.861c-.15-.35-.224-.768-.224-1.253v-3.472h-1.666V34zm8.89 7v-.938h1.89v-5.124h-1.89V34h2.618l.224.91h.07c.317-.29.672-.537 1.064-.742.392-.205.859-.308 1.4-.308.317 0 .572.06.763.182.191.121.34.299.448.532.107.233.18.516.217.847.037.331.056.707.056 1.127l-.98.014c0-.597-.058-1.036-.175-1.316-.117-.28-.329-.42-.637-.42-.29 0-.55.042-.784.126a2.565 2.565 0 00-.609.308c-.173.121-.32.243-.441.364s-.21.224-.266.308v4.13h2.688V41h-5.656zm12.558-7h1.988v4.774c0 .457.028.896.084 1.316h.938V41H73.63l-.042-1.19h-.056a2.938 2.938 0 01-.966.98c-.401.252-.887.378-1.456.378-.43 0-.796-.049-1.099-.147a1.556 1.556 0 01-.749-.511c-.196-.243-.34-.567-.434-.973-.093-.406-.14-.912-.14-1.519v-3.08h-.938V34h2.03v3.794c0 .383.016.726.049 1.029.033.303.1.56.203.77.103.21.254.369.455.476.2.107.469.161.805.161.485 0 .908-.159 1.267-.476.36-.317.632-.714.819-1.19v-3.626h-.896V34zm9.464 1.078a5.531 5.531 0 00-.693-.189 3.61 3.61 0 00-.735-.077c-.915 0-1.596.215-2.044.644-.448.43-.672 1.11-.672 2.044 0 .41.065.777.196 1.099.13.322.317.595.56.819.243.224.534.397.875.518.34.121.716.182 1.127.182.439 0 .866-.075 1.281-.224.415-.15.763-.345 1.043-.588l.49.812c-.13.112-.294.229-.49.35a4.837 4.837 0 01-1.533.602 4.962 4.962 0 01-1.015.098c-.607 0-1.141-.086-1.603-.259a3.045 3.045 0 01-1.155-.742 3.176 3.176 0 01-.7-1.162 4.525 4.525 0 01-.238-1.505c0-.588.082-1.11.245-1.568.163-.457.399-.84.707-1.148a3.08 3.08 0 011.12-.707 4.187 4.187 0 011.47-.245c.69 0 1.253.06 1.687.182.434.121.8.257 1.099.406l-.014.042v1.946h-1.008v-1.33zM84.634 34H86.3v-1.386l1.092-.308V34h3.738v.938h-3.738v3.304c0 .681.166 1.185.497 1.512.331.327.805.49 1.421.49.42 0 .786-.08 1.099-.238.313-.159.595-.331.847-.518l.364.826a3.938 3.938 0 01-1.169.63 4.182 4.182 0 01-1.393.238 3.41 3.41 0 01-1.057-.161 2.426 2.426 0 01-.875-.497 2.38 2.38 0 01-.602-.861c-.15-.35-.224-.768-.224-1.253v-3.472h-1.666V34zm8.764 3.5c0-1.13.294-2.023.882-2.681.588-.658 1.428-.987 2.52-.987.588 0 1.094.096 1.519.287.425.191.777.45 1.057.777.28.327.488.714.623 1.162.135.448.203.929.203 1.442 0 .56-.075 1.066-.224 1.519-.15.453-.369.838-.658 1.155-.29.317-.646.562-1.071.735a3.82 3.82 0 01-1.449.259c-.579 0-1.083-.096-1.512-.287a2.967 2.967 0 01-1.064-.777 3.168 3.168 0 01-.623-1.162 4.963 4.963 0 01-.203-1.442zm1.162 0c0 .327.04.653.119.98.08.327.208.62.385.882.177.261.408.471.693.63.285.159.632.238 1.043.238.747 0 1.309-.231 1.687-.693.378-.462.567-1.141.567-2.037 0-.336-.04-.665-.119-.987a2.608 2.608 0 00-.392-.875 2.066 2.066 0 00-.7-.63c-.285-.159-.632-.238-1.043-.238-.747 0-1.307.229-1.68.686-.373.457-.56 1.139-.56 2.044zm7.364 3.5v-.938h1.89v-5.124h-1.89V34h2.618l.224.91h.07c.317-.29.672-.537 1.064-.742.392-.205.859-.308 1.4-.308.317 0 .572.06.763.182.191.121.34.299.448.532.107.233.18.516.217.847.037.331.056.707.056 1.127l-.98.014c0-.597-.058-1.036-.175-1.316-.117-.28-.329-.42-.637-.42-.29 0-.55.042-.784.126a2.565 2.565 0 00-.609.308c-.173.121-.32.243-.441.364s-.21.224-.266.308v4.13h2.688V41h-5.656zm13.524 2.968a6.964 6.964 0 01-1.757-.707 5.036 5.036 0 01-1.428-1.225c-.406-.504-.728-1.12-.966-1.848s-.357-1.591-.357-2.59c0-.99.121-1.855.364-2.597s.57-1.372.98-1.89c.41-.518.889-.933 1.435-1.246a6.005 6.005 0 011.729-.665l.35.882a7.086 7.086 0 00-1.512.623 3.928 3.928 0 00-1.183 1.022c-.331.425-.588.952-.77 1.582-.182.63-.273 1.393-.273 2.289 0 .905.11 1.678.329 2.317.22.64.509 1.171.868 1.596.36.425.76.756 1.204.994.443.238.889.404 1.337.497l-.35.966zm3.654-7.518a14.051 14.051 0 00-.063-1.176 4.657 4.657 0 00-.049-.364h-.938V34h1.876l.126 1.134h.07c.093-.159.217-.315.371-.469a2.91 2.91 0 011.225-.721c.252-.075.518-.112.798-.112.43 0 .81.047 1.141.14.331.093.607.259.826.497.22.238.385.56.497.966.112.406.168.922.168 1.547V41h-1.092v-3.808c0-.775-.126-1.358-.378-1.75-.252-.392-.71-.588-1.372-.588-.243 0-.478.049-.707.147a2.44 2.44 0 00-.623.385c-.187.159-.35.343-.49.553-.14.21-.243.432-.308.665V41h-1.078v-4.55zm8.61-1.904a4.447 4.447 0 011.358-.504 7.423 7.423 0 011.484-.154c.476 0 .866.075 1.169.224.303.15.541.343.714.581.173.238.29.509.35.812.06.303.091.609.091.917 0 .355-.01.733-.028 1.134-.019.401-.033.803-.042 1.204 0 .467.028.91.084 1.33h.938V41h-1.862l-.126-1.05h-.07c-.056.084-.14.191-.252.322-.112.13-.259.259-.441.385a2.749 2.749 0 01-1.589.469c-.69 0-1.237-.177-1.638-.532-.401-.355-.602-.84-.602-1.456 0-.476.105-.873.315-1.19.21-.317.511-.56.903-.728.392-.168.866-.266 1.421-.294a9.544 9.544 0 011.869.112c.047-.43.054-.786.021-1.071-.033-.285-.107-.511-.224-.679a.938.938 0 00-.49-.357 2.482 2.482 0 00-.777-.105c-.42 0-.821.058-1.204.175-.383.117-.723.236-1.022.357l-.35-.812zm2.058 5.642c.261 0 .504-.042.728-.126a2.22 2.22 0 00.588-.322 2.133 2.133 0 00.672-.868v-.98a7.92 7.92 0 00-1.344-.126c-.41 0-.765.044-1.064.133-.299.089-.532.226-.7.413-.168.187-.252.43-.252.728 0 .308.105.576.315.805.21.229.562.343 1.057.343zm8.498.812v-4.662c0-.196-.007-.385-.021-.567a1.9 1.9 0 00-.098-.49.786.786 0 00-.224-.343.57.57 0 00-.385-.126c-.317 0-.586.13-.805.392-.22.261-.385.588-.497.98V41h-1.064v-7h.728l.21.854h.056c.093-.14.184-.273.273-.399.089-.126.191-.236.308-.329.117-.093.254-.166.413-.217.159-.051.36-.077.602-.077.14 0 .285.021.434.063.15.042.287.107.413.196.126.089.236.208.329.357.093.15.154.331.182.546.215-.364.455-.649.721-.854.266-.205.632-.308 1.099-.308.308 0 .558.051.749.154.191.103.34.25.448.441.107.191.182.42.224.686.042.266.063.562.063.889V41h-1.064v-4.76c0-.196-.01-.38-.028-.553a1.764 1.764 0 00-.105-.455.752.752 0 00-.21-.308.536.536 0 00-.357-.112c-.327 0-.602.13-.826.392-.224.261-.392.635-.504 1.12V41h-1.064zm12.138-.882c-.168.15-.366.29-.595.42a4.39 4.39 0 01-.749.336c-.27.093-.553.166-.847.217-.294.051-.59.077-.889.077-.56 0-1.055-.086-1.484-.259a2.858 2.858 0 01-1.078-.742 3.234 3.234 0 01-.658-1.155 4.767 4.767 0 01-.224-1.512c0-.588.082-1.11.245-1.568.163-.457.399-.84.707-1.148a3.08 3.08 0 011.12-.707 4.187 4.187 0 011.47-.245c.392 0 .78.051 1.162.154.383.103.721.296 1.015.581.294.285.52.677.679 1.176.159.5.215 1.146.168 1.939h-5.418c0 .84.226 1.468.679 1.883.453.415 1.057.623 1.813.623.252 0 .502-.03.749-.091.247-.06.483-.133.707-.217a3.72 3.72 0 00.595-.28c.173-.103.306-.196.399-.28l.434.798zm-2.954-5.362c-.308 0-.6.033-.875.098a1.995 1.995 0 00-.728.329c-.21.154-.383.355-.518.602s-.222.553-.259.917h4.354c-.047-.616-.245-1.094-.595-1.435-.35-.34-.81-.511-1.379-.511zm5.95 8.246a4.965 4.965 0 001.337-.497 4.15 4.15 0 001.204-.994c.36-.425.649-.957.868-1.596.22-.64.329-1.412.329-2.317 0-.896-.091-1.659-.273-2.289-.182-.63-.439-1.157-.77-1.582a3.928 3.928 0 00-1.183-1.022 7.086 7.086 0 00-1.512-.623l.35-.882c.607.13 1.183.352 1.729.665a4.984 4.984 0 011.435 1.246c.41.518.737 1.148.98 1.89s.364 1.608.364 2.597c0 .999-.119 1.862-.357 2.59-.238.728-.56 1.344-.966 1.848a5.036 5.036 0 01-1.428 1.225 6.964 6.964 0 01-1.757.707l-.35-.966zm17.878-2.45c0-.401-.068-.749-.203-1.043a2.44 2.44 0 00-.504-.735c-.2-.196-.415-.34-.644-.434a1.641 1.641 0 00-.609-.14v-.98c.177 0 .38-.04.609-.119.229-.08.443-.21.644-.392.2-.182.369-.418.504-.707.135-.29.203-.649.203-1.078v-1.428c0-.336.054-.644.161-.924a2.22 2.22 0 01.448-.728c.191-.205.42-.366.686-.483.266-.117.558-.175.875-.175h2.03v.98h-1.54c-.588 0-.996.14-1.225.42-.229.28-.343.695-.343 1.246v1.358c0 .383-.07.723-.21 1.022a2.7 2.7 0 01-1.106 1.225c-.205.117-.373.184-.504.203v.084c.121.019.285.091.49.217.205.126.406.299.602.518.196.22.366.478.511.777.145.299.217.63.217.994v1.344c0 .57.121.99.364 1.26s.649.406 1.218.406h1.526v.98h-2.03c-.653 0-1.178-.194-1.575-.581-.397-.387-.595-.959-.595-1.715v-1.372zM34.234 49H35.9v-1.386l1.092-.308V49h3.738v.938h-3.738v3.304c0 .681.166 1.185.497 1.512.331.327.805.49 1.421.49.42 0 .786-.08 1.099-.238.313-.159.595-.331.847-.518l.364.826a3.938 3.938 0 01-1.169.63 4.182 4.182 0 01-1.393.238 3.41 3.41 0 01-1.057-.161 2.426 2.426 0 01-.875-.497 2.38 2.38 0 01-.602-.861c-.15-.35-.224-.768-.224-1.253v-3.472h-1.666V49zm8.022-2.8h2.184v3.668h.07c.29-.327.625-.581 1.008-.763.383-.182.859-.273 1.428-.273.448 0 .838.047 1.169.14.331.093.602.257.812.49.21.233.366.553.469.959.103.406.154.922.154 1.547V56h-1.092v-3.822c0-.401-.023-.751-.07-1.05a1.829 1.829 0 00-.273-.749c-.135-.2-.32-.352-.553-.455-.233-.103-.532-.154-.896-.154-.252 0-.5.044-.742.133-.243.089-.464.21-.665.364-.2.154-.373.34-.518.56-.145.22-.245.46-.301.721V56h-1.078v-8.862h-1.106V46.2zM52.07 56v-.938h2.436v-5.124H52.07V49h3.556v6.062h2.38V56H52.07zm2.058-8.988c0-.252.084-.469.252-.651a.838.838 0 01.644-.273c.27 0 .497.091.679.273a.889.889 0 01.273.651.806.806 0 01-.273.616.963.963 0 01-.679.252.872.872 0 01-.644-.252.838.838 0 01-.252-.616zm11.004 7.098a.796.796 0 00-.35-.693 2.872 2.872 0 00-.868-.392 16.056 16.056 0 00-1.127-.273 6.502 6.502 0 01-1.127-.336 2.525 2.525 0 01-.868-.567c-.233-.238-.35-.572-.35-1.001 0-.355.077-.658.231-.91a1.94 1.94 0 01.609-.623c.252-.163.546-.285.882-.364.336-.08.686-.119 1.05-.119.653 0 1.216.082 1.687.245.471.163.847.334 1.127.511l-.448.882a11.79 11.79 0 00-1.001-.483c-.36-.154-.81-.231-1.351-.231-.205 0-.408.021-.609.063-.2.042-.383.105-.546.189a1.088 1.088 0 00-.392.329.825.825 0 00-.147.497c0 .243.117.43.35.56.233.13.523.24.868.329.345.089.721.173 1.127.252.406.08.782.194 1.127.343.345.15.635.35.868.602.233.252.35.593.35 1.022 0 .644-.254 1.176-.763 1.596-.509.42-1.272.63-2.289.63-.308 0-.611-.028-.91-.084a5.52 5.52 0 01-.84-.224 5.054 5.054 0 01-.714-.315 3.002 3.002 0 01-.532-.357l.56-.91c.112.112.261.226.448.343a4.229 4.229 0 001.337.539 3.76 3.76 0 001.484.021c.22-.042.413-.107.581-.196a1.08 1.08 0 00.399-.35.914.914 0 00.147-.525zm5.53 1.12c0-.299.084-.53.252-.693.168-.163.392-.245.672-.245.299 0 .532.082.7.245.168.163.252.394.252.693 0 .27-.084.495-.252.672-.168.177-.401.266-.7.266-.28 0-.504-.089-.672-.266a.938.938 0 01-.252-.672zm6.44-3.78a14.05 14.05 0 00-.063-1.176 4.657 4.657 0 00-.049-.364h-.938V49h1.876l.126 1.134h.07c.093-.159.217-.315.371-.469a2.91 2.91 0 011.225-.721c.252-.075.518-.112.798-.112.43 0 .81.047 1.141.14.331.093.607.259.826.497.22.238.385.56.497.966.112.406.168.922.168 1.547V56h-1.092v-3.808c0-.775-.126-1.358-.378-1.75-.252-.392-.71-.588-1.372-.588-.243 0-.478.049-.707.147a2.44 2.44 0 00-.623.385c-.187.159-.35.343-.49.553-.14.21-.243.432-.308.665V56h-1.078v-4.55zm8.61-1.904a4.447 4.447 0 011.358-.504 7.423 7.423 0 011.484-.154c.476 0 .866.075 1.169.224.303.15.541.343.714.581.173.238.29.509.35.812.06.303.091.609.091.917 0 .355-.01.733-.028 1.134-.019.401-.033.803-.042 1.204 0 .467.028.91.084 1.33h.938V56h-1.862l-.126-1.05h-.07c-.056.084-.14.191-.252.322-.112.13-.259.259-.441.385a2.749 2.749 0 01-1.589.469c-.69 0-1.237-.177-1.638-.532-.401-.355-.602-.84-.602-1.456 0-.476.105-.873.315-1.19.21-.317.511-.56.903-.728.392-.168.866-.266 1.421-.294a9.544 9.544 0 011.869.112c.047-.43.054-.786.021-1.071-.033-.285-.107-.511-.224-.679a.938.938 0 00-.49-.357 2.482 2.482 0 00-.777-.105c-.42 0-.821.058-1.204.175-.383.117-.723.236-1.022.357l-.35-.812zm2.058 5.642c.261 0 .504-.042.728-.126a2.22 2.22 0 00.588-.322 2.133 2.133 0 00.672-.868v-.98a7.92 7.92 0 00-1.344-.126c-.41 0-.765.044-1.064.133-.299.089-.532.226-.7.413-.168.187-.252.43-.252.728 0 .308.105.576.315.805.21.229.562.343 1.057.343zm8.498.812v-4.662c0-.196-.007-.385-.021-.567a1.9 1.9 0 00-.098-.49.786.786 0 00-.224-.343.57.57 0 00-.385-.126c-.317 0-.586.13-.805.392-.22.261-.385.588-.497.98V56h-1.064v-7h.728l.21.854h.056c.093-.14.184-.273.273-.399.089-.126.191-.236.308-.329.117-.093.254-.166.413-.217.159-.051.36-.077.602-.077.14 0 .285.021.434.063.15.042.287.107.413.196.126.089.236.208.329.357.093.15.154.331.182.546.215-.364.455-.649.721-.854.266-.205.632-.308 1.099-.308.308 0 .558.051.749.154.191.103.34.25.448.441.107.191.182.42.224.686.042.266.063.562.063.889V56h-1.064v-4.76c0-.196-.01-.38-.028-.553a1.764 1.764 0 00-.105-.455.752.752 0 00-.21-.308.536.536 0 00-.357-.112c-.327 0-.602.13-.826.392-.224.261-.392.635-.504 1.12V56h-1.064zm12.138-.882c-.168.15-.366.29-.595.42a4.39 4.39 0 01-.749.336c-.27.093-.553.166-.847.217-.294.051-.59.077-.889.077-.56 0-1.055-.086-1.484-.259a2.858 2.858 0 01-1.078-.742 3.234 3.234 0 01-.658-1.155 4.767 4.767 0 01-.224-1.512c0-.588.082-1.11.245-1.568.163-.457.399-.84.707-1.148a3.08 3.08 0 011.12-.707 4.187 4.187 0 011.47-.245c.392 0 .78.051 1.162.154.383.103.721.296 1.015.581.294.285.52.677.679 1.176.159.5.215 1.146.168 1.939h-5.418c0 .84.226 1.468.679 1.883.453.415 1.057.623 1.813.623.252 0 .502-.03.749-.091.247-.06.483-.133.707-.217a3.72 3.72 0 00.595-.28c.173-.103.306-.196.399-.28l.434.798zm-2.954-5.362c-.308 0-.6.033-.875.098a1.995 1.995 0 00-.728.329c-.21.154-.383.355-.518.602s-.222.553-.259.917h4.354c-.047-.616-.245-1.094-.595-1.435-.35-.34-.81-.511-1.379-.511zm13.3-.154h6.496v1.008h-6.496v-1.008zm0 2.296h6.496v1.008h-6.496v-1.008zm17.15-.448a14.051 14.051 0 00-.063-1.176 4.657 4.657 0 00-.049-.364h-.938V49h1.876l.126 1.134h.07c.093-.159.217-.315.371-.469a2.91 2.91 0 011.225-.721c.252-.075.518-.112.798-.112.43 0 .81.047 1.141.14.331.093.607.259.826.497.22.238.385.56.497.966.112.406.168.922.168 1.547V56h-1.092v-3.808c0-.775-.126-1.358-.378-1.75-.252-.392-.71-.588-1.372-.588-.243 0-.478.049-.707.147a2.44 2.44 0 00-.623.385c-.187.159-.35.343-.49.553-.14.21-.243.432-.308.665V56h-1.078v-4.55zm8.61-1.904a4.447 4.447 0 011.358-.504 7.423 7.423 0 011.484-.154c.476 0 .866.075 1.169.224.303.15.541.343.714.581.173.238.29.509.35.812.06.303.091.609.091.917 0 .355-.01.733-.028 1.134-.019.401-.033.803-.042 1.204 0 .467.028.91.084 1.33h.938V56h-1.862l-.126-1.05h-.07c-.056.084-.14.191-.252.322-.112.13-.259.259-.441.385a2.749 2.749 0 01-1.589.469c-.69 0-1.237-.177-1.638-.532-.401-.355-.602-.84-.602-1.456 0-.476.105-.873.315-1.19.21-.317.511-.56.903-.728.392-.168.866-.266 1.421-.294a9.544 9.544 0 011.869.112c.047-.43.054-.786.021-1.071-.033-.285-.107-.511-.224-.679a.938.938 0 00-.49-.357 2.482 2.482 0 00-.777-.105c-.42 0-.821.058-1.204.175-.383.117-.723.236-1.022.357l-.35-.812zm2.058 5.642c.261 0 .504-.042.728-.126a2.22 2.22 0 00.588-.322 2.133 2.133 0 00.672-.868v-.98a7.92 7.92 0 00-1.344-.126c-.41 0-.765.044-1.064.133-.299.089-.532.226-.7.413-.168.187-.252.43-.252.728 0 .308.105.576.315.805.21.229.562.343 1.057.343zm8.498.812v-4.662c0-.196-.007-.385-.021-.567a1.9 1.9 0 00-.098-.49.786.786 0 00-.224-.343.57.57 0 00-.385-.126c-.317 0-.586.13-.805.392-.22.261-.385.588-.497.98V56h-1.064v-7h.728l.21.854h.056c.093-.14.184-.273.273-.399.089-.126.191-.236.308-.329.117-.093.254-.166.413-.217.159-.051.36-.077.602-.077.14 0 .285.021.434.063.15.042.287.107.413.196.126.089.236.208.329.357.093.15.154.331.182.546.215-.364.455-.649.721-.854.266-.205.632-.308 1.099-.308.308 0 .558.051.749.154.191.103.34.25.448.441.107.191.182.42.224.686.042.266.063.562.063.889V56h-1.064v-4.76c0-.196-.01-.38-.028-.553a1.764 1.764 0 00-.105-.455.752.752 0 00-.21-.308.536.536 0 00-.357-.112c-.327 0-.602.13-.826.392-.224.261-.392.635-.504 1.12V56h-1.064zm12.138-.882c-.168.15-.366.29-.595.42a4.39 4.39 0 01-.749.336c-.27.093-.553.166-.847.217-.294.051-.59.077-.889.077-.56 0-1.055-.086-1.484-.259a2.858 2.858 0 01-1.078-.742 3.234 3.234 0 01-.658-1.155 4.767 4.767 0 01-.224-1.512c0-.588.082-1.11.245-1.568.163-.457.399-.84.707-1.148a3.08 3.08 0 011.12-.707 4.187 4.187 0 011.47-.245c.392 0 .78.051 1.162.154.383.103.721.296 1.015.581.294.285.52.677.679 1.176.159.5.215 1.146.168 1.939h-5.418c0 .84.226 1.468.679 1.883.453.415 1.057.623 1.813.623.252 0 .502-.03.749-.091.247-.06.483-.133.707-.217a3.72 3.72 0 00.595-.28c.173-.103.306-.196.399-.28l.434.798zm-2.954-5.362c-.308 0-.6.033-.875.098a1.995 1.995 0 00-.728.329c-.21.154-.383.355-.518.602s-.222.553-.259.917h4.354c-.047-.616-.245-1.094-.595-1.435-.35-.34-.81-.511-1.379-.511zm7.154 5.474c0-.28.091-.506.273-.679.182-.173.418-.259.707-.259.355 0 .63.124.826.371.196.247.294.595.294 1.043a2.36 2.36 0 01-.637 1.659 2.465 2.465 0 01-.588.462c-.21.117-.404.203-.581.259l-.35-.546c.336-.13.625-.317.868-.56.243-.243.364-.537.364-.882-.13.028-.233.042-.308.042-.27 0-.483-.077-.637-.231-.154-.154-.231-.38-.231-.679zm.126-5.502c0-.299.084-.53.252-.693.168-.163.392-.245.672-.245.299 0 .532.082.7.245.168.163.252.394.252.693 0 .27-.084.495-.252.672-.168.177-.401.266-.7.266-.28 0-.504-.089-.672-.266a.938.938 0 01-.252-.672zM22.32 71.924c0 .756-.198 1.328-.595 1.715-.397.387-.922.581-1.575.581h-2.03v-.98h1.526c.57 0 .975-.135 1.218-.406.243-.27.364-.69.364-1.26V70.23c0-.364.07-.695.21-.994.14-.299.308-.558.504-.777.196-.22.397-.392.602-.518.205-.126.373-.198.504-.217v-.084c-.13-.019-.299-.086-.504-.203a2.7 2.7 0 01-1.106-1.225c-.14-.299-.21-.64-.21-1.022v-1.358c0-.55-.114-.966-.343-1.246-.229-.28-.637-.42-1.225-.42h-1.54v-.98h2.03c.317 0 .609.058.875.175.266.117.495.278.686.483.191.205.34.448.448.728.107.28.161.588.161.924v1.428c0 .43.068.789.203 1.078.135.29.303.525.504.707.2.182.415.313.644.392.229.08.432.119.609.119v.98c-.177 0-.38.047-.609.14a2.011 2.011 0 00-.644.434 2.44 2.44 0 00-.504.735c-.135.294-.203.642-.203 1.043v1.372z" /> </g> </g> </svg> <li> <h3>difference between class and ordinary function</h3> <p>difference in the resulting prototypes and objects </p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// class function</span></div> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">constructor</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">) { </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">() { </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">); }</span></div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"ali"</span><span style="color: #d4d4d4;">)</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">Object</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">getOwnPropertyNames</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// ["name"]</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">Object</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">getOwnPropertyNames</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">__proto__</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// [ "constructor", "sayHi" ]</span></div> <div><span style="color: #c586c0;">try</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">returnedValue</span><span style="color: #d4d4d4;"> = </span><span style="color: #4ec9b0;">User</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"soso"</span><span style="color: #d4d4d4;">)</span> </div> <div><span style="color: #d4d4d4;">} </span><span style="color: #c586c0;">catch</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">error</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">error</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">message</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// class constructors must be invoked with 'new'</span></div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"-"</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">repeat</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">50</span><span style="color: #d4d4d4;">));</span> </div><br><br><br> <div><span style="color: #6a9955;">// ordinary function </span></div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Human</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">name</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> () {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"something"</span> </div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">human</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Human</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"hema"</span><span style="color: #d4d4d4;">)</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">Object</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">getOwnPropertyNames</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">human</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// Array [ "name", "sayHi" ]</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">Object</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">getOwnPropertyNames</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">human</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">__proto__</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// Array [ "constructor" ]</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">returnedValue</span><span style="color: #d4d4d4;"> = </span><span style="color: #4ec9b0;">Human</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"soso"</span><span style="color: #d4d4d4;">)</span> </div> </div> </div> <p>interal difference</p> <ol> <li>First, a function created by class is labelled by a special internal property [[IsClassConstructor]]: true. So it’s not entirely the same as creating it manually.</li> <li>The language checks for that property in a variety of places. For example, unlike a regular function, it must be called with new</li> <li>Also, a string representation of a class constructor in most JavaScript engines starts with the “class…”</li> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">constructor</span><span style="color: #d4d4d4;">() {}</span></div> <div><span style="color: #d4d4d4;">&nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; </span></div> <div><span style="color: #d4d4d4;">&nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">`</span><span style="color: #569cd6;">${</span><span style="color: #4ec9b0;">User</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">`</span><span style="color: #d4d4d4;">); </span></div> <div><span style="color: #d4d4d4;">&nbsp; </span><span style="color: #6a9955;">/*</span> </div> <div><span style="color: #6a9955;">&nbsp; &nbsp;class User {</span></div> <div><span style="color: #6a9955;">&nbsp; &nbsp; constructor() {}</span></div> <div><span style="color: #6a9955;">&nbsp; }</span></div> <div><span style="color: #6a9955;">&nbsp; &nbsp;*/</span> </div> </div> </div> <li>Class methods are non-enumerable. A class definition sets enumerable flag to false for all methods in the "prototype".</li> <li>Classes always use strict. All code inside the class construct is automatically in strict mode.</li> </ol> </li> <li> <h3>Class Expression</h3> <p>Here’s an example of a class expression:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">constructor</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">name</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Hello"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"ali"</span><span style="color: #d4d4d4;">)</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// {name:"ali"}</span></div><br> <div><span style="color: #6a9955;">// If a class expression has a name, it’s visible inside the class only:</span></div> <div><span style="color: #4ec9b0;">User</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">MyClass</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">MyClass</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// MyClass name is visible only inside the class</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #d4d4d4;">().</span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">(); </span><span style="color: #6a9955;">// works, shows MyClass definition</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">MyClass</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// error, MyClass name isn't visible outside of the class</span></div> </div> </div> </li> <li> <h3>Getters/setters</h3> <p>Just like literal objects, classes may include getters/setters, computed properties etc.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// Here’s an example for user.name implemented using get/set:</span></div> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">constructor</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;">// invokes the setter</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">get</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">_name</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">set</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">length</span><span style="color: #d4d4d4;"> &lt; </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Name is too short."</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">_name</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"ali"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">);</span> </div> </div> </div> </li> <li> <h3>Computed names […]</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// Here’s an example with a computed method name using brackets [...]:</span></div> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; [</span><span style="color: #ce9178;">'say'</span><span style="color: #d4d4d4;"> + </span><span style="color: #ce9178;">'Hi'</span><span style="color: #d4d4d4;">]() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Hello"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; </span></div> <div><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #d4d4d4;">().</span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">();</span> </div> </div> </div> </li> <li> <h3>Class fields</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">//“Class fields” is a syntax that allows to add any properties.For instance, let’s add name property to class User:</span> </div> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;">;</span> </div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">`Hello, </span><span style="color: #569cd6;">${this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">!`</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #d4d4d4;">().</span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">(); </span><span style="color: #6a9955;">// Hello, John!</span></div> </div> </div> <p>The important difference of class fields is that they are set on individual objects, not User.prototype:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #d4d4d4;">();</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// John</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">User</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">prototype</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// undefined</span></div><br><br> <div><span style="color: #6a9955;">// We can also assign values using more complex expressions and function calls:</span></div> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">AnotherUser</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">prompt</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Name, please?"</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">"John"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">AnotherUser</span><span style="color: #d4d4d4;">();</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// John </span></div> </div> </div> </li> <li> <h3>Making bound methods with class fields</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// if an object method is passed around and called in another context, this won’t be a reference to its object any more.For instance, this code will show undefined:</span></div> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Button</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">constructor</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">click</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">button</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Button</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"hello"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #dcdcaa;">setTimeout</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">button</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">click</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">1000</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// undefined</span></div> <div><span style="color: #6a9955;">//The problem is called "losing this".</span> </div> </div> </div> <p>There are two approaches to fixing it, as discussed in the chapter Function binding:</p> <ol> <li>Pass a wrapper-function, such as setTimeout(() => button.click(), 1000).</li> <li>Bind the method to object, e.g. in the constructor. </li> <li>Class fields provide another, quite elegant syntax: <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Button</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; </span><span style="color: #569cd6;">constructor</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; </span><span style="color: #dcdcaa;">click</span><span style="color: #d4d4d4;"> = () </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; }</span></div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">button</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Button</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"hello"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #dcdcaa;">setTimeout</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">button</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">click</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">1000</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// hello</span> </div> </div> </div> </li> </ol> <p>The class field click = () => {...} is created on a per-object basis, there’s a separate function for each Button object, with this inside it referencing that object. We can pass button.click around anywhere, and the value of this will always be correct.</p> </li> </ul> </details> </li> <li> <details> <summary>class inheritance</summary> <ul> <li> <h3>The “extends” keyword</h3> <p>Let’s say we have class Animal:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Animal</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">constructor</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">speed</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">run</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">speed</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">speed</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">speed</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">`</span><span style="color: #569cd6;">${this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;"> runs with speed </span><span style="color: #569cd6;">${this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">speed</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">.`</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">stop</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">speed</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">`</span><span style="color: #569cd6;">${this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;"> stands still.`</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">animal</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Animal</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"My animal"</span><span style="color: #d4d4d4;">);</span> </div><br><br> <div><span style="color: #6a9955;">// Let’s create class Rabbit that inherits from Animal:</span> </div> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Rabbit</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">extends</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Animal</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">hide</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">`</span><span style="color: #569cd6;">${this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;"> hides!`</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">rabbit</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Rabbit</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"White Rabbit"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">rabbit</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">run</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">5</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// White Rabbit runs with speed 5.</span></div> <div><span style="color: #9cdcfe;">rabbit</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">hide</span><span style="color: #d4d4d4;">(); </span><span style="color: #6a9955;">// White Rabbit hides!</span></div> </div> </div> <p>Object of Rabbit class have access both to Rabbit methods, such as rabbit.hide(), and also to Animal methods, such as rabbit.run().</p> <p>Internally, extends keyword works using the good old prototype mechanics. It sets Rabbit.prototype.[[Prototype]] to Animal.prototype. So, if a method is not found in Rabbit.prototype, JavaScript takes it from Animal.prototype.</p> <svg xmlns="http://www.w3.org/2000/svg" width="560" height="316" viewBox="0 0 560 316"> <defs> <style> @import url(https://fonts.googleapis.com/css?family=Open+Sans:bold,italic,bolditalic%7CPT+Mono); @font-face { font-family: 'PT Mono'; font-weight: 700; font-style: normal; src: local('PT MonoBold'), url(/font/PTMonoBold.woff2) format('woff2'), url(/font/PTMonoBold.woff) format('woff'), url(/font/PTMonoBold.ttf) format('truetype') } </style> </defs> <g id="inheritance" fill="none" fill-rule="evenodd" stroke="none" stroke-width="1"> <g id="animal-rabbit-extends.svg"> <path id="Rectangle-1" fill="#252732" stroke="#4b4e65" stroke-width="2" d="M242 23h185v64H242z" /><text id="constructor:-Animal" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="252" y="42"> constructor: Animal </tspan> <tspan x="252" y="57">run: function</tspan> <tspan x="252" y="72">stop: function</tspan> </text> <path id="Rectangle-1-Copy" fill="#252732" stroke="#4b4e65" stroke-width="2" d="M242 286h185v28H242z" /><text id="Animal.prototype" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="241" y="15"> Animal.prototype</tspan> </text> <path id="Rectangle-1-Copy-4" fill="#252732" stroke="#4b4e65" stroke-width="2" d="M242 166h185v48H242z" /><text id="constructor:-Rabbit" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="252" y="185"> constructor: Rabbit </tspan> <tspan x="252" y="200">hide: function</tspan> </text><text id="Rabbit.prototype" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="241" y="158"> Rabbit.prototype</tspan> </text> <path id="Rectangle-1-Copy-2" fill="#252732" stroke="#4b4e65" stroke-width="2" d="M11 23h105v48H11z" /><text id="Animal" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="10" y="15">Animal </tspan> </text> <path id="Rectangle-1-Copy-3" fill="#252732" stroke="#4b4e65" stroke-width="2" d="M11 166h105v48H11z" /><text id="Rabbit" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="10" y="158">Rabbit </tspan> </text><text id="new-Rabbit" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="247" y="278">new Rabbit</tspan> </text> <path id="Line" fill="#7a7f9c" fill-rule="nonzero" d="M330.5 96.5l7 14h-6v28h-2v-28h-6l7-14z" /> <path id="Line-Copy" fill="#7a7f9c" fill-rule="nonzero" d="M211 40l14 7-14 7v-6h-79v-2h79v-6z" /> <path id="Line-Copy-4" fill="#7a7f9c" fill-rule="nonzero" d="M489.157 87.31l.533.847-.424.266-20.68 13.021-5.129 3.228 7.263-.36.499-.024.05.999-.5.024-9.167.455-.888.044.423-.782 4.372-8.07.239-.44.879.476-.238.44-3.464 6.392 5.128-3.228 20.68-13.021.424-.267z" /> <text id="[[Prototype]]" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="340" y="120"> [[Prototype]]</tspan> </text> <path id="Line-Copy-3" fill="#7a7f9c" fill-rule="nonzero" d="M330.5 230.5l7 14h-6v28h-2v-28h-6l7-14z" /> <text id="[[Prototype]]-Copy" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="340" y="254"> [[Prototype]]</tspan> </text><text id="prototype" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="139" y="35">prototype </tspan> </text> <path id="Line-Copy-2" fill="#7a7f9c" fill-rule="nonzero" d="M211 182l14 7-14 7v-6h-79v-2h79v-6z" /> <text id="prototype-copy" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="139" y="176">prototype </tspan> </text><text id="name:-&quot;White-Rabbit&quot;" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="253" y="304">name: "White Rabbit"</tspan> </text><text id="constructor" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="17" y="41">constructor </tspan> </text><text id="constructor-copy" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="17" y="183"> constructor</tspan> </text> <ellipse id="Oval" cx="391.5" cy="117.5" stroke="#7a7f9c" rx="70.5" ry="20.5" /><text id="extends" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="16" font-weight="normal"> <tspan x="489" y="83">extends </tspan> </text> </g> </g> </svg> </li> <li> <h3>Overriding a method</h3> <p>if we specify our own method in Rabbit, such as stop() then it will be used instead of the Animal.prototype stop(): </p> <p>however, we don’t want to totally replace a parent method, but rather to build on top of it to tweak or extend its functionality.</p> <p>Classes provide "super" keyword for that.</p> <ol> <li>super.method(...) to call a parent method.</li> <li>super(...) to call a parent constructor (inside our constructor only).</li> </ol> <p>For instance, let our rabbit autohide when stopped:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Animal</span><span style="color: #d4d4d4;"> {</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">constructor</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">speed</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">run</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">speed</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">speed</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">speed</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">`</span><span style="color: #569cd6;">${this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;"> runs with speed </span><span style="color: #569cd6;">${this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">speed</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">.`</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">stop</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">speed</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">`</span><span style="color: #569cd6;">${this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;"> stands still.`</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div><br> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Rabbit</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">extends</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Animal</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">hide</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">`</span><span style="color: #569cd6;">${this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;"> hides!`</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">stop</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">super</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">stop</span><span style="color: #d4d4d4;">(); </span><span style="color: #6a9955;">// call parent stop</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">hide</span><span style="color: #d4d4d4;">(); </span><span style="color: #6a9955;">// and then hide</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">rabbit</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Rabbit</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"White Rabbit"</span><span style="color: #d4d4d4;">);</span> </div><br> <div><span style="color: #9cdcfe;">rabbit</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">run</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">5</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// White Rabbit runs with speed 5.</span></div> <div><span style="color: #9cdcfe;">rabbit</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">stop</span><span style="color: #d4d4d4;">(); </span><span style="color: #6a9955;">// White Rabbit stands still. White Rabbit hides!</span></div> </div> </div> </li> <li> <h3>Overriding constructor</h3> <p>According to the specification, if a class extends another class and has no constructor, then the following “empty” constructor is generated:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Rabbit</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">extends</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Animal</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// generated for extending classes without own constructors</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">constructor</span><span style="color: #d4d4d4;">(...</span><span style="color: #9cdcfe;">args</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">super</span><span style="color: #d4d4d4;">(...</span><span style="color: #9cdcfe;">args</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">}</span> </div> </div> </div> <p>As we can see, it basically calls the parent constructor passing it all the arguments. That happens if we don’t write a constructor of our own.</p> <p>Now let’s add a custom constructor to Rabbit. It will specify the earLength in addition to name:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Animal</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">constructor</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">speed</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// ...</span></div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Rabbit</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">extends</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Animal</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">constructor</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">earLength</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">speed</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">earLength</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">earLength</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #6a9955;">// Doesn't work!</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">rabbit</span> </div> <div><span style="color: #c586c0;">try</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">rabbit</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Rabbit</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"White Rabbit"</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">);</span> </div><br> <div><span style="color: #d4d4d4;">} </span><span style="color: #c586c0;">catch</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">error</span><span style="color: #d4d4d4;">) {</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">error</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">message</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">//must call super constructor before using 'this' in derived class constructor</span></div><br> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">rabbit</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// undefined </span></div> </div> </div> <p>why we got the previous error?</p> <p>In JavaScript, there’s a distinction between a constructor function of an inheriting class (so-called “derived constructor”) and other functions. A derived constructor has a special internal property [[ConstructorKind]]:"derived". That’s a special internal label</p> <p>That label affects its behavior with new.</p> <ol> <li>When a regular function is executed with new, it creates an empty object and assigns it to this. </li> <li>But when a derived constructor runs, it doesn’t do this. It expects the parent constructor to do this job.</li> </ol> <p>So a derived constructor must call super in order to execute its parent (base) constructor, otherwise the object for this won’t be created. And we’ll get an error.</p> <p>For the Rabbit constructor to work, it needs to call super() before using this, like here:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Animal</span><span style="color: #d4d4d4;"> {</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">constructor</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">speed</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// ...</span></div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Rabbit</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">extends</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Animal</span><span style="color: #d4d4d4;"> {</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">constructor</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">earLength</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">super</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">earLength</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">earLength</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// ...</span></div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #6a9955;">// now fine</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">rabbit</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Rabbit</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"White Rabbit"</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">rabbit</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// White Rabbit</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">rabbit</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">earLength</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 10</span></div> </div> </div> </li> <li> <h3>Overriding class fields: a tricky note</h3> <p>We can override not only methods, but also class fields. Although, there’s a tricky behavior when we access an overridden field in parent constructor, quite different from most other programming languages.</p> <p>Consider this example:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Animal</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">'animal'</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">constructor</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// (*)</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Rabbit</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">extends</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Animal</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">'rabbit'</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Animal</span><span style="color: #d4d4d4;">(); </span><span style="color: #6a9955;">// animal</span></div> <div><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Rabbit</span><span style="color: #d4d4d4;">(); </span><span style="color: #6a9955;">// animal</span></div> </div> </div> <p>Here, class Rabbit extends Animal and overrides the name field with its own value.</p> <p>There’s no own constructor in Rabbit, so Animal constructor is called.</p> <p>What’s interesting is that in both cases: new Animal() and new Rabbit(), the alert in the line (*) shows animal. </p> <p>In other words, the parent constructor always uses its own field value, not the overridden one.</p> <p>Here’s the same code, but instead of this.name field we call this.showName() method:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Animal</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">showName</span><span style="color: #d4d4d4;">() { &nbsp;</span><span style="color: #6a9955;">// instead of this.name = 'animal'</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'animal'</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">constructor</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">showName</span><span style="color: #d4d4d4;">(); </span><span style="color: #6a9955;">// instead of alert(this.name);</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Rabbit</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">extends</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Animal</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">showName</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'rabbit'</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Animal</span><span style="color: #d4d4d4;">(); </span><span style="color: #6a9955;">// animal</span></div> <div><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Rabbit</span><span style="color: #d4d4d4;">(); </span><span style="color: #6a9955;">// rabbit</span></div> </div> </div> <p>Please note: now the output is different.</p> <p>And that’s what we naturally expect. When the parent constructor is called in the derived class, it uses the overridden method.</p> <p>Why is there a difference?</p> <p>Well, the reason is the field initialization order. The class field is initialized:</p> <ol> <li>Before constructor for the base class (that doesn’t extend anything),</li> <li>Immediately after super() for the derived class. </li> </ol> <p>we can use getters and setters to reslove this problem</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Animal</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">get</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"animal"</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">constructor</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// (*)</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Rabbit</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">extends</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Animal</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">get</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"rabbit"</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Animal</span><span style="color: #d4d4d4;">(); </span><span style="color: #6a9955;">// animal</span></div> <div><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Rabbit</span><span style="color: #d4d4d4;">(); </span><span style="color: #6a9955;">// rabbit </span></div> </div> </div> </li> <li> <h3>Super: internals, [[HomeObject]]</h3> <p>The code is explaining a problem with using the this.__proto__.method.call(this) approach to accessing parent object methods. This approach is not robust because it can lead to an infinite loop when there is more than one level of inheritance.</p> <p>Here is an example that demonstrates the problem:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">animal</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"Animal"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">eat</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">`</span><span style="color: #569cd6;">${this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;"> eats.`</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">};</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">rabbit</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">__proto__</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">animal</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">get</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">(){</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"rabbit"</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; },</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">eat</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">__proto__</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">eat</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">call</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// (*)</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">};</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">longEar</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">__proto__</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">rabbit</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">get</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">(){</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"longEar"</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; },</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">eat</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">__proto__</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">eat</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">call</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// (**)</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">};</span> </div> <div><span style="color: #9cdcfe;">longEar</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">eat</span><span style="color: #d4d4d4;">();</span> </div> </div> </div> <p>The code demonstrates an implementation of prototypical inheritance in JavaScript using plain objects. The animal object has an eat method, which logs the name of the animal and the message "eats." The rabbit object is created with animal as its prototype and overrides the name property to return the string "rabbit." The rabbit object also has an eat method, which first logs its own name, then calls the eat method of its prototype (animal) by using this.__proto__.eat.call(this); at line (*). The longEar object is created with rabbit as its prototype and overrides the name property to return the string "longEar." The longEar object also has an eat method, which first logs its own name, then calls the eat method of its prototype (rabbit) by using this.__proto__.eat.call(this); at line (**). Finally, longEar.eat() is called, triggering the chain of method calls, leading to an error "Maximum call stack size exceeded." The issue arises from the recursive nature of the code. The eat method of the longEar object calls the eat method of its prototype (rabbit), which in turn calls the eat method of its prototype (animal). However, there is no stop condition to break the recursion, causing an infinite loop and ultimately leading to the "Maximum call stack size exceeded" error.</p> <p>In the recursion that occurs when calling longEar.eat(), the value of this will always be the longEar object. Each call of this.__proto__.eat.call(this) will keep passing the same this value, which is the longEar object, leading to an endless loop and a maximum call stack size exceeded error.</p> </li> <li> <h3>[[HomeObject]]</h3> <p>To provide the solution, JavaScript adds one more special internal property for functions: [[HomeObject]]. When a function is specified as a class or object method, its [[HomeObject]] property becomes that object. Then super uses it to resolve the parent prototype and its methods.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">animal</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"Animal"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">eat</span><span style="color: #d4d4d4;">() { &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;">// animal.eat.[[HomeObject]] == animal</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">`</span><span style="color: #569cd6;">${this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;"> eats.`</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; };</span></div> <div><span style="color: #d4d4d4;">&nbsp; </span></div> <div><span style="color: #d4d4d4;">&nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">rabbit</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">__proto__</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">animal</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"Rabbit"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">eat</span><span style="color: #d4d4d4;">() { &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;">// rabbit.eat.[[HomeObject]] == rabbit</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">super</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">eat</span><span style="color: #d4d4d4;">();</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; };</span></div> <div><span style="color: #d4d4d4;">&nbsp; </span></div> <div><span style="color: #d4d4d4;">&nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">longEar</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">__proto__</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">rabbit</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"Long Ear"</span><span style="color: #d4d4d4;">,</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">eat</span><span style="color: #d4d4d4;">() { &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;">// longEar.eat.[[HomeObject]] == longEar</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">super</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">eat</span><span style="color: #d4d4d4;">();</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; };</span></div> <div><span style="color: #d4d4d4;">&nbsp; </span></div> <div><span style="color: #d4d4d4;">&nbsp; </span><span style="color: #6a9955;">// works correctly</span></div> <div><span style="color: #d4d4d4;">&nbsp; </span><span style="color: #9cdcfe;">longEar</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">eat</span><span style="color: #d4d4d4;">(); &nbsp;</span><span style="color: #6a9955;">// Long Ear eats.</span></div> </div> </div> </li> </ul> </details> </li> <li> <details> <summary>Static properties and methods</summary> <ul> <li> <h3>Static properties and methods</h3> <p>Static properties and methods in JavaScript are class-level properties and methods that can be accessed without creating an instance of the class. They are defined directly on the class and can be invoked using the class name, not the instance of the class. Here's an example to illustrate static properties and methods in JavaScript:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Circle</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">static</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">pi</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">3.14</span><span style="color: #d4d4d4;">; </span><span style="color: #6a9955;">// static property</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">static</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">circumference</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">radius</span><span style="color: #d4d4d4;">) { </span><span style="color: #6a9955;">// static method</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;"> * </span><span style="color: #4ec9b0;">Circle</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">pi</span><span style="color: #d4d4d4;"> * </span><span style="color: #9cdcfe;">radius</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #6a9955;">// accessing the static property</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">Circle</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">pi</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 3.14</span></div><br> <div><span style="color: #6a9955;">// invoking the static method</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">Circle</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">circumference</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">)); </span><span style="color: #6a9955;">// 62.8</span></div> </div> </div> <p>Static properties and methods are useful when you want to share values or functionality across all instances of a class without having to create an instance. They are also useful in cases where you don't want to pollute the instances with unnecessary properties or methods.</p> </li> <li> <h3>Inheritance of static properties and methods</h3> <p>Static properties and methods in JavaScript are shared among all instances of a class and are not directly associated with instances of a class. They are defined on the class itself and can be accessed using the class name followed by the dot operator.</p> <p>Inheritance of static properties and methods works similarly to inheritance of instance properties and methods. When a class extends another class, it inherits all of its static properties and methods as well.</p> <p>Here's an example of how inheritance works with static properties and methods in JavaScript:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Animal</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">static</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">count</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">;</span> </div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">static</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">incrementCount</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">count</span><span style="color: #d4d4d4;">++;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Dog</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">extends</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Animal</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">static</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">breed</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"Labrador"</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #6a9955;">// Accessing the inherited static property</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">Dog</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">count</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 0</span></div><br> <div><span style="color: #6a9955;">// Calling the inherited static method</span></div> <div><span style="color: #4ec9b0;">Dog</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">incrementCount</span><span style="color: #d4d4d4;">();</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">Dog</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">count</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 1</span></div> </div> </div> </li> </ul> </details> </li> <li> <details> <summary>protected ,readOnly and Private properties and methods</summary> <ul> <li> <h3>protected property</h3> <p>JavaScript doesn't have a direct way to create protected properties. However, you can achieve similar functionality</p> <p>for example:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">CoffeeMachine</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">_waterAmount</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">;</span> </div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">set</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">waterAmount</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;"> &lt; </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">) { </span><span style="color: #6a9955;">// protect the watermount property from going negative</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">_waterAmount</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">get</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">waterAmount</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">_waterAmount</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">constructor</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">power</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">_power</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">power</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div><br> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">coffeeMachine</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">CoffeeMachine</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">100</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">coffeeMachine</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">waterAmount</span><span style="color: #d4d4d4;"> = -</span><span style="color: #b5cea8;">20</span><span style="color: #d4d4d4;"> </span><span style="color: #6a9955;">// will not succeed</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">coffeeMachine</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">waterAmount</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 0 </span></div> </div> </div> </li> <li> <h3>ReadOnly property</h3> <p>we can make a read only property</p> <p>To do so, we only need to make getter, but not the setter: </p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">CoffeeMachine</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// ...</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">constructor</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">power</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">_power</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">power</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">get</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">power</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">_power</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div><br> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #6a9955;">// create the coffee machine</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">coffeeMachine</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">CoffeeMachine</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">100</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">coffeeMachine</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">power</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">25</span><span style="color: #d4d4d4;">; </span><span style="color: #6a9955;">// Error (no setter)</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">`Power is: </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">coffeeMachine</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">power</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">W`</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// Power is: 100W</span></div> </div> </div> </li> <li> <h3>Private property</h3> <p>Privates should start with #. They are only accessible from inside the class.</p> <p>For instance, here’s a private #waterLimit property and the water-checking private method #fixWaterAmount:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">CoffeeMachine</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">#waterLimit</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">200</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; </span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; #</span><span style="color: #dcdcaa;">fixWaterAmount</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;"> &lt; </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">) </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;"> &gt; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">#waterLimit</span><span style="color: #d4d4d4;">) </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">#waterLimit</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; </span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">setWaterAmount</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">#waterLimit</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">#fixWaterAmount</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; </span></div> <div><span style="color: #d4d4d4;">&nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; </span></div> <div><span style="color: #d4d4d4;">&nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">coffeeMachine</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">CoffeeMachine</span><span style="color: #d4d4d4;">();</span> </div> <div><span style="color: #d4d4d4;">&nbsp; </span></div> <div><span style="color: #d4d4d4;">&nbsp; </span><span style="color: #6a9955;">// can't access privates from outside of the class</span> </div> <div><span style="color: #d4d4d4;">&nbsp; </span><span style="color: #9cdcfe;">coffeeMachine</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">#fixWaterAmount</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">123</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// Error</span></div> <div><span style="color: #d4d4d4;">&nbsp; </span><span style="color: #9cdcfe;">coffeeMachine</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">#waterLimit</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">1000</span><span style="color: #d4d4d4;">; </span><span style="color: #6a9955;">// Error</span></div> </div> </div> <p>On the language level, # is a special sign that the field is private. We can’t access it from outside or from inheriting classes.</p> <p>Private fields do not conflict with public ones. We can have both private #waterAmount and public waterAmount fields at the same time.</p> <p>Unlike protected ones, private fields are enforced by the language itself. That’s a good thing.</p> <p>But if we inherit from CoffeeMachine, then we’ll have no direct access to #waterAmount. We’ll need to rely on waterAmount getter/setter:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <br> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">CoffeeMachine</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">#waterLimit</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">200</span><span style="color: #d4d4d4;">;</span> </div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; #</span><span style="color: #dcdcaa;">fixWaterAmount</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;"> &lt; </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">) </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;"> &gt; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">#waterLimit</span><span style="color: #d4d4d4;">) </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">#waterLimit</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">setWaterAmount</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">#waterLimit</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">#fixWaterAmount</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div><br> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">MegaCoffeeMachine</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">extends</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">CoffeeMachine</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">method</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">#waterAmount</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// Error: can only access from CoffeeMachine</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">}</span> </div> </div> </div> </li> </ul> </details> </li> <li> <details> <summary>Extending built-in classes</summary> <ul> <li> <h3>Extending built-in classes</h3> <p>Built-in classes like Array, Map and others are extendable also.</p> <p>For instance, here PowerArray inherits from the native Array:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// add one more method to it (can do more)</span> </div> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">PowerArray</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">extends</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Array</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">isEmpty</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">length</span><span style="color: #d4d4d4;"> === </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">PowerArray</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">5</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">50</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">isEmpty</span><span style="color: #d4d4d4;">()); </span><span style="color: #6a9955;">// false</span></div><br> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">filteredArr</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">filter</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">item</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">item</span><span style="color: #d4d4d4;"> &gt;= </span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">filteredArr</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// 10, 50</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">filteredArr</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">isEmpty</span><span style="color: #d4d4d4;">()); </span><span style="color: #6a9955;">// false </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">filteredArr</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">constructor</span><span style="color: #d4d4d4;">); &nbsp;</span><span style="color: #6a9955;">// PowerArray</span></div> </div> </div> <p>Please note a very interesting thing. Built-in methods like filter, map and others – return new objects of exactly the inherited type PowerArray. Their internal implementation uses the object’s constructor property for that.</p> <p>In the example above,</p> <div class="cods" contenteditable="" spellcheck="false"> arr.constructor === PowerArray // true </div> <p>When arr.filter() is called, it internally creates the new array of results using exactly arr.constructor, not basic Array. That’s actually very cool, because we can keep using PowerArray methods further on the result.</p> <p>Even more, we can customize that behavior.</p> <p>We can add a special static getter Symbol.species to the class. If it exists, it should return the constructor that JavaScript will use internally to create new entities in map, filter and so on.</p> <p>If we’d like built-in methods like map or filter to return regular arrays, we can return Array in Symbol.species, like here:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">PowerArray</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">extends</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Array</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">isEmpty</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">length</span><span style="color: #d4d4d4;"> === </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// built-in methods will use this as the constructor</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">static</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">get</span><span style="color: #d4d4d4;"> [</span><span style="color: #9cdcfe;">Symbol</span><span style="color: #d4d4d4;">.</span><span style="color: #4fc1ff;">species</span><span style="color: #d4d4d4;">]() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Array</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">PowerArray</span><span style="color: #d4d4d4;">(</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">5</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">50</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">isEmpty</span><span style="color: #d4d4d4;">()); </span><span style="color: #6a9955;">// false</span></div><br> <div><span style="color: #6a9955;">// filter creates new array using arr.constructor[Symbol.species] as constructor</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">filteredArr</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">filter</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">item</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">item</span><span style="color: #d4d4d4;"> &gt;= </span><span style="color: #b5cea8;">10</span><span style="color: #d4d4d4;">);</span> </div><br> <div><span style="color: #6a9955;">// filteredArr is not PowerArray, but Array</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">filteredArr</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">isEmpty</span><span style="color: #d4d4d4;">()); </span><span style="color: #6a9955;">// Error: filteredArr.isEmpty is not a function</span></div> </div> </div> <p>As you can see, now .filter returns Array. So the extended functionality is not passed any further.</p> </li> <li> <h3>No static inheritance in built-ins</h3> <p>Built-in objects in JavaScript have their own static methods, which are methods that are invoked directly on the object and not on its instances. For example, the static methods of the Object class are Object.keys, Object.values, Object.entries, etc.</p> <p>In JavaScript, objects extend each other. This means that an object can inherit properties and methods from another object. When an object extends another object, it usually inherits both static and non-static methods.</p> <p>However, built-in classes are an exception to this rule. Built-in classes do not inherit static methods from each other. This means that if you have two built-in classes, such as Array and Date, and you want to access the static methods of the Object class from them, you cannot do so directly.</p> <p>For example, Array and Date both inherit from the Object class, which means that their instances (i.e. objects created from these classes) have access to the methods of the Object.prototype object. But the Array class itself does not reference the Object class, so there is no static method available on the Array class, such as Array.keys(). The same applies to the Date class.</p> <p>This is why you can access the static methods of the Object class only directly on the Object class and not on its descendants, such as Array or Date.</p> </li> </ul> </details> </li> <li> <details> <summary>Class checking: "instanceof"</summary> <ul> <li> <h3>The instanceof operator</h3> <p>The syntax is:</p> <div class="cods" contenteditable="" spellcheck="false"> obj instanceof Class </div> <p>It returns true if obj belongs to the Class or a class inheriting from it.</p> <p>It also works with constructor functions:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// instead of class</span></div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">Rabbit</span><span style="color: #d4d4d4;">() { }</span></div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">Rabbit</span><span style="color: #d4d4d4;">() </span><span style="color: #569cd6;">instanceof</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">Rabbit</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// true</span></div> </div> </div> <p>…And with built-in classes like Array:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;"> = [</span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">, </span><span style="color: #b5cea8;">3</span><span style="color: #d4d4d4;">];</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">instanceof</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Array</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// true</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">arr</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">instanceof</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Object</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// true</span></div> </div> </div> <p>Normally, instanceof examines the prototype chain for the check. We can also set a custom logic in the static method Symbol.hasInstance.</p> <p>The algorithm of obj instanceof Class works roughly as follows:</p> <ol> <li>If there’s a static method Symbol.hasInstance, then just call it: Class[Symbol.hasInstance](obj). It should return either true or false, and we’re done. That’s how we can customize the behavior of instanceof. For example: <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// setup instanceOf check that assumes that</span> </div> <div><span style="color: #6a9955;">// anything with canEat property is an animal</span> </div> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Animal</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">static</span><span style="color: #d4d4d4;"> [</span><span style="color: #9cdcfe;">Symbol</span><span style="color: #d4d4d4;">.</span><span style="color: #4fc1ff;">hasInstance</span><span style="color: #d4d4d4;">](</span><span style="color: #9cdcfe;">obj</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">obj</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">canEat</span><span style="color: #d4d4d4;">) </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">true</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span> </div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">obj</span><span style="color: #d4d4d4;"> = { </span><span style="color: #9cdcfe;">canEat</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">true</span><span style="color: #d4d4d4;"> };</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">obj</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">instanceof</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Animal</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// true: Animal[Symbol.hasInstance](obj) is called</span> </div> </div> </div> </li> <li>Most classes do not have Symbol.hasInstance. In that case, the standard logic is used: obj instanceOf Class checks whether Class.prototype is equal to one of the prototypes in the obj prototype chain. <p>In other words, compare one after another: </p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #9cdcfe;">obj</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">__proto__</span><span style="color: #d4d4d4;"> === </span><span style="color: #4ec9b0;">Class</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">prototype</span><span style="color: #d4d4d4;">?</span> </div> <div><span style="color: #9cdcfe;">obj</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">__proto__</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">__proto__</span><span style="color: #d4d4d4;"> === </span><span style="color: #4ec9b0;">Class</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">prototype</span><span style="color: #d4d4d4;">?</span> </div> <div><span style="color: #9cdcfe;">obj</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">__proto__</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">__proto__</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">__proto__</span><span style="color: #d4d4d4;"> === </span><span style="color: #4ec9b0;">Class</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">prototype</span><span style="color: #d4d4d4;">?</span> </div> <div><span style="color: #d4d4d4;">...</span> </div> <div><span style="color: #6a9955;">// if any answer is true, return true</span> </div> <div><span style="color: #6a9955;">// otherwise, if we reached the end of the chain, return false</span> </div> </div> </div> </li> </ol> </li> <li> <h3>Bonus: Object.prototype.toString for the type</h3> <p>We can use Object.prototype.toString as an extended typeof and an alternative for instanceof.</p> <div class="cods" spellcheck="false" contenteditable=""><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">ObjToString</span><span style="color: #d4d4d4;"> = </span><span style="color: #4ec9b0;">Object</span><span style="color: #d4d4d4;">.</span><span style="color: #4fc1ff;">prototype</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">toString</span> <div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">ObjToString</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">call</span><span style="color: #d4d4d4;">([])); </span><span style="color: #6a9955;">//[object Array] </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">ObjToString</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">call</span><span style="color: #d4d4d4;">({})); </span><span style="color: #6a9955;">//[object Object] </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">ObjToString</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">call</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">null</span><span style="color: #d4d4d4;">));</span><span style="color: #6a9955;">// [object Null] </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">ObjToString</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">call</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">undefined</span><span style="color: #d4d4d4;">));</span><span style="color: #6a9955;">// [object undefined]</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">ObjToString</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">call</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">true</span><span style="color: #d4d4d4;">));</span><span style="color: #6a9955;">// [object Boolean] </span></div> </div> </div> </li> <li> <h3>Symbol.toStringTag</h3> <p>The behavior of Object toString can be customized using a special object property Symbol.toStringTag.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">[</span><span style="color: #9cdcfe;">Symbol</span><span style="color: #9cdcfe;">.</span><span style="color: #4fc1ff;">toStringTag</span><span style="color: #9cdcfe;">]:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">"User"</span> </div> <div><span style="color: #d4d4d4;">&nbsp; };</span></div> <div><span style="color: #d4d4d4;">&nbsp; </span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">( </span><span style="color: #4ec9b0;">Object</span><span style="color: #d4d4d4;">.</span><span style="color: #4fc1ff;">prototype</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">toString</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">call</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">) ); </span><span style="color: #6a9955;">// [object User]</span></div> </div> </div> </li> </ul> </details> </li> <li> <details> <summary>Mixins</summary> <ul> <li> <h3>Mixins</h3> <ol> <li>JavaScript allows inheritance from only one object or class, limiting the extent of inheritance. </li> <li>To overcome this limitation, mixins come into play. Mixins are classes containing methods that can be utilized by other classes without inheritance.</li> <li>Mixins provide a means to add specific behaviors to different classes, enhancing their functionality.</li> <li>For example, the functionalities of StreetSweeper and Bicycle can be combined using mixins to create a StreetSweepingBicycle.</li> <li>Similarly, the functionality of EventEmitter can be added to the User class using mixins, enabling event generation capabilities for users.</li> </ol> </li> <li> <h3>A mixin example</h3> <p>The simplest way to implement a mixin in JavaScript is to make an object with useful methods, so that we can easily merge them into a prototype of any class.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// mixin</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">sayHiMixin</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #cccccc;">() {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">`Hello </span><span style="color: #569cd6;">${this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">`</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; },</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">sayBye</span><span style="color: #cccccc;">() {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">`Bye </span><span style="color: #569cd6;">${this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">`</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">};</span> </div><br> <div><span style="color: #6a9955;">// usage:</span></div> <div><span style="color: #569cd6;">class</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #569cd6;">constructor</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">name</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">name</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">}</span> </div><br> <div><span style="color: #6a9955;">// copy the methods</span></div> <div><span style="color: #4ec9b0;">Object</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">assign</span><span style="color: #cccccc;">(</span><span style="color: #4ec9b0;">User</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">prototype</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">sayHiMixin</span><span style="color: #cccccc;">);</span> </div><br> <div><span style="color: #6a9955;">// now User can say hi</span></div> <div><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"Dude"</span><span style="color: #cccccc;">).</span><span style="color: #dcdcaa;">sayHi</span><span style="color: #cccccc;">(); </span><span style="color: #6a9955;">// Hello Dude!</span></div> </div> </div> <p>Mixins can make use of inheritance inside themselves.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">sayMixin</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">say</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">phrase</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">phrase</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">};</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">sayHiMixin</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">__proto__</span><span style="color: #9cdcfe;">:</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">sayMixin</span><span style="color: #cccccc;">, </span><span style="color: #6a9955;">// (or we could use Object.setPrototypeOf to set the prototype here)</span></div><br> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #cccccc;">() {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;">// call parent method</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">super</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">say</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">`Hello </span><span style="color: #569cd6;">${this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">`</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// (*)</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; },</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">sayBye</span><span style="color: #cccccc;">() {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">super</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">say</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">`Bye </span><span style="color: #569cd6;">${this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">`</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// (*)</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">};</span> </div><br> <div><span style="color: #569cd6;">class</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #569cd6;">constructor</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">name</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">name</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">}</span> </div><br> <div><span style="color: #6a9955;">// copy the methods</span></div> <div><span style="color: #4ec9b0;">Object</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">assign</span><span style="color: #cccccc;">(</span><span style="color: #4ec9b0;">User</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">prototype</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">sayHiMixin</span><span style="color: #cccccc;">);</span> </div><br> <div><span style="color: #6a9955;">// now User can say hi</span></div> <div><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"Dude"</span><span style="color: #cccccc;">).</span><span style="color: #dcdcaa;">sayHi</span><span style="color: #cccccc;">(); </span><span style="color: #6a9955;">// Hello Dude!</span></div> </div> </div> </li> <li></li> </ul> </details> </li> </ul> </details> <details class="dad"> <summary>Error handling</summary> <ul> <li> <details> <summary>Error handling, "try...catch"</summary> <ul> <li> <h3>The “try…catch” syntax</h3> <p>The try...catch construct has two main blocks: try, and then catch:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #c586c0;">try</span><span style="color: #d4d4d4;"> {</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// code...</span></div><br> <div><span style="color: #d4d4d4;">} </span><span style="color: #c586c0;">catch</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;">) {</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// error handling</span></div><br> <div><span style="color: #d4d4d4;">}</span> </div> </div> </div> <p>It works like this:</p> <ol> <li>First, the code in try {...} is executed.</li> <li>If there were no errors, then catch (err) is ignored: the execution reaches the end of try and goes on, skipping catch.</li> <li>If an error occurs, then the try execution is stopped, and control flows to the beginning of catch (err). The err variable (we can use any name for it) will contain an error object with details about what happened.</li> </ol> <svg xmlns="http://www.w3.org/2000/svg" width="500" height="400" viewBox="0 0 514 411"> <defs> <style> @import url(https://fonts.googleapis.com/css?family=Open+Sans:bold,italic,bolditalic%7CPT+Mono); @font-face { font-family: 'PT Mono'; font-weight: 700; font-style: normal; src: local('PT MonoBold'), url(/font/PTMonoBold.woff2) format('woff2'), url(/font/PTMonoBold.woff) format('woff'), url(/font/PTMonoBold.ttf) format('truetype') } </style> </defs> <g id="combined" fill="none" fill-rule="evenodd" stroke="none" stroke-width="1"> <g id="try-catch-flow.svg"> <g id="Rectangle-1-+-Корень" transform="translate(207 4)"> <rect id="Rectangle-1" width="78" height="28" x="1" y="1" fill="#252732" stroke="#4b4e65" stroke-width="2" rx="14" /><text id="Begin" fill="#7a7f9c" font-family="OpenSans-Regular, Open Sans" font-size="14" font-weight="normal"> <tspan x="21" y="20"> Begin</tspan> </text> </g> <path id="Line" fill="#7a7f9c" fill-rule="nonzero" d="M249 34v23.049l8 .001-9.5 19-9.5-19 8-.001V34h3z" /> <path id="Line-Copy" fill="#7a7f9c" fill-rule="nonzero" d="M399 297v23.049l8 .001-9.5 19-9.5-19 8-.001V297h3z" /> <path id="Path-1218" fill="#7a7f9c" fill-rule="nonzero" d="M158.5 131.5v3h-59v85h8l-9.5 19-9.5-19h8v-88h62z" /> <path id="Path-1218-Copy" fill="#7a7f9c" fill-rule="nonzero" d="M400.5 131.5l-.001 88h8.001l-9.5 19-9.5-19h7.999v-85H315.5v-3h85z" /> <g id="Rectangle-354-+-Каково-“официальное”" fill="#252732" stroke="#4b4e65" stroke-width="2" transform="translate(154 81)"> <path id="Rectangle-354" d="M93.61 1.144L185.161 52l-91.55 50.856L2.058 52 93.61 1.144z" /> </g> <g id="Rectangle-356-+-Отмена" transform="translate(59 177)"> <path id="Rectangle-356" fill="#232529" d="M0 2h60v20H0z" /> <text id="No-Errors" fill="#7a7f9c" font-family="OpenSans-Regular, Open Sans" font-size="14" font-weight="normal"> <tspan x="7.5" y="15">No Errors</tspan> </text> </g> <g id="Rectangle-356-Copy-+-“Админ”" transform="translate(303 176)"> <path id="Rectangle-356-Copy" fill="#232529" d="M65 2h60v20H65z" /> <text id="An-error-occured-in" fill="#7a7f9c" font-family="OpenSans-Regular, Open Sans" font-size="14" font-weight="normal"> <tspan x=".652" y="15"> An error occured in the code </tspan> </text> </g> <rect id="Rectangle-1-Copy-2" width="214" height="49" x="292" y="349" fill="#252732" stroke="#4b4e65" stroke-width="2" rx="24.5" /> <rect id="Rectangle-1" width="195" height="49" x="1" y="244" fill="#252732" stroke="#4b4e65" stroke-width="2" rx="24.5" /> <rect id="Rectangle-1-Copy" width="216" height="49" x="290" y="244" fill="#252732" stroke="#4b4e65" stroke-width="2" rx="24.5" /> <text id="Ignore-catch-block" fill="#7a7f9c" font-family="OpenSans-Regular, Open Sans" font-size="14" font-weight="normal"> <tspan x="39" y="272">Ignore catch block</tspan> </text><text id="Ignore-the-rest-of-t" fill="#7a7f9c" font-family="OpenSans-Regular, Open Sans" font-size="14" font-weight="normal"> <tspan x="332" y="272">Ignore the rest of try</tspan> </text><text id="Execute-catch-block" fill="#7a7f9c" font-family="OpenSans-Regular, Open Sans" font-size="14" font-weight="normal"> <tspan x="333" y="379">Execute catch block</tspan> </text><text id="try-{-}" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="218" y="117">try { </tspan> <tspan x="218" y="157">}</tspan> </text><text id="//-code..." fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="232" y="138">// code...</tspan> </text> </g> </g> </svg> <p>So, an error inside the try {...} block does not kill the script – we have a chance to handle it in catch.</p> <p>An example with an error: shows (1) and (3):</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #c586c0;">try</span><span style="color: #d4d4d4;"> {</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'Start of try runs'</span><span style="color: #d4d4d4;">); &nbsp;</span><span style="color: #6a9955;">// (1) &lt;--</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">lalala</span><span style="color: #d4d4d4;">; </span><span style="color: #6a9955;">// error, variable is not defined!</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'End of try (never reached)'</span><span style="color: #d4d4d4;">); &nbsp;</span><span style="color: #6a9955;">// (2)</span></div><br> <div><span style="color: #d4d4d4;">} </span><span style="color: #c586c0;">catch</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;">) {</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">`Error has occurred!`</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// (3) &lt;--</span></div><br> <div><span style="color: #d4d4d4;">}</span> </div> </div> </div> <p>Note : try...catch only works for runtime errors , not for complie time (syntax) errors . try...catch works synchronously not asynchronously</p> </li> <li> <h3>Error object</h3> <p>When an error occurs, JavaScript generates an object containing the details about it. The object is then passed as an argument to catch:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #c586c0;">try</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// ...</span></div> <div><span style="color: #d4d4d4;">} </span><span style="color: #c586c0;">catch</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;">) { </span><span style="color: #6a9955;">// &lt;-- the "error object", could use another word instead of err</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// ...</span></div> <div><span style="color: #d4d4d4;">}</span> </div> </div> </div> <p>For all built-in errors, the error object has two main properties:</p> <ol> <li>name : Error name. For instance, for an undefined variable that’s "ReferenceError".</li> <li>message : Textual message about error details.</li> <li>stack : string with information about the sequence of nested calls that led to the error. Used for debugging purposes.</li> </ol> <p>For instance:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #c586c0;">try</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">lalala</span><span style="color: #d4d4d4;">; </span><span style="color: #6a9955;">// error, variable is not defined!</span></div> <div><span style="color: #d4d4d4;">} </span><span style="color: #c586c0;">catch</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// ReferenceError</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">message</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// lalala is not defined</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">stack</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// ReferenceError: lalala is not defined at (...call stack)</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// Can also show an error as a whole</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// The error is converted to string as "name: message"</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// ReferenceError: lalala is not defined</span></div> <div><span style="color: #d4d4d4;">}</span> </div> </div> </div> </li> <li> <h3>Optional “catch” binding</h3> <p>If we don’t need error details, catch may omit it:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #c586c0;">try</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// ...</span></div> <div><span style="color: #d4d4d4;">} </span><span style="color: #c586c0;">catch</span><span style="color: #d4d4d4;"> { </span><span style="color: #6a9955;">// &lt;-- without (err)</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// ...</span></div> <div><span style="color: #d4d4d4;">}</span> </div> </div> </div> </li> <li> <h3>Using “try…catch”</h3> <p>Let’s use try...catch to handle the error in json parsing: </p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">json</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"{ bad json }"</span><span style="color: #d4d4d4;">;</span> </div><br> <div><span style="color: #c586c0;">try</span><span style="color: #d4d4d4;"> {</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">JSON</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">parse</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">json</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// &lt;-- when an error occurs...</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// doesn't work</span></div><br> <div><span style="color: #d4d4d4;">} </span><span style="color: #c586c0;">catch</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// ...the execution jumps here</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Our apologies, the data has errors, we'll try to request it one more time."</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">message</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">}</span> </div> </div> </div> </li> <li> <h3>Throwing our own errors</h3> <p>What if json is syntactically correct, but doesn’t have a required name property?</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">json</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">'{ "age": 30 }'</span><span style="color: #d4d4d4;">; </span><span style="color: #6a9955;">// incomplete data</span></div><br> <div><span style="color: #c586c0;">try</span><span style="color: #d4d4d4;"> {</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">JSON</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">parse</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">json</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// &lt;-- no errors</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// no name!</span></div><br> <div><span style="color: #d4d4d4;">} </span><span style="color: #c586c0;">catch</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"doesn't execute"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">}</span> </div> </div> </div> <p>Here JSON.parse runs normally, but the absence of name is actually an error for us. To unify error handling, we’ll use the throw operator. </p> <p><b>“Throw” operator</b></p> <p>The throw operator generates an error.The syntax is:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #c586c0;">throw</span><span style="color: #d4d4d4;"> &lt;</span><span style="color: #9cdcfe;">error</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">object</span><span style="color: #d4d4d4;">&gt;</span> </div> </div> </div> <p>Technically, we can use anything as an error object. That may be even a primitive, like a number or a string, but it’s better to use objects, preferably with name and message properties (to stay somewhat compatible with built-in errors).</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">error1</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Error</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"message"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #6a9955;">// or</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">error2</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">SyntaxError</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"message"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">error3</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">ReferenceError</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"message"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #6a9955;">// ...</span> </div> </div> </div> <p>For built-in errors (not for any objects, just for errors), the name property is exactly the name of the constructor. And message is taken from the argument</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">error</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Error</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Things happen o_O"</span><span style="color: #d4d4d4;">);</span> </div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">error</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// Error</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">error</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">message</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// Things happen o_O</span></div> </div> </div> </li> <li> <h3>Rethrowing</h3> <p>The “rethrowing” technique can be explained in more detail as:</p> <ol> <li>Catch gets all errors.</li> <li>In the catch (err) {...} block we analyze the error object err.</li> <li>If we don’t know how to handle it, we do throw err. </li> </ol> <p>This code example can be considered as an example of rethrowing, as the catch block is checking the type of the error, and if it's a custom error, it rethrows it by logging its message to the console.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">json</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">'{ "age": 30,name :ali}'</span><span style="color: #d4d4d4;">; </span><span style="color: #6a9955;">// wrong string to be parsed</span> </div><br> <div><span style="color: #c586c0;">try</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">JSON</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">parse</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">json</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// &lt;-- error ocurs in parsing here</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #d4d4d4;"> (!</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">throw</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Error</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"name not found"</span><span style="color: #d4d4d4;">)</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">);</span> </div><br><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// ...</span></div> <div><span style="color: #d4d4d4;">} </span><span style="color: #c586c0;">catch</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">constructor</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> == </span><span style="color: #ce9178;">"Error"</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">message</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #c586c0;">else</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">message</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">}</span> </div> </div> </div> </li> <li> <h3>try…catch…finally</h3> <p>The try...catch construct may have one more code clause: finally.</p> <p>If it exists, it runs in all cases:</p> <ol> <li>after try, if there were no errors,</li> <li>after catch, if there were errors.</li> </ol> <p>Try running this code:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #c586c0;">try</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'try'</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #d4d4d4;"> (</span><span style="color: #dcdcaa;">confirm</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'Make an error?'</span><span style="color: #d4d4d4;">)) </span><span style="color: #dcdcaa;">BAD_CODE</span><span style="color: #d4d4d4;">();</span> </div> <div><span style="color: #d4d4d4;">} </span><span style="color: #c586c0;">catch</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'catch'</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">} </span><span style="color: #c586c0;">finally</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'finally'</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">}</span> </div> </div> </div> <p>finally and return</p> <p>In the example below, there’s a return in try. In this case, finally is executed just before the control returns to the outer code.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">func</span><span style="color: #d4d4d4;">() {</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #c586c0;">try</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">;</span> </div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; } </span><span style="color: #c586c0;">catch</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; } </span><span style="color: #c586c0;">finally</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'finally'</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #dcdcaa;">func</span><span style="color: #d4d4d4;">()); </span><span style="color: #6a9955;">// first works console from finally, and then the return from try</span></div> </div> </div> </li> <li> <h3>Global catch</h3> <div class="cods" contenteditable="" spellcheck="false"> <div> <br> <div><span style="color: #9cdcfe;">window</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">onerror</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">message</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">url</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">line</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">col</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">error</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">`</span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">message</span><span style="color: #569cd6;">}</span><span style="color: #d7ba7d;">\n</span><span style="color: #ce9178;"> At </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">line</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">:</span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">col</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;"> of </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">url</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">`</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">readData</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">badFunc</span><span style="color: #d4d4d4;">(); </span><span style="color: #6a9955;">// Whoops, something went wrong!</span></div> <div><span style="color: #d4d4d4;">}</span> </div> <div><span style="color: #dcdcaa;">readData</span><span style="color: #d4d4d4;">() </span></div> </div> </div> </li> </ul> </details> </li> <li> <details> <summary>Custom errors, extending Error</summary> <ul> <li> <h3>Custom errors, extending Error</h3> <ol> <li>Developers often create custom error classes to reflect specific issues that may arise in their tasks.</li> <li>Custom errors should have basic properties such as message, name, and stack, and may also have additional properties.</li> <li>JavaScript allows the use of throw with any argument, but it is better to inherit from Error so that error objects can be identified using obj instanceof Error.</li> <li>Custom errors can form a hierarchy as the application grows, with specific errors inheriting from more general errors.</li> <li>Inheriting from Error helps with identifying error objects, making it easier to manage and handle errors in the application.</li> </ol> </li> <li> <h3>Extending Error</h3> <p>let’s inherit ValidationError from it and try it in action: </p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">ValidationError</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">extends</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Error</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">constructor</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">message</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">super</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">message</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// (1)</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"ValidationError"</span><span style="color: #d4d4d4;">; </span><span style="color: #6a9955;">// (2) </span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">test</span><span style="color: #d4d4d4;">() {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #c586c0;">throw</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">ValidationError</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Whoops!"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #c586c0;">try</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">test</span><span style="color: #d4d4d4;">();</span> </div> <div><span style="color: #d4d4d4;">} </span><span style="color: #c586c0;">catch</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">message</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// Whoops!</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// ValidationError</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">stack</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// a list of nested calls with line numbers for each</span></div> <div><span style="color: #d4d4d4;">}</span> </div> </div> </div> <p>Let’s try to use it in readUser(json):</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">class</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">ValidationError</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">extends</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">Error</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">constructor</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">message</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">super</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">message</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// (1)</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">"ValidationError"</span><span style="color: #d4d4d4;">; </span><span style="color: #6a9955;">// (2) </span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">}</span> </div><br> <div><span style="color: #6a9955;">// Usage</span></div> <div><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">readUser</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">json</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">JSON</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">parse</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">json</span><span style="color: #d4d4d4;">);</span> </div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #d4d4d4;"> (!</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">age</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">throw</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">ValidationError</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"No field: age"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #d4d4d4;"> (!</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">throw</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">new</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">ValidationError</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"No field: name"</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">;</span> </div> <div><span style="color: #d4d4d4;">}</span> </div><br><br> <div><span style="color: #6a9955;">// Working example with try..catch</span> </div> <div><span style="color: #c586c0;">try</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">readUser</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'{ "age": 25 }'</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">} </span><span style="color: #c586c0;">catch</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">instanceof</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">ValidationError</span><span style="color: #d4d4d4;">) {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"Invalid data: "</span><span style="color: #d4d4d4;"> + </span><span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">message</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// Invalid data: No field: name</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; } </span><span style="color: #c586c0;">else</span><span style="color: #d4d4d4;"> </span><span style="color: #c586c0;">if</span><span style="color: #d4d4d4;"> (</span><span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">instanceof</span><span style="color: #d4d4d4;"> </span><span style="color: #4ec9b0;">SyntaxError</span><span style="color: #d4d4d4;">) { </span><span style="color: #6a9955;">// (*)</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">"JSON Syntax Error: "</span><span style="color: #d4d4d4;"> + </span><span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">message</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; } </span><span style="color: #c586c0;">else</span><span style="color: #d4d4d4;"> {</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">throw</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;">; </span><span style="color: #6a9955;">// unknown error, rethrow it (**)</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div> <div><span style="color: #d4d4d4;">} </span> </div> </div> </div> </li> <li> <h3>Further inheritance</h3> <p>read more from this <a style="color:white" href="https://javascript.info/custom-errors#further-inheritance">link</a> </p> </li> <li></li> </ul> </details> </li> </ul> </details> <details class="dad"> <summary>Promises, async/await</summary> <ul> <li> <details> <summary>Promise</summary> <ul> <li> <h3>Syntax</h3> <p>The constructor syntax for a promise object is:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span> <span style="color: #9cdcfe;">promise</span> = <span style="color: #569cd6;">new</span> <span style="color: #4ec9b0;">Promise</span>(<span style="color: #569cd6;">function</span> (<span style="color: #dcdcaa;">resolve</span>, <span style="color: #dcdcaa;">reject</span>) { </div> <div>&nbsp; &nbsp; <span style="color: #6a9955;">// executor (the producing code)</span></div> <div>});</div> </div> </div> <p>The function passed to new Promise is called the executor</p> <p>Its arguments resolve and reject are callbacks provided by JavaScript itself. Our code is only inside the executor. </p> <p>When the executor obtains the result, be it soon or late, doesn’t matter, it should call one of these callbacks: </p> <ol> <li>resolve(value) — if the job is finished successfully, with result value. </li> <li>reject(error) — if an error has occurred, error is the error object. </li> </ol> <p>The promise object returned by the new Promise constructor has these internal properties: </p> <ol> <li>state — initially "pending", then changes to either "fulfilled" when resolve is called or "rejected" when reject is called.</li> <li>result — initially undefined, then changes to value when resolve(value) is called or error when reject(error) is called.</li> </ol> <p>So the executor eventually moves promise to one of these states:</p> <svg xmlns="http://www.w3.org/2000/svg" width="512" height="246" viewBox="0 0 512 246"> <defs> <style> @import url(https://fonts.googleapis.com/css?family=Open+Sans:bold,italic,bolditalic%7CPT+Mono); @font-face { font-family: 'PT Mono'; font-weight: 700; font-style: normal; src: local('PT MonoBold'), url(/font/PTMonoBold.woff2) format('woff2'), url(/font/PTMonoBold.woff) format('woff'), url(/font/PTMonoBold.ttf) format('truetype') } </style> </defs> <g id="promise" fill="none" fill-rule="evenodd" stroke="none" stroke-width="1"> <g id="promise-resolve-reject.svg"> <path id="Rectangle-1" fill="#252732" stroke="#4b4e65" stroke-width="2" d="M1 91h182v70H1z" /><text id="new-Promise(executor" fill="#82807f" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="2" y="82">new Promise(executor) </tspan> </text><text id="state:-&quot;pending&quot;-res" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="13" y="115.432">state: "pending"</tspan> <tspan x="13" y="135.432"> result: undefined </tspan> </text> <path id="Line" fill="#7a7f9c" fill-rule="nonzero" d="M196.51 134.673l.908.419 103.284 47.574 2.51-5.45L313 189.433l-15.644.5 2.509-5.45-103.283-47.574-.909-.418.837-1.817z" /> <path id="Line-Copy" fill="#7a7f9c" fill-rule="nonzero" d="M297.38 56L313 57l-10.173 11.896-2.335-5.528-103.103 43.553-.921.39-.778-1.843.92-.39 103.104-43.552-2.334-5.527z" /> <text id="resolve(value)" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal" transform="rotate(-23 244.39 72.63)"> <tspan x="185.59" y="77.13"> resolve(value)</tspan> </text><text id="reject(error)" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal" transform="rotate(25 251.634 150.64)"> <tspan x="197.034" y="155.141"> reject(error)</tspan> </text> <path id="Rectangle-1-Copy" fill="#252732" stroke="#498e67" stroke-width="2" d="M323 10h182v64H323z" /><text id="state:-&quot;fulfilled&quot;-r" fill="#498e67" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="338" y="34.432">state: "fulfilled"</tspan> <tspan x="338" y="54.432"> result: value</tspan> </text> <path id="Rectangle-1-Copy-3" fill="#441b1b" stroke="#d55759" stroke-width="2" d="M323 177h182v64H323z" /><text id="state:-&quot;rejected&quot;-re" fill="#7a7f9c" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal"> <tspan x="338" y="201.432"> state: "rejected" </tspan> <tspan x="338" y="221.432"> result: error</tspan> </text> </g> </g> </svg> <p>Here’s an example of a function that retirn a promise and a simple executor function with “producing code” that takes time (via setTimeout): </p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function</span> <span style="color: #dcdcaa;">promo</span>(<span style="color: #9cdcfe;">a</span>, <span style="color: #9cdcfe;">b</span>, <span style="color: #9cdcfe;">c</span>, <span style="color: #9cdcfe;">d</span>) { </div> <div>&nbsp; &nbsp; <span style="color: #c586c0;">return</span> <span style="color: #569cd6;">new</span> <span style="color: #4ec9b0;">Promise</span>(<span style="color: #569cd6;">function</span> (<span style="color: #dcdcaa;">resolve</span>, <span style="color: #dcdcaa;">reject</span>) { </div> <div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #dcdcaa;">setTimeout</span>(() <span style="color: #569cd6;">=&gt;</span> { </div> <div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #dcdcaa;">resolve</span>(<span style="color: #9cdcfe;">a</span>) </div> <div>&nbsp; &nbsp; &nbsp; &nbsp; }, <span style="color: #9cdcfe;">b</span>); </div> <div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #dcdcaa;">setTimeout</span>(() <span style="color: #569cd6;">=&gt;</span> { </div> <div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #dcdcaa;">reject</span>(<span style="color: #9cdcfe;">c</span>) </div> <div>&nbsp; &nbsp; &nbsp; &nbsp; }, <span style="color: #9cdcfe;">d</span>) </div> <div>&nbsp; &nbsp; });</div> <div>}</div> </div> </div> </li> <li> <h3>Consumers: then, catch</h3> <ol> <li>then <br> The most important, fundamental one is .then. <br> The syntax is: <br> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #9cdcfe;">promise</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">(</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #569cd6;">function</span><span style="color: #cccccc;"> (</span><span style="color: #9cdcfe;">result</span><span style="color: #cccccc;">) { </span><span style="color: #6a9955;">/* handle a successful result */</span><span style="color: #cccccc;"> },</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #569cd6;">function</span><span style="color: #cccccc;"> (</span><span style="color: #9cdcfe;">error</span><span style="color: #cccccc;">) { </span><span style="color: #6a9955;">/* handle an error */</span><span style="color: #cccccc;"> }</span></div> <div><span style="color: #cccccc;">);</span> </div> </div> </div> <span>The first argument of .then is a function that runs when the promise is resolved and receives the result.The second argument of .then is a function that runs when the promise is rejected and receives the error.</span><br> <span>example:</span> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">promise</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Promise</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">function</span><span style="color: #cccccc;"> (</span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;">, </span><span style="color: #dcdcaa;">reject</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">setTimeout</span><span style="color: #cccccc;">(() </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"done!"</span><span style="color: #cccccc;">), </span><span style="color: #b5cea8;">1000</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">});</span> </div><br> <div><span style="color: #6a9955;">// resolve runs the first function in .then</span> </div> <div><span style="color: #9cdcfe;">promise</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">(</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">result</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">result</span><span style="color: #cccccc;">), </span><span style="color: #6a9955;">// shows "done!" after 1 second</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">error</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">error</span><span style="color: #cccccc;">) </span><span style="color: #6a9955;">// doesn't run</span></div> <div><span style="color: #cccccc;">);</span> </div> </div> </div> <span>The first function was executed.</span><br> <span>And in the case of a rejection, the second one:</span> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">promise</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Promise</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">function</span><span style="color: #cccccc;"> (</span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;">, </span><span style="color: #dcdcaa;">reject</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">setTimeout</span><span style="color: #cccccc;">(() </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">reject</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Error</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"Whoops!"</span><span style="color: #cccccc;">)), </span><span style="color: #b5cea8;">1000</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">});</span> </div><br> <div><span style="color: #6a9955;">// reject runs the second function in .then</span> </div> <div><span style="color: #9cdcfe;">promise</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">(</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">result</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">result</span><span style="color: #cccccc;">), </span><span style="color: #6a9955;">// doesn't run</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">error</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">error</span><span style="color: #cccccc;">) </span><span style="color: #6a9955;">// shows "Error: Whoops!" after 1 second</span> </div> <div><span style="color: #cccccc;">);</span> </div> </div> </div> <span>If we’re interested only in successful completions, then we can provide only one function argument to .then:</span> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">promise</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Promise</span><span style="color: #cccccc;">(</span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">setTimeout</span><span style="color: #cccccc;">(() </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"done!"</span><span style="color: #cccccc;">), </span><span style="color: #b5cea8;">1000</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">});</span> </div><br> <div><span style="color: #9cdcfe;">promise</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">(</span><span style="color: #dcdcaa;">alert</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// shows "done!" after 1 second</span> </div> </div> </div> </li> <li>.catch <p>If we’re interested only in errors, then we can use null as the first argument: .then(null, errorHandlingFunction). Or we can use .catch(errorHandlingFunction), which is exactly the same:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">promise</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Promise</span><span style="color: #cccccc;">((</span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;">, </span><span style="color: #dcdcaa;">reject</span><span style="color: #cccccc;">) </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">setTimeout</span><span style="color: #cccccc;">(() </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">reject</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Error</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"Whoops!"</span><span style="color: #cccccc;">)), </span><span style="color: #b5cea8;">1000</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">});</span> </div><br> <div><span style="color: #6a9955;">// .catch(f) is the same as promise.then(null, f)</span></div> <div><span style="color: #9cdcfe;">promise</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">catch</span><span style="color: #cccccc;">(</span><span style="color: #dcdcaa;">alert</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// shows "Error: Whoops!" after 1 second</span> </div> </div> </div> <br> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #9cdcfe;">The</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">call</span><span style="color: #cccccc;"> .</span><span style="color: #dcdcaa;">catch</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">f</span><span style="color: #cccccc;">) </span><span style="color: #9cdcfe;">is</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">a</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">complete</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">analog</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">of</span><span style="color: #cccccc;"> .</span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">null</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">f</span><span style="color: #cccccc;">), </span><span style="color: #9cdcfe;">it</span><span style="color: #cccccc;">’</span><span style="color: #9cdcfe;">s</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">just</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">a</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">shorthand</span><span style="color: #cccccc;">.</span> </div> </div> </div> </li> </ol> <h3>Cleanup: finally</h3> <p>example</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">//.finally will excute whatever the promise state </span></div> <div><span style="color: #569cd6;">function</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">sleep</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">a</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">b</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Promise</span><span style="color: #cccccc;">((</span><span style="color: #dcdcaa;">res</span><span style="color: #cccccc;">, </span><span style="color: #dcdcaa;">rej</span><span style="color: #cccccc;">) </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #dcdcaa;">setTimeout</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">_</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">res</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"resolved"</span><span style="color: #cccccc;">), </span><span style="color: #9cdcfe;">a</span><span style="color: #cccccc;">)</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #dcdcaa;">setTimeout</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">_</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">rej</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Error</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"rejected"</span><span style="color: #cccccc;">)), </span><span style="color: #9cdcfe;">b</span><span style="color: #cccccc;">)</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; })</span></div> <div><span style="color: #cccccc;">}</span> </div><br> <div><span style="color: #dcdcaa;">sleep</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">1000</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">2000</span><span style="color: #cccccc;">).</span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">r</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">r</span><span style="color: #cccccc;">)).</span><span style="color: #dcdcaa;">finally</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">_</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"finished"</span><span style="color: #cccccc;">)) </span><span style="color: #6a9955;">//log resolved then finsihed &nbsp;</span></div><br> <div><span style="color: #dcdcaa;">sleep</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">2000</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">1000</span><span style="color: #cccccc;">).</span><span style="color: #dcdcaa;">catch</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">er</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">er</span><span style="color: #cccccc;">)).</span><span style="color: #dcdcaa;">finally</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">_</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"finished"</span><span style="color: #cccccc;">)) </span><span style="color: #6a9955;">//log rejected error &nbsp;then log &nbsp;finsihed also</span></div> </div> </div> </li> <li> </li> </ul> </details> </li> <li> <details> <summary>Promises chaining</summary> <ul> <li> <h3>Promise chaining</h3> <p>In JavaScript, Promise chaining is a technique used to perform a sequence of asynchronous operations in a specific order. Promises are objects that represent the eventual completion or failure of an asynchronous operation and allow us to handle the results using callbacks.</p> <p>To understand promise chaining, let's consider an example where we fetch data from a server and perform some operations on the retrieved data.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #dcdcaa;">fetchData</span><span style="color: #cccccc;">()</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; .</span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">parseData</span><span style="color: #cccccc;">)</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; .</span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">processData</span><span style="color: #cccccc;">)</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; .</span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">displayResult</span><span style="color: #cccccc;">)</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; .</span><span style="color: #dcdcaa;">catch</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">handleError</span><span style="color: #cccccc;">);</span> </div> </div> </div> <p>In this example, we have a chain of promises, each representing a step in the process. Here's a breakdown of what each function does:</p> <ol> <li> <code>fetchData()</code> represents an asynchronous operation that fetches data from a server. It returns a promise that will eventually resolve with the fetched data. </li> <li> <code>parseData(data)</code> is a function that takes the fetched data as an input and performs some parsing or transformation. It also returns a promise that will resolve with the parsed data. </li> <li> <code>processData(parsedData)</code> is another function that takes the parsed data and processes it further. It returns a promise that will resolve with the processed data. </li> <li> <code>displayResult(processedData)</code> is a function that takes the processed data and displays the final result. </li> <li> <code>handleError(error)</code> is a function that handles any errors that occur during the promise chain. If any promise in the chain rejects, the error will propagate down to this catch block. </li> </ol> </li> <li> <h3>Returning promises</h3> <p>A handler, used in .then(handler) may create and return a promise.In that case further handlers wait until it settles, and then get its result.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Promise</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">function</span><span style="color: #cccccc;"> (</span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;">, </span><span style="color: #dcdcaa;">reject</span><span style="color: #cccccc;">) {</span></div><br> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">setTimeout</span><span style="color: #cccccc;">(() </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">), </span><span style="color: #b5cea8;">1000</span><span style="color: #cccccc;">);</span> </div><br> <div><span style="color: #cccccc;">}).</span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">function</span><span style="color: #cccccc;"> (</span><span style="color: #9cdcfe;">result</span><span style="color: #cccccc;">) {</span></div><br> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">result</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// 1</span></div><br> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Promise</span><span style="color: #cccccc;">((</span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;">, </span><span style="color: #dcdcaa;">reject</span><span style="color: #cccccc;">) </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> { </span><span style="color: #6a9955;">// (*)</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #dcdcaa;">setTimeout</span><span style="color: #cccccc;">(() </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">result</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">*</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">), </span><span style="color: #b5cea8;">1000</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; });</span></div><br> <div><span style="color: #cccccc;">}).</span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">function</span><span style="color: #cccccc;"> (</span><span style="color: #9cdcfe;">result</span><span style="color: #cccccc;">) { </span><span style="color: #6a9955;">// (**)</span></div><br> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">result</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// 2</span></div><br> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Promise</span><span style="color: #cccccc;">((</span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;">, </span><span style="color: #dcdcaa;">reject</span><span style="color: #cccccc;">) </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #dcdcaa;">setTimeout</span><span style="color: #cccccc;">(() </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">result</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">*</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">), </span><span style="color: #b5cea8;">1000</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; });</span></div><br> <div><span style="color: #cccccc;">}).</span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">function</span><span style="color: #cccccc;"> (</span><span style="color: #9cdcfe;">result</span><span style="color: #cccccc;">) {</span></div><br> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">result</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// 4</span></div><br> <div><span style="color: #cccccc;">});</span> </div> </div> </div> <p>Here the first .then shows 1 and returns new Promise(…) in the line (*). After one second it resolves, and the result (the argument of resolve, here it’s result * 2) is passed on to the handler of the second .then. That handler is in the line (**), it shows 2 and does the same thing. So the output is the same as in the previous example: 1 → 2 → 4, but now with 1 second delay between alert calls. Returning promises allows us to build chains of asynchronous actions.</p> </li> <li></li> </ul> </details> </li> <li> <details> <summary>Error handling with promises</summary> <ul> <li> <p>Promise chains are great at error handling. When a promise rejects, the control jumps to the closest rejection handler. That’s very convenient in practice.</p> <p>For instance, in the code below the URL to fetch is wrong (no such site) and .catch handles the error:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #dcdcaa;">fetch</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'https://no-such-server.blabla'</span><span style="color: #cccccc;">) </span><span style="color: #6a9955;">// rejects</span></div> <div><span style="color: #cccccc;">&nbsp; .</span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">response</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">response</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">json</span><span style="color: #cccccc;">())</span> </div> <div><span style="color: #cccccc;">&nbsp; .</span><span style="color: #dcdcaa;">catch</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">err</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">err</span><span style="color: #cccccc;">)) </span><span style="color: #6a9955;">// TypeError: NetworkError when attempting to fetch resource.</span></div> </div> </div> <p>As you can see, the .catch doesn’t have to be immediate. It may appear after one or maybe several .then.</p> <p>Or, maybe, everything is all right with the site, but the response is not valid JSON. The easiest way to catch all errors is to append .catch to the end of chain:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #dcdcaa;">fetch</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'/article/promise-chaining/user.json'</span><span style="color: #cccccc;">)</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; .</span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">response</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">response</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">json</span><span style="color: #cccccc;">())</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; .</span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">fetch</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">`https://api.github.com/users/</span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">`</span><span style="color: #cccccc;">))</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; .</span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">response</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">response</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">json</span><span style="color: #cccccc;">())</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; .</span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">githubUser</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Promise</span><span style="color: #cccccc;">((</span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;">, </span><span style="color: #dcdcaa;">reject</span><span style="color: #cccccc;">) </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">img</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">document</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">createElement</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'img'</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">img</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">src</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">githubUser</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">avatar_url</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">img</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">className</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #ce9178;">"promise-avatar-example"</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">document</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">body</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">append</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">img</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #dcdcaa;">setTimeout</span><span style="color: #cccccc;">(() </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">img</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">remove</span><span style="color: #cccccc;">();</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">githubUser</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; }, </span><span style="color: #b5cea8;">3000</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; }))</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; .</span><span style="color: #dcdcaa;">catch</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">error</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">error</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">message</span><span style="color: #cccccc;">)); </span></div> </div> </div> </li> <li> <h3>Implicit try…catch</h3> <p>The code of a promise executor and promise handlers has an "invisible try..catch" around it. If an exception happens, it gets caught and treated as a rejection.</p> <p>For instance, this code:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Promise</span><span style="color: #cccccc;">((</span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;">, </span><span style="color: #dcdcaa;">reject</span><span style="color: #cccccc;">) </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">throw</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Error</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"Whoops!"</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">}).</span><span style="color: #dcdcaa;">catch</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// Error: Whoops! </span></div> </div> </div> <p>…Works exactly the same as this:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Promise</span><span style="color: #cccccc;">((</span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;">, </span><span style="color: #dcdcaa;">reject</span><span style="color: #cccccc;">) </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">reject</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Error</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"Whoops!"</span><span style="color: #cccccc;">));</span> </div> <div><span style="color: #cccccc;">}).</span><span style="color: #dcdcaa;">catch</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// Error: Whoops! </span></div> </div> </div> <p>The "invisible try..catch" around the executor automatically catches the error and turns it into rejected promise. </p> <p>This happens not only in the executor function, but in its handlers as well. If we throw inside a .then handler, that means a rejected promise, so the control jumps to the nearest error handler.</p> <p>Here’s an example:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Promise</span><span style="color: #cccccc;">((</span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;">, </span><span style="color: #dcdcaa;">reject</span><span style="color: #cccccc;">) </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"ok"</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">}).</span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">((</span><span style="color: #9cdcfe;">result</span><span style="color: #cccccc;">) </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">throw</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Error</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"Whoops!"</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// rejects the promise</span></div> <div><span style="color: #cccccc;">}).</span><span style="color: #dcdcaa;">catch</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// Error: Whoops! </span></div> </div> </div> <p>This happens for all errors, not just those caused by the throw statement. For example, a programming error:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Promise</span><span style="color: #cccccc;">((</span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;">, </span><span style="color: #dcdcaa;">_</span><span style="color: #cccccc;">) </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"ok"</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">}).</span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">((</span><span style="color: #9cdcfe;">result</span><span style="color: #cccccc;">) </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">blabla</span><span style="color: #cccccc;">(); </span><span style="color: #6a9955;">// no such function</span></div> <div><span style="color: #cccccc;">}).</span><span style="color: #dcdcaa;">catch</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// ReferenceError: blabla is not defined</span></div> </div> </div> <p>The final .catch not only catches explicit rejections, but also accidental errors in the handlers above.</p> </li> <li> <h3>Rethrowing</h3> <p>The concept of "rethrowing" in JavaScript promises refers to the ability to handle errors in a .catch block and then either continue the error handling or pass the control to the next closest error handler.</p> <p>When we use a <code>.catch</code> block at the end of a promise chain, it functions similarly to a <code>try...catch</code> block. We can have multiple <code>.then</code> handlers to perform different tasks, and then use a single <code>.catch</code> block to handle errors that may occur in any of the preceding <code>.then</code> handlers. </p> <p>In regular try...catch blocks, we can analyze the error and choose whether to rethrow it if it cannot be handled. Similarly, with promises, we can achieve the same behavior.</p> <p>If we throw an error inside a .catch block, the control flow moves to the next closest error handler, either another .catch block or a global error handler. This allows us to handle the error at different levels of the promise chain.</p> <p>On the other hand, if we successfully handle the error and perform any necessary actions, the control flow continues to the next closest successful .then handler, allowing us to continue the normal execution of the promise chain.</p> <p>Here's an example to illustrate this behavior:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #dcdcaa;">fetchData</span><span style="color: #cccccc;">()</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; .</span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">parseData</span><span style="color: #cccccc;">)</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; .</span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">processData</span><span style="color: #cccccc;">)</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; .</span><span style="color: #dcdcaa;">catch</span><span style="color: #cccccc;">((</span><span style="color: #9cdcfe;">error</span><span style="color: #cccccc;">) </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;">// Handle the error</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">error</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'An error occurred:'</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">error</span><span style="color: #cccccc;">);</span> </div><br> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;">// Rethrow the error</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">throw</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">error</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; })</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; .</span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">displayResult</span><span style="color: #cccccc;">)</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; .</span><span style="color: #dcdcaa;">catch</span><span style="color: #cccccc;">((</span><span style="color: #9cdcfe;">error</span><span style="color: #cccccc;">) </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;">// Handle the error after rethrowing</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">error</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'Error after rethrowing:'</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">error</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; });</span></div> </div> </div> <p>Here the .catch block finishes normally. So the next successful .then handler is called.</p> <p>In the example below we see the other situation with.catch. The handler (*) catches the error and just can’thandle it (e.g. it only knows how to handle URIError),so it throws it again:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// the execution: catch -&gt; catch</span></div> <div><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Promise</span><span style="color: #cccccc;">((</span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;">, </span><span style="color: #dcdcaa;">reject</span><span style="color: #cccccc;">) </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> {</span></div><br> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">throw</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Error</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"Whoops!"</span><span style="color: #cccccc;">);</span> </div><br> <div><span style="color: #cccccc;">}).</span><span style="color: #dcdcaa;">catch</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">function</span><span style="color: #cccccc;"> (</span><span style="color: #9cdcfe;">error</span><span style="color: #cccccc;">) { </span><span style="color: #6a9955;">// (*)</span></div><br> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> (</span><span style="color: #9cdcfe;">error</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">instanceof</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">URIError</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;">// handle it</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; } </span><span style="color: #c586c0;">else</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"Can't handle such error"</span><span style="color: #cccccc;">);</span> </div><br> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">throw</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">error</span><span style="color: #cccccc;">; </span><span style="color: #6a9955;">// throwing this or another error jumps to the next catch</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; }</span></div><br> <div><span style="color: #cccccc;">}).</span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">function</span><span style="color: #cccccc;"> () {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #6a9955;">/* doesn't run here */</span></div> <div><span style="color: #cccccc;">}).</span><span style="color: #dcdcaa;">catch</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">error</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> { </span><span style="color: #6a9955;">// (**)</span></div><br> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">`The unknown error has occurred: </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">error</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">`</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// don't return anything =&gt; execution goes the normal way</span></div><br> <div><span style="color: #cccccc;">});</span> </div> </div> </div> <p>The execution jumps from the first .catch (*) to the next one (**) down the chain.</p> </li> <li> <h3>Unhandled rejections</h3> <p>When an error is not handled in a JavaScript promise chain, it results in an "unhandled rejection." This occurs when a promise becomes rejected, but there is no corresponding .catch block to handle the error.</p> <p>In such cases, the error becomes "stuck" because there is no code to handle it. This is similar to regular unhandled errors in code, indicating that something has gone wrong.</p> <p>Just like unhandled errors, unhandled promise rejections lead to the termination of the script. The JavaScript engine recognizes these unhandled rejections and generates a global error, which can be seen in the console.</p> <p>To catch and handle unhandled promise rejections in the browser, we can use the unhandledrejection event. By attaching an event listener to this event, we can access the event object, which contains information about the unhandled error. For example, we can access the rejected promise using event.promise and the error object using event.reason.</p> <p>Here's an example of using the unhandledrejection event to catch unhandled promise rejections:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Promise</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">function</span><span style="color: #cccccc;"> () {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">throw</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Error</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"Whoops!"</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">}); </span><span style="color: #6a9955;">// No catch block to handle the error </span></div> <div><span style="color: #9cdcfe;">window</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">addEventListener</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'unhandledrejection'</span><span style="color: #cccccc;">, </span><span style="color: #569cd6;">function</span><span style="color: #cccccc;"> (</span><span style="color: #9cdcfe;">event</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">event</span><span style="color: #cccccc;">.</span><span style="color: #4fc1ff;">promise</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// The promise that generated the error</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">event</span><span style="color: #cccccc;">.</span><span style="color: #4fc1ff;">reason</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// The unhandled error object</span></div> <div><span style="color: #cccccc;">});</span> </div> </div> </div> <p>In practical terms, when an unhandled rejection occurs, it is often an unrecoverable error. The recommended approach is to inform the user about the problem and potentially report the incident to the server for further analysis. </p> <p>In non-browser environments like Node.js, there are alternative ways to track and handle unhandled errors specific to that environment.</p> </li> </ul> </details> </li> <li> <details> <summary>Promise API</summary> <p>There are 6 static methods in the Promise class. We’ll quickly cover their use cases here.</p> <ul> <li> <h3>Promise.all</h3> <p>It takes multiple promises and waits for all of them to finish. It returns a new promise that resolves with an array of the results from each promise.</p> <p>Example:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #4ec9b0;">Promise</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">all</span><span style="color: #cccccc;">([</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">fetch</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'https://api.example.com/data1'</span><span style="color: #cccccc;">),</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">fetch</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'https://api.example.com/data2'</span><span style="color: #cccccc;">),</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">fetch</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'https://api.example.com/data3'</span><span style="color: #cccccc;">)</span> </div> <div><span style="color: #cccccc;">]).</span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">results</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">results</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// Array of results from each fetch</span></div> <div><span style="color: #cccccc;">});</span> </div> </div> </div> </li> <li> <h3>Promise.allSettled</h3> <p>It waits for all promises to complete, regardless of success or failure. It returns an array of objects containing the status and result of each promise.</p> <p>Example:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #4ec9b0;">Promise</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">allSettled</span><span style="color: #cccccc;">([</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">fetch</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'https://api.example.com/data1'</span><span style="color: #cccccc;">),</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">fetch</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'https://api.example.com/data2'</span><span style="color: #cccccc;">),</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">fetch</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'https://api.example.com/data3'</span><span style="color: #cccccc;">)</span> </div> <div><span style="color: #cccccc;">]).</span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">results</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">results</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// Array of objects with status and result/error</span></div> <div><span style="color: #cccccc;">});</span> </div> </div> </div> </li> <li> <h3>Promise.race</h3> <p> It waits for the first promise to finish, whether it resolves or rejects, and gets its result. Other promises are ignored.</p> <p>Example:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #4ec9b0;">Promise</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">race</span><span style="color: #cccccc;">([</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">fetch</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'https://api.example.com/data1'</span><span style="color: #cccccc;">),</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Promise</span><span style="color: #cccccc;">((</span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;">, </span><span style="color: #dcdcaa;">reject</span><span style="color: #cccccc;">) </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">setTimeout</span><span style="color: #cccccc;">(() </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">reject</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Error</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'Timeout'</span><span style="color: #cccccc;">)), </span><span style="color: #b5cea8;">5000</span><span style="color: #cccccc;">)),</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">fetch</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'https://api.example.com/data3'</span><span style="color: #cccccc;">)</span> </div> <div><span style="color: #cccccc;">]).</span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">result</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">result</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// Result of the fastest promise</span></div> <div><span style="color: #cccccc;">}).</span><span style="color: #dcdcaa;">catch</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">error</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">error</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// Error if the fastest promise rejected</span></div> <div><span style="color: #cccccc;">});</span> </div> </div> </div> </li> <li> <h3>Promise.any</h3> <p> It waits for the first promise to succeed and gets its result. If all promises are rejected, it returns an error object.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #4ec9b0;">Promise</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">race</span><span style="color: #cccccc;">([</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">fetch</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'https://api.example.com/data1'</span><span style="color: #cccccc;">),</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Promise</span><span style="color: #cccccc;">((</span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;">, </span><span style="color: #dcdcaa;">reject</span><span style="color: #cccccc;">) </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">setTimeout</span><span style="color: #cccccc;">(() </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">reject</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Error</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'Timeout'</span><span style="color: #cccccc;">)), </span><span style="color: #b5cea8;">5000</span><span style="color: #cccccc;">)),</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">fetch</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'https://api.example.com/data3'</span><span style="color: #cccccc;">)</span> </div> <div><span style="color: #cccccc;">]).</span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">result</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">result</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// Result of the fastest promise</span></div> <div><span style="color: #cccccc;">}).</span><span style="color: #dcdcaa;">catch</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">error</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">error</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// Error if the fastest promise rejected</span></div> <div><span style="color: #cccccc;">});</span> </div> </div> </div> </li> <li> <h3>Promise.resolve</h3> <p> It creates a resolved promise with the given value. It's useful when a function is expected to return a promise. </p> <p>Example:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #4ec9b0;">Promise</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">42</span><span style="color: #cccccc;">).</span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">result</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">result</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// 42</span></div> <div><span style="color: #cccccc;">});</span> </div> </div> </div> </li> <li> <h3>Promise.reject</h3> <p>It creates a rejected promise with the given error.</p> <p>Example:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #4ec9b0;">Promise</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">reject</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Error</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'Something went wrong'</span><span style="color: #cccccc;">)).</span><span style="color: #dcdcaa;">catch</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">error</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">error</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// Error object</span></div> <div><span style="color: #cccccc;">});</span> </div> </div> </div> </li> </ul> <p>These methods simplify handling and coordinating promises, making asynchronous programming easier and more efficient.</p> </details> </li> <li> <details> <summary>Promisification</summary> <p>Promisification is a simple transformation that converts a callback-based function into a function that returns a promise. This transformation is useful because promises are more convenient to work with than callbacks. </p> <p>Let's use an example to better understand this concept. Consider the loadScript(src, callback) function that loads a script and calls the callback with an error (if any) or the loaded script. To promisify it, we create a new function called loadScriptPromise(src) that returns a promise instead of using callbacks.</p> <p>Here's an example of how to promisify the loadScript function:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">loadScriptPromise</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">src</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Promise</span><span style="color: #cccccc;">((</span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;">, </span><span style="color: #dcdcaa;">reject</span><span style="color: #cccccc;">) </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #dcdcaa;">loadScript</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">src</span><span style="color: #cccccc;">, (</span><span style="color: #9cdcfe;">err</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">script</span><span style="color: #cccccc;">) </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> (</span><span style="color: #9cdcfe;">err</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #dcdcaa;">reject</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">err</span><span style="color: #cccccc;">);</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } </span><span style="color: #c586c0;">else</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">script</span><span style="color: #cccccc;">);</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; });</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; });</span> </div> <div><span style="color: #cccccc;">}</span></div><br> <div><span style="color: #6a9955;">// Usage:</span></div> <div><span style="color: #dcdcaa;">loadScriptPromise</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'path/script.js'</span><span style="color: #cccccc;">)</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; .</span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">script</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"sucess"</span><span style="color: #cccccc;">);</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; })</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; .</span><span style="color: #dcdcaa;">catch</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">error</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"err"</span><span style="color: #cccccc;">);</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; });</span> </div> </div> </div> <p>In this example, loadScriptPromise is a wrapper around the original loadScript function. It uses its own callback to resolve or reject the promise based on the result of loadScript.</p> <p>To simplify promisifying multiple functions, a helper function called promisify(f) can be used. It accepts a function f and returns a wrapper function that returns a promise.</p> <p>Here's an example of using the promisify helper:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">promisify</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">f</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">function</span><span style="color: #cccccc;"> (</span><span style="color: #d4d4d4;">...</span><span style="color: #9cdcfe;">args</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Promise</span><span style="color: #cccccc;">((</span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;">, </span><span style="color: #dcdcaa;">reject</span><span style="color: #cccccc;">) </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">function</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">callback</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">err</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">result</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> (</span><span style="color: #9cdcfe;">err</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #dcdcaa;">reject</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">err</span><span style="color: #cccccc;">);</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } </span><span style="color: #c586c0;">else</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">result</span><span style="color: #cccccc;">);</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></div><br> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">args</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">push</span><span style="color: #cccccc;">(</span><span style="color: #dcdcaa;">callback</span><span style="color: #cccccc;">);</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">f</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">call</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">this</span><span style="color: #cccccc;">, </span><span style="color: #d4d4d4;">...</span><span style="color: #9cdcfe;">args</span><span style="color: #cccccc;">);</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; });</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; };</span></div> <div><span style="color: #cccccc;">}</span></div><br> <div><span style="color: #6a9955;">// Usage:</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">loadScriptPromise</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">promisify</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">loadScript</span><span style="color: #cccccc;">);</span></div> <div><span style="color: #dcdcaa;">loadScriptPromise</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'path/script.js'</span><span style="color: #cccccc;">)</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; .</span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">script</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;">// Handle successful loading</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; })</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; .</span><span style="color: #dcdcaa;">catch</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">error</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;">// Handle error</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; });</span> </div> </div> </div> <p>The promisify function creates a wrapper around the original function f. It adds its own callback that resolves or rejects the promise based on the result of f.</p> <p>If the original function f expects a callback with multiple arguments (callback(err, res1, res2, ...)), an advanced version of promisify can be used by passing true as the second argument. This version resolves the promise with an array of callback results.</p> <p>Please note that promisification is a useful approach, especially when combined with async/await. However, it's not a complete replacement for callbacks, as a promise can only have one result, while a callback can be called multiple times. Therefore, promisification should only be used for functions that call the callback once.</p> </details> </li> <li> <details> <summary>Microtasks</summary> <p>Promise handlers like .then, .catch, and .finally are always executed asynchronously, even if the Promise is immediately resolved. This means that code below these handlers will run first before the handlers themselves.</p> <p>Here's an example to illustrate this behavior:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">promise</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Promise</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;">();</span></div><br> <div><span style="color: #9cdcfe;">promise</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">(() </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"promise done!"</span><span style="color: #cccccc;">));</span></div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"code finished"</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// This will be logged first</span></div> </div> </div> <p>In this example, "code finished" will be logged before "promise done!", even though the promise is already resolved. This is because promise handlers are placed in an internal queue called the "microtask queue" and executed when the JavaScript engine is free from the current code.</p> <p>If the order of execution is important to us, we can use another .then to ensure that the desired code runs after the promise handler:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #4ec9b0;">Promise</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;">()</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; .</span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">(() </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"promise done!"</span><span style="color: #cccccc;">))</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; .</span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">(() </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"code finished"</span><span style="color: #cccccc;">)); </span><span style="color: #6a9955;">// This will be logged after "promise done!"</span></div> </div> </div> <p>By chaining another .then to the promise, we ensure that "code finished" is executed after "promise done!".</p> <p>Additionally, unhandled promise rejections are detected by JavaScript when there is an error that is not handled at the end of the microtask queue. If an error occurs in a promise and is not caught using .catch, the JavaScript engine triggers an "unhandledrejection" event.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">promise</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Promise</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">reject</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Error</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"Promise Failed!"</span><span style="color: #cccccc;">));</span></div> <div><span style="color: #9cdcfe;">promise</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">catch</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">err</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'caught'</span><span style="color: #cccccc;">));</span></div> <div><span style="color: #9cdcfe;">window</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">addEventListener</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'unhandledrejection'</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">event</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">event</span><span style="color: #cccccc;">.</span><span style="color: #4fc1ff;">reason</span><span style="color: #cccccc;">)); </span><span style="color: #6a9955;">// This will not be triggered</span></div> </div> </div> <p>In the example above, the error is caught using .catch, so the "unhandledrejection" event will not be triggered.</p> <p>However, if we forget to add .catch to handle the error, the "unhandledrejection" event will be triggered:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">promise</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Promise</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">reject</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Error</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"Promise Failed!"</span><span style="color: #cccccc;">));</span></div> <div><span style="color: #9cdcfe;">window</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">addEventListener</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'unhandledrejection'</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">event</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">event</span><span style="color: #cccccc;">.</span><span style="color: #4fc1ff;">reason</span><span style="color: #cccccc;">)); </span><span style="color: #6a9955;">// This will be triggered</span></div> </div> </div> <p>To handle the error later, we can use a setTimeout to add the .catch after a certain delay:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">promise</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Promise</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">reject</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Error</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"Promise Failed!"</span><span style="color: #cccccc;">));</span></div> <div><span style="color: #dcdcaa;">setTimeout</span><span style="color: #cccccc;">(() </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">promise</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">catch</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">err</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'caught'</span><span style="color: #cccccc;">)), </span><span style="color: #b5cea8;">1000</span><span style="color: #cccccc;">);</span></div> <div><span style="color: #9cdcfe;">window</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">addEventListener</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'unhandledrejection'</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">event</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">event</span><span style="color: #cccccc;">.</span><span style="color: #4fc1ff;">reason</span><span style="color: #cccccc;">)); </span><span style="color: #6a9955;">// This will be triggered</span></div> </div> </div> <p>In this case, the "unhandledrejection" event will still be triggered because it occurs after the microtask queue is empty and has already examined the promises.</p> <p>In summary, promise handlers are always executed asynchronously through the microtask queue. To ensure that a piece of code runs after promise handlers, it can be added as a chained .then call. Unhandled promise rejections trigger the "unhandledrejection" event when the microtask queue is complete.</p> </details> </li> <li> <details> <summary>Async/await</summary> <ul> <li> <h3>Introduction to Async/Await</h3> <p>Async/await is a powerful feature in JavaScript that simplifies working with promises. It provides a more intuitive and readable syntax for writing asynchronous code. By using the async keyword before a function declaration, we indicate that the function will return a promise. This allows us to handle asynchronous operations in a more straightforward manner.</p> <p>Example</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">async</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">function</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">f</span><span style="color: #cccccc;">() {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">}</span> </div><br> <div><span style="color: #dcdcaa;">f</span><span style="color: #cccccc;">().</span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// 1 </span></div> </div> </div> </li> <li> <h3>The Await Keyword</h3> <p>The await keyword can only be used inside functions marked with the async keyword. When we use await before a promise, it pauses the function's execution and waits for the promise to settle. The function resumes its execution once the promise is resolved, and the result of the promise is returned.</p> <p>Example:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">async</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">function</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">f</span><span style="color: #cccccc;">() {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">promise</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Promise</span><span style="color: #cccccc;">((</span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;">, </span><span style="color: #dcdcaa;">reject</span><span style="color: #cccccc;">) </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #dcdcaa;">setTimeout</span><span style="color: #cccccc;">(() </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"done!"</span><span style="color: #cccccc;">), </span><span style="color: #b5cea8;">1000</span><span style="color: #cccccc;">)</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; });</span></div><br> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">result</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">await</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">promise</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">result</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// "done!"</span></div> <div><span style="color: #cccccc;">}</span> </div><br> <div><span style="color: #dcdcaa;">f</span><span style="color: #cccccc;">(); &nbsp;</span></div> </div> </div> </li> <li> <h3>Error Handling</h3> <p>When using await, if a promise is rejected, an error is thrown, similar to using a throw statement. To handle such errors, we can use try..catch blocks. This allows us to catch and handle any errors that occur during the asynchronous operation.</p> <p>Example:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">async</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">function</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">f</span><span style="color: #cccccc;">() {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">try</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">response</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">await</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">fetch</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'http://no-such-url'</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; } </span><span style="color: #c586c0;">catch</span><span style="color: #cccccc;"> (</span><span style="color: #9cdcfe;">err</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">err</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// TypeError: failed to fetch</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">}</span> </div> <div><span style="color: #dcdcaa;">f</span><span style="color: #cccccc;">(); </span></div> </div> </div> </li> <li> <h3>Additional Features</h3> <ol> <li>Async Class Methods: By using the async keyword before a class method declaration, we can make the method asynchronous. This ensures that the method always returns a promise and allows us to use await inside it.</li> <li>Await in Modules: In modern browsers, await can be used directly at the top level inside a module. However, if we're not using modules or need to support older browsers, we can wrap the code in an anonymous async function.</li> <li>Await with "Thenables": await can also be used with objects that have a callable then method, making them promise-compatible. These objects may not be actual promises but can still be used with await as long as they have a then method. <p>Example: </p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">class</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Thenable</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #569cd6;">constructor</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">num</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">num</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">num</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; }</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">resolve</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">reject</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #dcdcaa;">setTimeout</span><span style="color: #cccccc;">(() </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">this</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">num</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">*</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">), </span><span style="color: #b5cea8;">1000</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; }</span> </div> <div><span style="color: #cccccc;">}</span> </div><br> <div><span style="color: #569cd6;">async</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">function</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">f</span><span style="color: #cccccc;">() {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">result</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">await</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Thenable</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">result</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// 2</span></div> <div><span style="color: #cccccc;">}</span> </div><br> <div><span style="color: #dcdcaa;">f</span><span style="color: #cccccc;">(); &nbsp;</span> </div> </div> </div> </li> </ol> </li> <li> <h3>Summary</h3> <p>Async/await is a powerful tool for handling asynchronous operations in JavaScript. It simplifies the syntax and makes the code more readable. By using async and await, we can write asynchronous code that resembles synchronous code, without the need for excessive use of .then and .catch. Additionally, async/await works well with other promise-related features like error handling with try..catch and handling multiple promises simultaneously with Promise.all.</p> </li> </ul> </details> </li> </ul> </details> <details class="dad"> <summary>Generators, advanced iteration</summary> <ul> <li> <details> <summary>Generators</summary> <ul> <li> <h3>Introduction to Generators</h3> <p>Generators are a feature in JavaScript that allows functions to return multiple values, one at a time, on-demand. They are useful for creating data streams and working with iterables.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function*</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">generateSequence</span><span style="color: #cccccc;">() {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">yield</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">yield</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">3</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">} &nbsp;</span></div> </div> </div> </li> <li> <h3>Creating Generator Functions</h3> <p>Generator functions are defined using the function* syntax. When called, a generator function returns a special object called a "generator object" that manages the execution of the function.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function*</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">generateSequence</span><span style="color: #cccccc;">() {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">yield</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">yield</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">3</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">}</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">generator</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">generateSequence</span><span style="color: #cccccc;">();</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">generator</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// [object Generator] &nbsp;</span> </div> </div> </div> </li> <li> <h3>Executing Generator Functions</h3> <p>Generators are executed using the next() method of the generator object. Each call to next() runs the generator function until the nearest yield statement and pauses the execution, returning the yielded value.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function*</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">generateSequence</span><span style="color: #cccccc;">() {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">yield</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">yield</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">3</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">}</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">generator</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">generateSequence</span><span style="color: #cccccc;">();</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">one</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">generator</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">next</span><span style="color: #cccccc;">();</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">JSON</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">stringify</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">one</span><span style="color: #cccccc;">)); </span><span style="color: #6a9955;">// {value: 1, done: false} &nbsp;</span></div> </div> </div> </li> <li> <h3>Resuming Execution of Generators</h3> <p>After pausing the execution with a yield statement, the generator can be resumed by calling next() again. The execution continues from where it left off and returns the next yielded value.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function*</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">generateSequence</span><span style="color: #cccccc;">() {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">yield</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">yield</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">3</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">}</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">generator</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">generateSequence</span><span style="color: #cccccc;">();</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">two</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">generator</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">next</span><span style="color: #cccccc;">();</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">JSON</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">stringify</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">two</span><span style="color: #cccccc;">)); </span><span style="color: #6a9955;">// {value: 2, done: false} &nbsp;</span></div> </div> </div> </li> <li> <h3>Completing Execution of Generators</h3> <p>When a generator function reaches the end or encounters a return statement, it finishes its execution. The next() method returns an object with done: true to indicate that the generator is done.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function*</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">generateSequence</span><span style="color: #cccccc;">() {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">yield</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">yield</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">3</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">}</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">generator</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">generateSequence</span><span style="color: #cccccc;">();</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">three</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">generator</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">next</span><span style="color: #cccccc;">();</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">JSON</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">stringify</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">three</span><span style="color: #cccccc;">)); </span><span style="color: #6a9955;">// {value: 3, done: true} &nbsp;</span></div> </div> </div> </li> <li> <h3>Generator Syntax Variations</h3> <p>Both function* f(...) and function *f(...) are valid syntax for defining generator functions. The preferred syntax is function* as it clearly indicates that it is a generator function.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function*</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">f</span><span style="color: #cccccc;">() {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// generator function with function* syntax</span></div> <div><span style="color: #cccccc;">}</span> </div><br> <div><span style="color: #569cd6;">function*</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">f</span><span style="color: #cccccc;">() {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// generator function with function * syntax</span></div> <div><span style="color: #cccccc;">} &nbsp;</span></div> </div> </div> </li> <li> <h3>Iterating over Generators</h3> <p>Generators are iterable objects, which means they can be used with for...of loops to iterate over their yielded values. The for...of loop automatically calls the next() method and retrieves the values.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function*</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">generateSequence</span><span style="color: #cccccc;">() {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">yield</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">yield</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">yield</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">3</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">}</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">generator</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">generateSequence</span><span style="color: #cccccc;">();</span> </div><br> <div><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> (</span><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">value</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">of</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">generator</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">value</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// 1, then 2, then 3</span></div> <div><span style="color: #cccccc;">} &nbsp;</span></div> </div> </div> </li> <li> <h3>Spreading Generators</h3> <p>Generators can also be used with the spread syntax (...) to convert the generator into an array or to combine it with other iterables.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function*</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">generateSequence</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">start</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">end</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> (</span><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">i</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">start</span><span style="color: #cccccc;">; </span><span style="color: #9cdcfe;">i</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">&lt;=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">end</span><span style="color: #cccccc;">; </span><span style="color: #9cdcfe;">i</span><span style="color: #d4d4d4;">++</span><span style="color: #cccccc;">) </span><span style="color: #c586c0;">yield</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">i</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">}</span> </div><br> <div><span style="color: #569cd6;">const</span><span style="color: #cccccc;"> </span><span style="color: #4fc1ff;">generator</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">generateSequence</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">5</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #569cd6;">const</span><span style="color: #cccccc;"> </span><span style="color: #4fc1ff;">array</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> [</span><span style="color: #d4d4d4;">...</span><span style="color: #4fc1ff;">generator</span><span style="color: #cccccc;">];</span> </div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #4fc1ff;">array</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// [1, 2, 3, 4, 5] &nbsp;</span> </div> </div> </div> <p>You can also combine generators with other iterables using the spread syntax. Here's an example that combines a generator with an existing array:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function*</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">generateSequence</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">start</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">end</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> (</span><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">i</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">start</span><span style="color: #cccccc;">; </span><span style="color: #9cdcfe;">i</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">&lt;=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">end</span><span style="color: #cccccc;">; </span><span style="color: #9cdcfe;">i</span><span style="color: #d4d4d4;">++</span><span style="color: #cccccc;">) </span><span style="color: #c586c0;">yield</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">i</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">}</span> </div><br> <div><span style="color: #569cd6;">const</span><span style="color: #cccccc;"> </span><span style="color: #4fc1ff;">generator</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">generateSequence</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">3</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #569cd6;">const</span><span style="color: #cccccc;"> </span><span style="color: #4fc1ff;">array</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> [</span><span style="color: #b5cea8;">0</span><span style="color: #cccccc;">, </span><span style="color: #d4d4d4;">...</span><span style="color: #4fc1ff;">generator</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">4</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">5</span><span style="color: #cccccc;">];</span> </div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #4fc1ff;">array</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// [0, 1, 2, 3, 4, 5] &nbsp;</span> </div> </div> </div> </li> <li> <h3>Generator Composition</h3> <p>Generator composition allows generators to be embedded within each other, creating more complex sequences. The yield* syntax is used to compose one generator into another. </p> <p>Example:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function*</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">generateSequence</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">start</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">end</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> (</span><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">i</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">start</span><span style="color: #cccccc;">; </span><span style="color: #9cdcfe;">i</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">&lt;=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">end</span><span style="color: #cccccc;">; </span><span style="color: #9cdcfe;">i</span><span style="color: #d4d4d4;">++</span><span style="color: #cccccc;">) </span><span style="color: #c586c0;">yield</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">i</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">}</span> </div><br> <div><span style="color: #569cd6;">function*</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">generatePasswordCodes</span><span style="color: #cccccc;">() {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">yield</span><span style="color: #569cd6;">*</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">generateSequence</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">48</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">57</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// 0..9</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">yield</span><span style="color: #569cd6;">*</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">generateSequence</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">65</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">90</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// A..Z</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">yield</span><span style="color: #569cd6;">*</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">generateSequence</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">97</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">122</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// a..z</span></div> <div><span style="color: #cccccc;">}</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">str</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #ce9178;">''</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> (</span><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">code</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">of</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">generatePasswordCodes</span><span style="color: #cccccc;">()) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">str</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">+=</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">String</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">fromCharCode</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">code</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">}</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">str</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// 0..9A..Za..z</span></div> </div> </div> </li> <li> <h3>"yield" is a Two-Way Street</h3> <p>Generators can receive values from the calling code by using generator.next(arg). The argument becomes the result of the yield expression.</p> <p>Example:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function*</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">gen</span><span style="color: #cccccc;">() {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">result</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">yield</span><span style="color: #cccccc;"> </span><span style="color: #ce9178;">"2 + 2 = ?"</span><span style="color: #cccccc;">; </span><span style="color: #6a9955;">// yield returns the value</span> </div><br> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">result</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">}</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">generator</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">gen</span><span style="color: #cccccc;">();</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">question</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">generator</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">next</span><span style="color: #cccccc;">().</span><span style="color: #9cdcfe;">value</span><span style="color: #cccccc;">; </span><span style="color: #6a9955;">// first call, starts execution and returns value</span></div><br> <div><span style="color: #9cdcfe;">generator</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">next</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">4</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// pass the result into the generator &nbsp;</span></div> </div> </div> </li> <li> <h3>generator.throw</h3> <p>The calling code can throw an error into the generator using generator.throw(err). This error can be caught within the generator using try...catch blocks.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function*</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">gen</span><span style="color: #cccccc;">() {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">try</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">result</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">yield</span><span style="color: #cccccc;"> </span><span style="color: #ce9178;">"2 + 2 = ?"</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"This line is not reached due to the thrown exception"</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; } </span><span style="color: #c586c0;">catch</span><span style="color: #cccccc;"> (</span><span style="color: #9cdcfe;">e</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">e</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// shows the error</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">}</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">generator</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">gen</span><span style="color: #cccccc;">();</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">question</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">generator</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">next</span><span style="color: #cccccc;">().</span><span style="color: #9cdcfe;">value</span><span style="color: #cccccc;">;</span> </div><br> <div><span style="color: #9cdcfe;">generator</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">throw</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Error</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"The answer is not found in my database"</span><span style="color: #cccccc;">)); &nbsp;</span></div> </div> </div> </li> <li> <h3>generator.return</h3> <p>generator.return(value) finishes the execution of a generator and returns the given value. It can be used to stop a generator under specific conditions.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function*</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">gen</span><span style="color: #cccccc;">() {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">yield</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">yield</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">yield</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">3</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">}</span> </div><br> <div><span style="color: #569cd6;">const</span><span style="color: #cccccc;"> </span><span style="color: #4fc1ff;">g</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">gen</span><span style="color: #cccccc;">();</span> </div><br> <div><span style="color: #4fc1ff;">g</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">next</span><span style="color: #cccccc;">(); &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="color: #6a9955;">// { value: 1, done: false }</span> </div> <div><span style="color: #4fc1ff;">g</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">return</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'foo'</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// { value: "foo", done: true }</span></div> <div><span style="color: #4fc1ff;">g</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">next</span><span style="color: #cccccc;">(); &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="color: #6a9955;">// { value: undefined, done: true } &nbsp;</span></div> </div> </div> </li> <li> <h3>Stopping Generator Execution</h3> <p>When an error thrown from a generator is not caught within the generator itself, it propagates to the calling code. If uncaught, it will terminate the script.</p> <p>Example:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function*</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">generate</span><span style="color: #cccccc;">() {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">result</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">yield</span><span style="color: #cccccc;"> </span><span style="color: #ce9178;">"2 + 2 = ?"</span><span style="color: #cccccc;">; </span><span style="color: #6a9955;">// Error in this line</span></div> <div><span style="color: #cccccc;">}</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">generator</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">generate</span><span style="color: #cccccc;">();</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">question</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">generator</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">next</span><span style="color: #cccccc;">().</span><span style="color: #9cdcfe;">value</span><span style="color: #cccccc;">;</span> </div><br> <div><span style="color: #c586c0;">try</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">generator</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">throw</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Error</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"The answer is not found in my database"</span><span style="color: #cccccc;">));</span> </div> <div><span style="color: #cccccc;">} </span><span style="color: #c586c0;">catch</span><span style="color: #cccccc;"> (</span><span style="color: #9cdcfe;">e</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">e</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// shows the error</span></div> <div><span style="color: #cccccc;">} </span> </div> </div> </div> </li> </ul> </details> </li> <li> <details> <summary>Async iteration and generators</summary> <ul> <li> <h3>Async Iteration and Generators</h3> <p>This article discusses the concept of asynchronous iteration and how generators can be used to simplify the process. It explains how to implement asynchronous iteration using the Symbol.asyncIterator symbol and the for await...of loop. The article also provides examples of using async generators to generate sequences of values asynchronously.</p> </li> <li> <h3>Recall Iterables</h3> <p>This section reminds the reader about the concept of iterables in JavaScript. It explains that an iterable is an object that can be iterated over using the for...of loop. It also introduces the Symbol.iterator method, which is used to make an object iterable. The article provides an example of implementing the Symbol.iterator method for a range object that generates a sequence of values.</p> <p>Example </p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">range</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">from</span><span style="color: #9cdcfe;">:</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">,</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">to</span><span style="color: #9cdcfe;">:</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">5</span><span style="color: #cccccc;">,</span> </div><br> <div><span style="color: #cccccc;">&nbsp; &nbsp; [</span><span style="color: #9cdcfe;">Symbol</span><span style="color: #cccccc;">.</span><span style="color: #4fc1ff;">iterator</span><span style="color: #cccccc;">]() {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">current</span><span style="color: #9cdcfe;">:</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">this</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">from</span><span style="color: #cccccc;">,</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">last</span><span style="color: #9cdcfe;">:</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">this</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">to</span><span style="color: #cccccc;">,</span> </div><br> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #dcdcaa;">next</span><span style="color: #cccccc;">() {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> (</span><span style="color: #569cd6;">this</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">current</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">&lt;=</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">this</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">last</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> { </span><span style="color: #9cdcfe;">done</span><span style="color: #9cdcfe;">:</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">false</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">value</span><span style="color: #9cdcfe;">:</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">this</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">current</span><span style="color: #d4d4d4;">++</span><span style="color: #cccccc;"> };</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } </span><span style="color: #c586c0;">else</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> { </span><span style="color: #9cdcfe;">done</span><span style="color: #9cdcfe;">:</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">true</span><span style="color: #cccccc;"> };</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; };</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">};</span> </div><br> <div><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> (</span><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">value</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">of</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">range</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">value</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">} </span> </div> </div> </div> </li> <li> <h3>Async Iterables</h3> <p>This section introduces the concept of asynchronous iteration. It explains that asynchronous iteration is used when values are generated asynchronously, such as when making network requests. It describes the differences between regular iterables and async iterables, including the use of Symbol.asyncIterator and the requirement for the next() method to return a promise. The article provides an example of implementing an async iterable range object that generates values asynchronously.</p> <p>Example: </p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">range</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">from</span><span style="color: #9cdcfe;">:</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">,</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">to</span><span style="color: #9cdcfe;">:</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">5</span><span style="color: #cccccc;">,</span> </div><br> <div><span style="color: #cccccc;">&nbsp; &nbsp; [</span><span style="color: #9cdcfe;">Symbol</span><span style="color: #cccccc;">.</span><span style="color: #4fc1ff;">asyncIterator</span><span style="color: #cccccc;">]() {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">current</span><span style="color: #9cdcfe;">:</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">this</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">from</span><span style="color: #cccccc;">,</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">last</span><span style="color: #9cdcfe;">:</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">this</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">to</span><span style="color: #cccccc;">,</span> </div><br> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">async</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">next</span><span style="color: #cccccc;">() {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">await</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Promise</span><span style="color: #cccccc;">(</span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">setTimeout</span><span style="color: #cccccc;">(</span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">1000</span><span style="color: #cccccc;">));</span> </div><br> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> (</span><span style="color: #569cd6;">this</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">current</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">&lt;=</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">this</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">last</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> { </span><span style="color: #9cdcfe;">done</span><span style="color: #9cdcfe;">:</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">false</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">value</span><span style="color: #9cdcfe;">:</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">this</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">current</span><span style="color: #d4d4d4;">++</span><span style="color: #cccccc;"> };</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } </span><span style="color: #c586c0;">else</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> { </span><span style="color: #9cdcfe;">done</span><span style="color: #9cdcfe;">:</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">true</span><span style="color: #cccccc;"> };</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; };</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">};</span> </div> <div><span style="color: #cccccc;">(</span><span style="color: #569cd6;">async</span><span style="color: #cccccc;"> () </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">await</span><span style="color: #cccccc;"> (</span><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">value</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">of</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">range</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">value</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">})();</span> </div> </div> </div> </li> <li> <h3>The Spread Syntax Doesn't Work Asynchronously</h3> <p>This section explains that certain features, such as the spread syntax and the for...of loop without await, do not work with asynchronous iterables. It clarifies that these features expect a regular iterator, not an async iterator.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">([</span><span style="color: #d4d4d4;">...</span><span style="color: #9cdcfe;">range</span><span style="color: #cccccc;">]); </span><span style="color: #6a9955;">// Error, no Symbol.iterator</span> </div> </div> </div> </li> <li> <h3>Recall Generators</h3> <p>This section provides a recap of generators in JavaScript. It explains that generators are functions that generate values using the yield keyword. It introduces the function* syntax and demonstrates how to use generators with the for...of loop.</p> <p>example</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function*</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">generateSequence</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">start</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">end</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> (</span><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">i</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">start</span><span style="color: #cccccc;">; </span><span style="color: #9cdcfe;">i</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">&lt;=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">end</span><span style="color: #cccccc;">; </span><span style="color: #9cdcfe;">i</span><span style="color: #d4d4d4;">++</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">yield</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">i</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">}</span> </div><br> <div><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> (</span><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">value</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">of</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">generateSequence</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">5</span><span style="color: #cccccc;">)) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">value</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">} &nbsp;</span></div> </div> </div> </li> <li> <h3>Async Generators</h3> <p>This section introduces the concept of async generators, which are generators that can generate values asynchronously. It explains that async generators are created by adding the async keyword before the function* keyword. It also demonstrates how to use async generators with the for await...of loop.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">async</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">function*</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">generateSequence</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">start</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">end</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> (</span><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">i</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">start</span><span style="color: #cccccc;">; </span><span style="color: #9cdcfe;">i</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">&lt;=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">end</span><span style="color: #cccccc;">; </span><span style="color: #9cdcfe;">i</span><span style="color: #d4d4d4;">++</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">await</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Promise</span><span style="color: #cccccc;">(</span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">setTimeout</span><span style="color: #cccccc;">(</span><span style="color: #dcdcaa;">resolve</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">1000</span><span style="color: #cccccc;">));</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">yield</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">i</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">}</span> </div><br> <div><span style="color: #cccccc;">(</span><span style="color: #569cd6;">async</span><span style="color: #cccccc;"> () </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">await</span><span style="color: #cccccc;"> (</span><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">value</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">of</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">generateSequence</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">5</span><span style="color: #cccccc;">)) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">value</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">})();</span> </div> </div> </div> </li> </ul> </details> </li> </ul> </details> <details class="dad"> <summary>Modules</summary> <ul> <li> <details> <summary>Modules, introduction</summary> <ul> <li> <h3>Introduction to Modules</h3> <p>JavaScript initially did not have a language-level module syntax because scripts were small and simple. However, as applications grew in size and complexity, the need for organizing code into modules arose. To address this, various module systems were created by the community. </p> <p>Some of these module systems include:</p> <ol> <li>AMD: This module system, implemented by the library require.js, is one of the earliest module systems.</li> <li>CommonJS: Created specifically for Node.js servers, CommonJS is another module system that gained popularity.</li> <li>UMD: This module system was proposed as a universal solution compatible with both AMD and CommonJS. </li> </ol> <p>While these module systems have become part of history, they can still be found in older scripts. In 2015, the language-level module system was introduced in the JavaScript standard. Since then, it has evolved and gained support from major browsers and Node.js. Therefore, modern JavaScript modules are now widely used and will be the focus of further study.</p> </li> <li> <h3>What is a module?</h3> <p>A module is a file that contains code. It can be a script or a set of functions and variables that can be reused in other files. Modules use special keywords like export and import to share functionality between them.</p> <p>When a function or variable is labeled with the export keyword in a module, it means that it can be accessed from outside the module. Other modules can then use the import directive to bring in and use the exported functionality.</p> <p>For example, let's say we have a module called sayHi.js that exports a function sayHi:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// 📁 sayHi.js</span></div> <div><span style="color: #c586c0;">export</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">function</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">`Hello, </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">user</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">!`</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">}</span> </div> </div> </div> <p>In another file called main.js, we can import and use the sayHi function:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// 📁 main.js</span></div> <div><span style="color: #c586c0;">import</span><span style="color: #cccccc;"> { </span><span style="color: #9cdcfe;">sayHi</span><span style="color: #cccccc;"> } </span><span style="color: #c586c0;">from</span><span style="color: #cccccc;"> </span><span style="color: #ce9178;">'./sayHi.js'</span><span style="color: #cccccc;">;</span> </div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">sayHi</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// Output: function...</span></div> <div><span style="color: #dcdcaa;">sayHi</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'John'</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// Output: Hello, John!</span> </div> </div> </div> <p>The import directive loads the module (sayHi.js) using the provided path ('./sayHi.js') relative to the current file. It assigns the exported function (sayHi) to the corresponding variable (sayHi) in the importing module. </p> <p>To use modules in a web browser, we need to indicate that a script should be treated as a module by adding the attribute type="module" to the script tag:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #808080;">&lt;!</span><span style="color: #569cd6;">doctype</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">html</span><span style="color: #808080;">&gt;</span> </div> <div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">script</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">type</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">"module"</span><span style="color: #808080;">&gt;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #c586c0;">import</span><span style="color: #d4d4d4;"> { </span><span style="color: #9cdcfe;">sayHi</span><span style="color: #d4d4d4;"> } </span><span style="color: #c586c0;">from</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">'./say.js'</span><span style="color: #d4d4d4;">;</span> </div><br> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">document</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">body</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">innerHTML</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'John'</span><span style="color: #d4d4d4;">);</span> </div> <div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">script</span><span style="color: #808080;">&gt;</span> </div> </div> </div> <p>The browser will automatically fetch and evaluate the imported module and its dependencies, and then execute the script.</p> <p>It's important to note that when working with modules, they can only be used via HTTP(s) and not locally. If you try to open a web page with module imports using the file:// protocol, it won't work. You can use a local web server or tools like static-server or VS Code Live Server Extension to test modules locally.</p> </li> <li> <h3>key points about core module features</h3> <p>Here are the key points about core module features:</p> <ol> <li> <p>Modules always work in strict mode, which means assigning to an undeclared variable will give an error.</p> </li> <li> <p>Each module has its own top-level scope, and variables and functions defined in one module are not visible in other scripts unless explicitly exported and imported. </p> </li> <li> <p>Modules should export what they want to be accessible from outside and import what they need, using the import/export directives instead of relying on global variables.</p> </li> <li> <p>In the browser, each <code>&lt;script type="module"&gt;</code> tag represents a separate module with its own top-level scope. </p> </li> <li> <p>Module code is evaluated only once when imported. If the same module is imported multiple times, its code is executed only once, and its exports are shared among all further importers.</p> </li> <li> <p>The one-time evaluation of modules has consequences. For example, if a module has side effects like showing a message, importing it multiple times will trigger those effects only once, the first time it is imported.</p> </li> <li> <p>Modules can export objects, and changes made to the exported objects are visible across all importers. This allows for convenient configuration of modules, where a module provides a generic functionality that requires setup.</p> </li> <li> <p>Modules can export configuration objects, which can be initialized by the top-level application script and then used by other modules.</p> </li> </ol> </li> <li> <h3>import.meta</h3> <p>The import.meta object provides information about the current module. In a browser environment, it contains the URL of the script or the URL of the current webpage if the script is inline within HTML.</p> <p>Here's an example code snippet:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">script</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">type</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">"module"</span><span style="color: #808080;">&gt;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #c586c0;">import</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">meta</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">url</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// Outputs the URL of the script or the current webpage URL</span> </div> <div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">script</span><span style="color: #808080;">&gt;</span> </div> </div> </div> </li> <li> <h3>Browser-Specific Features and Build Tools</h3> <p>Explanation: This part discusses browser-specific features of module scripts, including the deferred execution of module scripts and the use of the async attribute. It also mentions the compatibility issues with older browsers and the use of build tools like Webpack to bundle and optimize modules.</p> <p>Example:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">script</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">type</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">"module"</span><span style="color: #808080;">&gt;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">typeof</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">button</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// object: the script can 'see' the button below</span></div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// as modules are deferred, the script runs after the whole page is loaded</span></div> <div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">script</span><span style="color: #808080;">&gt;</span> </div><br> <div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">script</span><span style="color: #808080;">&gt;</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">typeof</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">button</span><span style="color: #d4d4d4;">); </span><span style="color: #6a9955;">// button is undefined, the script can't see elements below</span> </div> <div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// regular scripts run immediately, before the rest of the page is processed</span></div> <div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">script</span><span style="color: #808080;">&gt;</span> </div><br> <div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">button</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">id</span><span style="color: #cccccc;">=</span><span style="color: #ce9178;">"button"</span><span style="color: #808080;">&gt;</span><span style="color: #cccccc;">Button</span><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">button</span><span style="color: #808080;">&gt;</span> </div> </div> </div> </li> </ul> </details> </li> <li> <details> <summary>Export and Import</summary> <ul> <li> <h3>Export before declarations</h3> <p>Export before declarations allows us to mark any declaration (variable, function, or class) as exported using the "export" keyword. Here are some examples:</p> <ol> <li> <p>Exporting an array:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #c586c0;">export</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">months</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> [</span><span style="color: #ce9178;">'Jan'</span><span style="color: #cccccc;">, </span><span style="color: #ce9178;">'Feb'</span><span style="color: #cccccc;">, </span><span style="color: #ce9178;">'Mar'</span><span style="color: #cccccc;">, </span><span style="color: #ce9178;">'Apr'</span><span style="color: #cccccc;">, </span><span style="color: #ce9178;">'Aug'</span><span style="color: #cccccc;">, </span><span style="color: #ce9178;">'Sep'</span><span style="color: #cccccc;">, </span><span style="color: #ce9178;">'Oct'</span><span style="color: #cccccc;">, </span><span style="color: #ce9178;">'Nov'</span><span style="color: #cccccc;">, </span><span style="color: #ce9178;">'Dec'</span><span style="color: #cccccc;">];</span> </div> </div> </div> </li> <li> <p>Exporting a constant:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #c586c0;">export</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">const</span><span style="color: #cccccc;"> </span><span style="color: #4fc1ff;">MODULES_BECAME_STANDARD_YEAR</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">2015</span><span style="color: #cccccc;">;</span> </div> </div> </div> </li> <li> <p>Exporting a class:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #c586c0;">export</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">class</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #569cd6;">constructor</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">name</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">name</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; }</span> </div> <div><span style="color: #cccccc;">}</span> </div> </div> </div> </li> </ol> <p>It's important to note that using "export" before a class or function declaration does not change it into a function expression. It remains a function declaration. Therefore, there is no need to add a semicolon at the end of export class or export function. For example:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #c586c0;">export</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">function</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">`Hello, </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">user</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">!`</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">} &nbsp;</span><span style="color: #6a9955;">// no ; at the end</span></div> </div> </div> <p>Additionally, we can use "export" separately from the declarations. We can first declare the functions or variables, and then export them using a list:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// 📁 say.js</span></div> <div><span style="color: #569cd6;">function</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">`Hello, </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">user</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">!`</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">}</span> </div><br> <div><span style="color: #569cd6;">function</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">sayBye</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">`Bye, </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">user</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">!`</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">}</span> </div><br> <div><span style="color: #c586c0;">export</span><span style="color: #cccccc;"> { </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #cccccc;">, </span><span style="color: #dcdcaa;">sayBye</span><span style="color: #cccccc;"> }; </span><span style="color: #6a9955;">// a list of exported variables</span></div> </div> </div> <p>Technically, we could also place the "export" keyword above the functions as well.</p> </li> <li> <h3>Import *</h3> <p>When importing modules in JavaScript, we typically specify the specific items we want to import using curly braces {...}. For example:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// 📁 main.js</span></div> <div><span style="color: #c586c0;">import</span><span style="color: #cccccc;"> { </span><span style="color: #9cdcfe;">sayHi</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">sayBye</span><span style="color: #cccccc;"> } </span><span style="color: #c586c0;">from</span><span style="color: #cccccc;"> </span><span style="color: #ce9178;">'./say.js'</span><span style="color: #cccccc;">;</span> </div><br> <div><span style="color: #dcdcaa;">sayHi</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'John'</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// Hello, John!</span></div> <div><span style="color: #dcdcaa;">sayBye</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'John'</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// Bye, John!</span></div> </div> </div> <p>However, if there are many items to import, we can use the import * as <obj> syntax to import everything as an object. For instance:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// 📁 main.js</span></div> <div><span style="color: #c586c0;">import</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">*</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">as</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">say</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">from</span><span style="color: #cccccc;"> </span><span style="color: #ce9178;">'./say.js'</span><span style="color: #cccccc;">;</span> </div><br> <div><span style="color: #9cdcfe;">say</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">sayHi</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'John'</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #9cdcfe;">say</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">sayBye</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'John'</span><span style="color: #cccccc;">);</span> </div> </div> </div> <p>Although importing everything may seem convenient and concise, there are a few reasons why explicitly listing imports is beneficial:</p> <ol> <li> <p>Explicitly listing imports provides shorter names when using the imported items. For example, <code>sayHi()</code> instead of <code>say.sayHi()</code>. </p> </li> <li> <p>An explicit list of imports offers a clearer overview of the code structure, highlighting what is used and where. This makes code support and refactoring easier.</p> </li> </ol> </li> <li> <h3>Export “as”</h3> <p>The similar syntax exists for export.</p> <p>Let’s export functions as hi and bye:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// 📁 say.js</span></div> <div><span style="color: #d4d4d4;">...</span> </div> <div><span style="color: #c586c0;">export</span><span style="color: #cccccc;"> { </span><span style="color: #9cdcfe;">sayHi</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">as</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">hi</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">sayBye</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">as</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">bye</span><span style="color: #cccccc;"> }; </span></div> </div> </div> <p>Now hi and bye are official names for outsiders, to be used in </p> <p>imports</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// 📁 main.js</span></div> <div><span style="color: #c586c0;">import</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">*</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">as</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">say</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">from</span><span style="color: #cccccc;"> </span><span style="color: #ce9178;">'./say.js'</span><span style="color: #cccccc;">;</span> </div><br> <div><span style="color: #9cdcfe;">say</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">hi</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'John'</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// Hello, John!</span></div> <div><span style="color: #9cdcfe;">say</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">bye</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'John'</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// Bye, John!</span></div> </div> </div> </li> <li> <h3>Export default</h3> <p>In JavaScript modules, there are typically two types: modules that contain a library or a pack of functions, and modules that declare a single entity, such as a class. The latter approach is commonly preferred, where each "thing" resides in its own module.</p> <p>To facilitate this approach, modules provide a special syntax called "export default" for the default export. By using "export default," we can export a single entity from a module without specifying its name explicitly.</p> <p>Here's an example of using export default to export a class: </p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// 📁 user.js</span></div> <div><span style="color: #c586c0;">export</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">default</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">class</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #569cd6;">constructor</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">name</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">name</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">} &nbsp;</span></div> </div> </div> <p>In this case, there can only be one export default per file. To import the default export, we don't need to use curly braces:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// 📁 main.js</span></div> <div><span style="color: #c586c0;">import</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">User</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">from</span><span style="color: #cccccc;"> </span><span style="color: #ce9178;">'./user.js'</span><span style="color: #cccccc;">; </span><span style="color: #6a9955;">// not {User}, just User</span> </div><br> <div><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">User</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'John'</span><span style="color: #cccccc;">);</span> </div> </div> </div> <p>Importing without curly braces provides a cleaner syntax. It's important to remember that when using modules, named exports require curly braces, while the default export does not.</p> <p>To summarize the differences between named exports and default exports:</p> <table> <thead> <tr> <th>Named export</th> <th>Default export</th> </tr> </thead> <tbody> <tr> <td><code>export class User {...}</code> </td> <td><code>export default class User {...}</code> </td> </tr> <tr> <td><code>import {User} from ...</code> </td> <td><code>import User from ...</code> </td> </tr> </tbody> </table> <p>Technically, a module can have both named exports and a default export, but in practice, it's common to use either named exports or a default export.</p> <p>When using export default, the exported entity can have no name because there can only be one default export per file. For example:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #c586c0;">export</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">default</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">class</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #569cd6;">constructor</span><span style="color: #cccccc;">() { </span><span style="color: #d4d4d4;">...</span><span style="color: #cccccc;"> }</span></div> <div><span style="color: #cccccc;">}</span> </div> </div> </div><br> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #c586c0;">export</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">default</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">function</span><span style="color: #cccccc;"> (</span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">`Hello, </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">user</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">!`</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">}</span> </div> </div> </div><br> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #c586c0;">export</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">default</span><span style="color: #cccccc;"> [</span><span style="color: #ce9178;">'Jan'</span><span style="color: #cccccc;">, </span><span style="color: #ce9178;">'Feb'</span><span style="color: #cccccc;">, </span><span style="color: #ce9178;">'Mar'</span><span style="color: #cccccc;">, </span><span style="color: #ce9178;">'Apr'</span><span style="color: #cccccc;">, </span><span style="color: #ce9178;">'Aug'</span><span style="color: #cccccc;">, </span><span style="color: #ce9178;">'Sep'</span><span style="color: #cccccc;">, </span><span style="color: #ce9178;">'Oct'</span><span style="color: #cccccc;">, </span><span style="color: #ce9178;">'Nov'</span><span style="color: #cccccc;">, </span><span style="color: #ce9178;">'Dec'</span><span style="color: #cccccc;">];</span> </div> </div> </div> <p>In these cases, the exported entities don't have explicit names, but they can still be imported without curly braces. It's worth noting that if a non-default export doesn't have a name, it would result in an error.</p> </li> <li> <h3>The “default” name</h3> <p>In certain situations, the "default" keyword is used to reference the default export.</p> <p>For example, if we want to export a function separately from its definition, we can use the "default" keyword:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">function</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">`Hello, </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">user</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">!`</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">}</span> </div><br> <div><span style="color: #6a9955;">// Same as if we added "export default" before the function</span></div> <div><span style="color: #c586c0;">export</span><span style="color: #cccccc;"> { </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">as</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">default</span><span style="color: #cccccc;"> };</span></div> </div> </div> <p>Another scenario is when a module exports one main "default" thing along with a few named exports (although this is less common):</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// 📁 user.js</span></div> <div><span style="color: #c586c0;">export</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">default</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">class</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #569cd6;">constructor</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">name</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">name</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">}</span> </div><br> <div><span style="color: #c586c0;">export</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">function</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">sayHi</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">`Hello, </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">user</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">!`</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">} &nbsp;</span></div> </div> </div> <p>To import the default export along with a named export, we can use the "default" keyword:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// 📁 main.js</span></div> <div><span style="color: #c586c0;">import</span><span style="color: #cccccc;"> { </span><span style="color: #c586c0;">default</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">as</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">User</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">sayHi</span><span style="color: #cccccc;"> } </span><span style="color: #c586c0;">from</span><span style="color: #cccccc;"> </span><span style="color: #ce9178;">'./user.js'</span><span style="color: #cccccc;">;</span> </div><br> <div><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">User</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'John'</span><span style="color: #cccccc;">);</span> </div> </div> </div> <p>Lastly, when importing everything using the * as syntax to create an object, the "default" property of the imported object represents the default export:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #6a9955;">// 📁 main.js</span></div> <div><span style="color: #c586c0;">import</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">*</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">as</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">from</span><span style="color: #cccccc;"> </span><span style="color: #ce9178;">'./user.js'</span><span style="color: #cccccc;">;</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">User</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">default</span><span style="color: #cccccc;">; </span><span style="color: #6a9955;">// the default export</span></div> <div><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">User</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'John'</span><span style="color: #cccccc;">);</span> </div> </div> </div> <p>In this case, we can access the default export using the "default" property of the imported object (user.default in this example).</p> </li> </ul> </details> </li> <li> <details> <summary>Dynamic imports</summary> <p>When working with JavaScript modules, the import and export statements are considered "static" because their syntax is fixed and doesn't allow dynamic behavior. However, there is a way to dynamically import modules at runtime using the import() expression.</p> <p>The import(module) expression loads the specified module and returns a promise that resolves into a module object containing all its exports. This expression can be used from anywhere in the code. Here's an example of how to use it:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">modulePath</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">prompt</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"Which module to load?"</span><span style="color: #cccccc;">);</span></div><br> <div><span style="color: #dcdcaa;">import</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">modulePath</span><span style="color: #cccccc;">)</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; .</span><span style="color: #dcdcaa;">then</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">obj</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;">// Module loaded successfully, use the module object</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; })</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; .</span><span style="color: #dcdcaa;">catch</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">err</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;">// Error occurred while loading the module</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; });</span> </div> </div> </div> <p>Alternatively, if you are inside an async function, you can use the await keyword to make the code more concise:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">modulePath</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">prompt</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"Which module to load?"</span><span style="color: #cccccc;">);</span></div><br> <div><span style="color: #c586c0;">try</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">obj</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">await</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">import</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">modulePath</span><span style="color: #cccccc;">);</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// Module loaded successfully, use the module object</span></div> <div><span style="color: #cccccc;">} </span><span style="color: #c586c0;">catch</span><span style="color: #cccccc;"> (</span><span style="color: #9cdcfe;">err</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// Error occurred while loading the module</span></div> <div><span style="color: #cccccc;">}</span></div> </div> </div> <p>In both cases, you can access the exported values from the loaded module object. If the module exports multiple named values, you can destructure them directly:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> { </span><span style="color: #9cdcfe;">hi</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">bye</span><span style="color: #cccccc;"> } </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">await</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">import</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'./say.js'</span><span style="color: #cccccc;">);</span></div> <div><span style="color: #dcdcaa;">hi</span><span style="color: #cccccc;">();</span></div> <div><span style="color: #dcdcaa;">bye</span><span style="color: #cccccc;">();</span></div> </div> </div> <p>If the module has a default export, you can access it using the default property of the module object:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">obj</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">await</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">import</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'./say.js'</span><span style="color: #cccccc;">);</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">say</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">obj</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">default</span><span style="color: #cccccc;">;</span></div> <div><span style="color: #6a9955;">// or in one line: let { default: say } = await import('./say.js');</span></div><br> <div><span style="color: #dcdcaa;">say</span><span style="color: #cccccc;">();</span></div> </div> </div> <p>It's important to note that dynamic imports work in regular scripts and don't require the script tag with type="module". Also, while the import() expression may look like a function call, it's a special syntax that cannot be copied to a variable or used with call() or apply().</p> </details> </li> </ul> </details> <details class="dad"> <summary>Miscellaneous</summary> <ul> <li> <details> <summary>Proxy and Reflect</summary> <ul> <li> <h3>Introduction</h3> <p>A Proxy object wraps another object and intercepts operations, like reading/writing properties and others, optionally handling them on its own, or transparently allowing the object to handle them.</p> <p>Proxies are used in many libraries and some browser frameworks. We’ll see many practical applications in this article.</p> </li> <li> <h3>Proxy</h3> <p>The Proxy object in JavaScript allows us to intercept and customize the behavior of fundamental operations on an object. We create a proxy using the new Proxy(target, handler) syntax, where target is the object to wrap, and handler is the proxy configuration.</p> <p>Here's an example of creating a proxy without any traps:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">target</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> {};</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">proxy</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Proxy</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">target</span><span style="color: #cccccc;">, {}); </span><span style="color: #6a9955;">// empty handler</span></div><br> <div><span style="color: #9cdcfe;">proxy</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">test</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">5</span><span style="color: #cccccc;">; </span><span style="color: #6a9955;">// writing to proxy (1)</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">target</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">test</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// 5, the property appeared in target!</span></div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">proxy</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">test</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// 5, we can read it from proxy too (2)</span></div> <div><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> (</span><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">key</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">in</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">proxy</span><span style="color: #cccccc;">) </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">key</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// test, iteration works (3)</span> </div> </div> </div> <p>In this example, without any traps in the handler, the proxy acts as a transparent wrapper around the target object. All operations on the proxy are forwarded to the target. Writing to proxy.test (1) sets the value on the target object, and reading proxy.test (2) returns the value from the target object. Iterating over proxy (3) retrieves the values from the target object.</p> <p>To customize the behavior of the proxy, we can add traps to the handler object. Proxy traps intercept invocations of internal methods that govern various operations on objects. Here's a table showing the internal methods and their corresponding handler methods:</p> <table> <thead> <tr> <th>Internal Method</th> <th>Handler Method</th> <th>Triggers when...</th> </tr> </thead> <tbody> <tr> <td>[[Get]]</td> <td>get</td> <td>Reading a property</td> </tr> <tr> <td>[[Set]]</td> <td>set</td> <td>Writing to a property</td> </tr> <tr> <td>[[HasProperty]]</td> <td>has</td> <td>The <code>in</code> operator</td> </tr> <tr> <td>[[Delete]]</td> <td>deleteProperty</td> <td>The <code>delete</code> operator </td> </tr> <tr> <td>[[Call]]</td> <td>apply</td> <td>Function call</td> </tr> <tr> <td>[[Construct]]</td> <td>construct</td> <td>The <code>new</code> operator</td> </tr> <tr> <td>[[GetPrototypeOf]]</td> <td>getPrototypeOf</td> <td><code>Object.getPrototypeOf</code> </td> </tr> <tr> <td>[[SetPrototypeOf]]</td> <td>setPrototypeOf</td> <td><code>Object.setPrototypeOf</code> </td> </tr> <tr> <td>[[IsExtensible]]</td> <td>isExtensible</td> <td><code>Object.isExtensible</code> </td> </tr> <tr> <td>[[PreventExtensions]]</td> <td>preventExtensions</td> <td><code>Object.preventExtensions</code> </td> </tr> <tr> <td>[[DefineOwnProperty]]</td> <td>defineProperty</td> <td><code>Object.defineProperty</code>, <code>Object.defineProperties</code> </td> </tr> <tr> <td>[[GetOwnProperty]]</td> <td>getOwnPropertyDescriptor</td> <td><code>Object.getOwnPropertyDescriptor</code>, <code>for..in</code>, <code>Object.keys/values/entries</code> </td> </tr> <tr> <td>[[OwnPropertyKeys]]</td> <td>ownKeys</td> <td><code>Object.getOwnPropertyNames</code>, <code>Object.getOwnPropertySymbols</code>, <code>for..in</code>, <code>Object.keys/values/entries</code> </td> </tr> </tbody> </table> <p>By implementing these handler methods, we can intercept and handle the corresponding operations on the proxy.</p> <p>It's important to note that there are invariants in JavaScript that define conditions that must be fulfilled by internal methods and traps. For example, [[Set]] must return true if the value was written successfully, otherwise false. Violating these invariants may lead to incorrect behavior. The full list of invariants can be found in the JavaScript specification.</p> <p>With Proxy, we have the flexibility to customize the behavior of objects and intercept their operations, allowing for powerful metaprogramming capabilities in JavaScript.</p> </li> <li> <h3>Default value with “get” trap</h3> <p>When using the get trap in a Proxy, we can intercept and customize property reading operations. The get method in the handler is triggered when a property is read and has the following arguments:</p> <ol> <li><code>target</code>: The target object, which is the object passed as the first argument to <code>new Proxy</code>. </li> <li><code>property</code>: The name of the property being read.</li> <li><code>receiver</code>: The object that will be used as <code>this</code> when accessing the property. In most cases, it's the proxy object itself.</li> </ol> <p>We can utilize the get trap to implement default values for object properties. Here's an example where we create a proxy for an array that returns a default value of 0 for non-existing indices:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">numbers</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> [</span><span style="color: #b5cea8;">0</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">];</span> </div><br> <div><span style="color: #9cdcfe;">numbers</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Proxy</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">numbers</span><span style="color: #cccccc;">, {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">get</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">target</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">prop</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> (</span><span style="color: #9cdcfe;">prop</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">in</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">target</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">target</span><span style="color: #cccccc;">[</span><span style="color: #9cdcfe;">prop</span><span style="color: #cccccc;">];</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; } </span><span style="color: #c586c0;">else</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">0</span><span style="color: #cccccc;">; </span><span style="color: #6a9955;">// default value</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">});</span> </div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">numbers</span><span style="color: #cccccc;">[</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">]); </span><span style="color: #6a9955;">// 1</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">numbers</span><span style="color: #cccccc;">[</span><span style="color: #b5cea8;">123</span><span style="color: #cccccc;">]); </span><span style="color: #6a9955;">// 0 (no such item)</span></div> </div> </div> <p>In this example, accessing numbers[1] returns the value 1 from the target array. However, when accessing numbers[123], which is not a valid index, the get trap intercepts the operation and returns the default value 0.</p> <p>We can also use the get trap to implement custom behavior for dictionary-like objects. For instance, if we have a dictionary with phrases and their translations, we can make it return the untranslated phrase instead of undefined when a translation is missing:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">dictionary</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #ce9178;">'Hello'</span><span style="color: #9cdcfe;">:</span><span style="color: #cccccc;"> </span><span style="color: #ce9178;">'Hola'</span><span style="color: #cccccc;">,</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #ce9178;">'Bye'</span><span style="color: #9cdcfe;">:</span><span style="color: #cccccc;"> </span><span style="color: #ce9178;">'Adiós'</span> </div> <div><span style="color: #cccccc;">};</span> </div><br> <div><span style="color: #9cdcfe;">dictionary</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Proxy</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">dictionary</span><span style="color: #cccccc;">, {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">get</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">target</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">phrase</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> (</span><span style="color: #9cdcfe;">phrase</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">in</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">target</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">target</span><span style="color: #cccccc;">[</span><span style="color: #9cdcfe;">phrase</span><span style="color: #cccccc;">];</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; } </span><span style="color: #c586c0;">else</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">phrase</span><span style="color: #cccccc;">; </span><span style="color: #6a9955;">// untranslated phrase</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">});</span> </div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">dictionary</span><span style="color: #cccccc;">[</span><span style="color: #ce9178;">'Hello'</span><span style="color: #cccccc;">]); </span><span style="color: #6a9955;">// Hola</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">dictionary</span><span style="color: #cccccc;">[</span><span style="color: #ce9178;">'Welcome to Proxy'</span><span style="color: #cccccc;">]); </span><span style="color: #6a9955;">// Welcome to Proxy (no translation) &nbsp;</span></div> </div> </div> <p>In this case, the get trap intercepts property reading from the dictionary object. If the requested phrase exists in the dictionary, its translation is returned. Otherwise, the untranslated phrase itself is returned as the default value.</p> <p>Note that when using a Proxy, it's important to assign the proxy to the variable to replace the original object completely. All references should point to the proxy object to ensure consistent behavior.</p> </li> <li> <h3>Validation with “set” trap</h3> <p>Validation with the "set" trap allows us to create an array that only accepts numbers. If we try to add a value of any other type, an error occurs.</p> <p>To use the "set" trap for validation, we can create a Proxy object for our array. The "set" trap is triggered whenever a property is written to the object.</p> <p>Here's an example:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">numbers</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> [];</span></div><br> <div><span style="color: #9cdcfe;">numbers</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Proxy</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">numbers</span><span style="color: #cccccc;">, {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">set</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">target</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">prop</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">val</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> (</span><span style="color: #569cd6;">typeof</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">val</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">===</span><span style="color: #cccccc;"> </span><span style="color: #ce9178;">'number'</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">target</span><span style="color: #cccccc;">[</span><span style="color: #9cdcfe;">prop</span><span style="color: #cccccc;">] </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">val</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">true</span><span style="color: #cccccc;">; </span><span style="color: #6a9955;">// Setting is successful</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; } </span><span style="color: #c586c0;">else</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">false</span><span style="color: #cccccc;">; </span><span style="color: #6a9955;">// Trigger a TypeError</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">});</span> </div><br> <div><span style="color: #9cdcfe;">numbers</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">push</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// Added successfully</span></div> <div><span style="color: #9cdcfe;">numbers</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">push</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// Added successfully</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"Length is: "</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">+</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">numbers</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">length</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// Output: Length is: 2</span> </div><br> <div><span style="color: #9cdcfe;">numbers</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">push</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"test"</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// TypeError: 'set' on proxy returned false</span></div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"This line is never reached (error in the line above)"</span><span style="color: #cccccc;">);</span> </div> </div> </div> <p>Note that the built-in functionality of arrays still works. We can add values using methods like push, and the length property will automatically increase. Our proxy doesn't break anything.</p> <p>We don't need to override the array methods like push or unshift to add checks because they internally use the [[Set]] operation, which is intercepted by the proxy. </p> <p>It's important to remember to always return true from the "set" trap for a successful write. Forgetting to do so or returning any falsy value will trigger a TypeError. </p> </li> <li> <h3>Iteration with “ownKeys” and “getOwnPropertyDescriptor”</h3> <p>When we want to iterate over an object's properties using methods like Object.keys, for..in loop, or Object.values, they internally use the [[OwnPropertyKeys]] method (intercepted by the ownKeys trap) to retrieve a list of properties. However, these methods have some differences in behavior:</p> <ol> <li><code>Object.getOwnPropertyNames(obj)</code> returns non-symbol keys.</li> <li><code>Object.getOwnPropertySymbols(obj)</code> returns symbol keys.</li> <li><code>Object.keys</code> and <code>Object.values</code> return non-symbol keys/values with the enumerable flag. </li> <li><code>for..in</code> loop iterates over non-symbol keys with the enumerable flag, including prototype keys.</li> </ol> <p>In the following example, we use the ownKeys trap to modify the behavior of the for..in loop, Object.keys, and Object.values. We want to skip properties that start with an underscore _:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #cccccc;"> </span><span style="color: #ce9178;">"John"</span><span style="color: #cccccc;">,</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">age</span><span style="color: #9cdcfe;">:</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">30</span><span style="color: #cccccc;">,</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">_password</span><span style="color: #9cdcfe;">:</span><span style="color: #cccccc;"> </span><span style="color: #ce9178;">"***"</span> </div> <div><span style="color: #cccccc;">};</span> </div><br> <div><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Proxy</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;">, {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">ownKeys</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">target</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Object</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">keys</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">target</span><span style="color: #cccccc;">).</span><span style="color: #dcdcaa;">filter</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">key</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">!</span><span style="color: #9cdcfe;">key</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">startsWith</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'_'</span><span style="color: #cccccc;">));</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">});</span> </div><br> <div><span style="color: #6a9955;">// "ownKeys" filters out _password</span> </div> <div><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> (</span><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">key</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">in</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;">) </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">key</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// Output: name, then: age</span> </div><br> <div><span style="color: #6a9955;">// same effect on these methods:</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #4ec9b0;">Object</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">keys</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;">)); </span><span style="color: #6a9955;">// Output: name, age</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #4ec9b0;">Object</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">values</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;">)); </span><span style="color: #6a9955;">// Output: John, 30 &nbsp;</span> </div> </div> </div> <p>This implementation works as expected.</p> <p>However, there is a caveat when returning a key that doesn't exist in the object. In the example below, we create an empty object and use the ownKeys trap to return ['a', 'b', 'c'] as the list of properties:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> {};</span></div><br> <div><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Proxy</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;">, {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">ownKeys</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">target</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> [</span><span style="color: #ce9178;">'a'</span><span style="color: #cccccc;">, </span><span style="color: #ce9178;">'b'</span><span style="color: #cccccc;">, </span><span style="color: #ce9178;">'c'</span><span style="color: #cccccc;">];</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">});</span> </div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #4ec9b0;">Object</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">keys</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;">)); </span><span style="color: #6a9955;">// Output: &lt;empty&gt;</span> </div> </div> </div> <p>The reason for the empty output is that Object.keys only returns properties with the enumerable flag. It checks the descriptor of each property using the [[GetOwnProperty]] internal method. Since there are no properties in the object, the descriptors are empty, and they don't have the enumerable flag, causing them to be skipped.</p> <p>To make Object.keys return a property, it needs to either exist in the object with the enumerable flag or we can intercept calls to [[GetOwnProperty]] using the getOwnPropertyDescriptor trap and return a descriptor with enumerable: true.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> {};</span></div><br> <div><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Proxy</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;">, {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">ownKeys</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">target</span><span style="color: #cccccc;">) { </span><span style="color: #6a9955;">// called once to get a list of properties</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> [</span><span style="color: #ce9178;">'a'</span><span style="color: #cccccc;">, </span><span style="color: #ce9178;">'b'</span><span style="color: #cccccc;">, </span><span style="color: #ce9178;">'c'</span><span style="color: #cccccc;">];</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; },</span></div><br> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">getOwnPropertyDescriptor</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">target</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">prop</span><span style="color: #cccccc;">) { </span><span style="color: #6a9955;">// called for every property</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">enumerable</span><span style="color: #9cdcfe;">:</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">true</span><span style="color: #cccccc;">,</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">configurable</span><span style="color: #9cdcfe;">:</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">true</span><span style="color: #cccccc;">,</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;">/* ...other flags, probably "value:..." */</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; };</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">});</span> </div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #4ec9b0;">Object</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">keys</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;">)); </span><span style="color: #6a9955;">// Output: a, b, c</span></div> </div> </div> <p>In this case, the getOwnPropertyDescriptor trap is used to intercept calls for non-existent properties and provide a descriptor with enumerable: true to include them in the Object.keys result.</p> <p>To summarize, we only need to intercept [[GetOwnProperty]] if the property is absent in the object and we want it to be included when using Object.keys.</p> </li> <li> <h3>Protected properties with “deleteProperty” and other traps </h3> <p>In JavaScript, it is common to prefix properties and methods with an underscore (_) to indicate that they are internal and should not be accessed from outside the object. However, it is still technically possible to access these properties. To prevent this, we can use proxies, which allow us to define traps for various operations on an object.</p> <p>The code provided demonstrates how to use a proxy to prevent access to properties starting with an underscore. The proxy is created using the new Proxy() syntax and defines several traps:</p> <ol> <li>The <code>get</code> trap throws an error if a property starting with an underscore is read. </li> <li>The <code>set</code> trap throws an error if a property starting with an underscore is written to.</li> <li>The <code>deleteProperty</code> trap throws an error if a property starting with an underscore is deleted.</li> <li>The <code>ownKeys</code> trap filters out properties starting with an underscore from property list operations.</li> </ol> <p>By using these traps, we can enforce the convention that underscore-prefixed properties are internal and should not be accessed directly.</p> <p>The code also includes an important detail in the get trap. Since object methods need to access the underscore-prefixed properties, the value.bind(target) syntax is used to bind the method to the original object (target). This ensures that the method can access the underscore-prefixed properties without triggering the get trap.</p> <p>It's important to note that this proxy solution is not foolproof. If an unproxied object is passed to a method or if an object is proxied multiple times with different tweaks, unexpected behavior can occur. Therefore, it's recommended to use such proxies judiciously.</p> <p>In addition to using proxies, modern JavaScript engines also support private properties in classes. Private properties are prefixed with a hash (#) and have similar behavior to underscore-prefixed properties. However, private properties are not inherited, which can be a limitation.</p> <p>Code</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #cccccc;"> </span><span style="color: #ce9178;">"John"</span><span style="color: #cccccc;">,</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">_password</span><span style="color: #9cdcfe;">:</span><span style="color: #cccccc;"> </span><span style="color: #ce9178;">"secret"</span> </div> <div><span style="color: #cccccc;">};</span> </div><br> <div><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Proxy</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;">, {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">get</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">target</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">prop</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> (</span><span style="color: #9cdcfe;">prop</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">startsWith</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'_'</span><span style="color: #cccccc;">)) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">throw</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Error</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"Access denied"</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">value</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">target</span><span style="color: #cccccc;">[</span><span style="color: #9cdcfe;">prop</span><span style="color: #cccccc;">];</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> (</span><span style="color: #569cd6;">typeof</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">value</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">===</span><span style="color: #cccccc;"> </span><span style="color: #ce9178;">'function'</span><span style="color: #cccccc;">) </span><span style="color: #d4d4d4;">?</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">value</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">bind</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">target</span><span style="color: #cccccc;">) </span><span style="color: #d4d4d4;">:</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">value</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; },</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">set</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">target</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">prop</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">val</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> (</span><span style="color: #9cdcfe;">prop</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">startsWith</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'_'</span><span style="color: #cccccc;">)) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">throw</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Error</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"Access denied"</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; } </span><span style="color: #c586c0;">else</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">target</span><span style="color: #cccccc;">[</span><span style="color: #9cdcfe;">prop</span><span style="color: #cccccc;">] </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">val</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">true</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; },</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">deleteProperty</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">target</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">prop</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> (</span><span style="color: #9cdcfe;">prop</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">startsWith</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'_'</span><span style="color: #cccccc;">)) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">throw</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Error</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"Access denied"</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; } </span><span style="color: #c586c0;">else</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">delete</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">target</span><span style="color: #cccccc;">[</span><span style="color: #9cdcfe;">prop</span><span style="color: #cccccc;">];</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">true</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; },</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">ownKeys</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">target</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Object</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">keys</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">target</span><span style="color: #cccccc;">).</span><span style="color: #dcdcaa;">filter</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">key</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">!</span><span style="color: #9cdcfe;">key</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">startsWith</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'_'</span><span style="color: #cccccc;">));</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">});</span> </div><br> <div><span style="color: #c586c0;">try</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">_password</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">} </span><span style="color: #c586c0;">catch</span><span style="color: #cccccc;"> (</span><span style="color: #9cdcfe;">e</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">e</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">message</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">}</span> </div><br> <div><span style="color: #c586c0;">try</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">_password</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #ce9178;">"test"</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">} </span><span style="color: #c586c0;">catch</span><span style="color: #cccccc;"> (</span><span style="color: #9cdcfe;">e</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">e</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">message</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">}</span> </div><br> <div><span style="color: #c586c0;">try</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #569cd6;">delete</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">_password</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">} </span><span style="color: #c586c0;">catch</span><span style="color: #cccccc;"> (</span><span style="color: #9cdcfe;">e</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">e</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">message</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">}</span> </div><br> <div><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> (</span><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">key</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">in</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">key</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">} &nbsp;</span></div> </div> </div> </li> <li> <h3>“In range” with “has” trap</h3> <p>We have a range object:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">range</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">start</span><span style="color: #9cdcfe;">:</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">,</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">end</span><span style="color: #9cdcfe;">:</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">10</span> </div> <div><span style="color: #cccccc;">};</span> </div> </div> </div> <p>We’d like to use the in operator to check that a number is in range.</p> <ol> <li><code>target</code> – is the target object, passed as the first argument to <code>new Proxy</code>, </li> <li><code>property</code> – property name</li> </ol> <p>Here’s the demo:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">range</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">start</span><span style="color: #9cdcfe;">:</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">,</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">end</span><span style="color: #9cdcfe;">:</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">10</span> </div> <div><span style="color: #cccccc;">};</span> </div><br> <div><span style="color: #9cdcfe;">range</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Proxy</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">range</span><span style="color: #cccccc;">, {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">has</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">target</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">prop</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">prop</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">&gt;=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">target</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">start</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">&amp;&amp;</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">prop</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">&lt;=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">target</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">end</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">});</span> </div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">5</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">in</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">range</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// true</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">50</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">in</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">range</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// false </span></div> </div> </div> </li> <li> <h3>Reflect</h3> <p>Reflect is a built-in object in JavaScript that simplifies the creation of Proxy objects. It provides methods that are wrappers around internal methods like [[Get]], [[Set]], and others, which cannot be called directly. </p> <p>The Reflect object allows us to perform operations that are equivalent to the Proxy traps. For example, instead of using obj[prop] to get a property value, we can use Reflect.get(obj, prop). Similarly, Reflect.set(obj, prop, value) can be used to set a property value, and Reflect.deleteProperty(obj, prop) can be used to delete a property.</p> <p>Here's an example to demonstrate the usage of Reflect:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> {};</span></div><br> <div><span style="color: #4ec9b0;">Reflect</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">set</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;">, </span><span style="color: #ce9178;">'name'</span><span style="color: #cccccc;">, </span><span style="color: #ce9178;">'John'</span><span style="color: #cccccc;">);</span> </div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// John</span></div> </div> </div> <p>In this example, we use Reflect.set to set the name property of the user object to 'John'.</p> <p>Reflect also allows us to forward operations to the original object when working with Proxies. By using Reflect. <method> with the same arguments, we can transparently forward the operation. Here's an example: </p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">name</span><span style="color: #9cdcfe;">:</span><span style="color: #cccccc;"> </span><span style="color: #ce9178;">"John"</span><span style="color: #cccccc;">,</span> </div> <div><span style="color: #cccccc;">&nbsp; };</span></div> <div><span style="color: #cccccc;">&nbsp; </span></div> <div><span style="color: #cccccc;">&nbsp; </span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Proxy</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;">, {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">get</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">target</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">prop</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">receiver</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">`GET </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">prop</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">`</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Reflect</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">get</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">target</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">prop</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">receiver</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// (1)</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; },</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">set</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">target</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">prop</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">val</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">receiver</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">`SET </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">prop</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">=</span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">val</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">`</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Reflect</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">set</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">target</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">prop</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">val</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">receiver</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// (2)</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">&nbsp; });</span></div> <div><span style="color: #cccccc;">&nbsp; </span></div> <div><span style="color: #cccccc;">&nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">name</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #cccccc;">; </span><span style="color: #6a9955;">// shows "GET name"</span></div> <div><span style="color: #cccccc;">&nbsp; </span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #ce9178;">"Pete"</span><span style="color: #cccccc;">; </span><span style="color: #6a9955;">// shows "SET name=Pete"</span> </div> </div> </div> <p>In this example, the Proxy traps get and set forward the operations to the original object by using Reflect.get and Reflect.set respectively.</p> <p>One advantage of using Reflect is that it provides a way to handle getters correctly. The third argument of the get trap, called receiver, is used to pass the correct this context to a getter. Without using Reflect, we may encounter incorrect behavior when using inheritance and proxies. By using Reflect.get with the receiver argument, we can ensure that the correct this context is maintained.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">_name</span><span style="color: #9cdcfe;">:</span><span style="color: #cccccc;"> </span><span style="color: #ce9178;">"Guest"</span><span style="color: #cccccc;">,</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #569cd6;">get</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">name</span><span style="color: #cccccc;">() {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">this</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">_name</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">};</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">userProxy</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Proxy</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;">, {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">get</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">target</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">prop</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">receiver</span><span style="color: #cccccc;">) { </span><span style="color: #6a9955;">// receiver = admin</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Reflect</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">get</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">target</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">prop</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">receiver</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// (*)</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; }</span></div> <div><span style="color: #cccccc;">});</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">admin</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">__proto__</span><span style="color: #9cdcfe;">:</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">userProxy</span><span style="color: #cccccc;">,</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">_name</span><span style="color: #9cdcfe;">:</span><span style="color: #cccccc;"> </span><span style="color: #ce9178;">"Admin"</span> </div> <div><span style="color: #cccccc;">};</span> </div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">admin</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// Admin &nbsp; </span></div> </div> </div> <p>In this example, Reflect.get(target, prop, receiver) is used to retrieve the name property with the correct this context, ensuring that admin.name returns the expected value of "Admin".</p> <p>Using Reflect calls instead of direct operations provides a safe and convenient way to forward operations and ensures that we don't miss any related functionality. </p> </li> <li> <h3>Proxy Limitation</h3> <ol> <li> <p>Built-in objects with internal slots:</p> <p>Proxies cannot intercept or modify the behavior of built-in objects that use internal slots. For example, consider a Map object:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">map</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Map</span><span style="color: #cccccc;">();</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">proxy</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Proxy</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">map</span><span style="color: #cccccc;">, {});</span> </div> <div><span style="color: #9cdcfe;">proxy</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">set</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'test'</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">//TypeError : set method called on incompatible Proxy</span> </div> </div> </div> </li> <li> <p>Private class fields:</p> <p>Proxies cannot intercept or modify private class fields, as they are implemented using internal slots. Here's an example with a User class:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">class</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">#name</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #ce9178;">"Guest"</span><span style="color: #cccccc;">;</span> </div><br> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">getName</span><span style="color: #cccccc;">() {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">this</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">#name</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; }</span> </div> <div><span style="color: #cccccc;">}</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #cccccc;">();</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">proxy</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Proxy</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;">, {});</span> </div><br> <div><span style="color: #9cdcfe;">proxy</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">getName</span><span style="color: #cccccc;">(); </span><span style="color: #6a9955;">// TypeError: can't access private field or method: object is not the right class</span> </div> </div> </div> </li> <li> <p>Proxy and target differentiation:</p> <p>The proxy and the original object are distinct objects. If the original object is used as a key in a data structure, such as a Map, and then the object is proxied, the proxy won't be found as a key in that map:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <br> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">allUsers</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Map</span><span style="color: #cccccc;">();</span> </div> <div><span style="color: #569cd6;">class</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #569cd6;">constructor</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">name</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">this</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">name</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">name</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">allUsers</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">set</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">this</span><span style="color: #cccccc;">, </span><span style="color: #ce9178;">"obj"</span><span style="color: #cccccc;">)</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; }</span> </div> <div><span style="color: #cccccc;">}</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">User</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"John"</span><span style="color: #cccccc;">);</span> </div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">allUsers</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">get</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;">)); </span><span style="color: #6a9955;">// obj</span></div> <br> <div><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Proxy</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;">, {});</span> </div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">allUsers</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">get</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;">)); </span><span style="color: #6a9955;">// undefined : Proxy is treated as a different object</span> </div> </div> </div> </li> <li> <p>Proxies and strict equality test:</p> <p>Proxies cannot intercept strict equality tests (===) between objects. Object comparison operations and built-in classes that compare objects for equality will treat the proxy and the original object as distinct entities: </p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">obj</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> {};</span></div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">proxy</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Proxy</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">obj</span><span style="color: #cccccc;">, {});</span> </div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">obj</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">===</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">proxy</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// false: Proxies cannot intercept strict equality test</span> </div> </div> </div> </li> </ol> </li> <li> <h3>Revocable proxies</h3> <p>Revocable proxies provide a way to create a proxy that can be disabled or revoked. It allows us to control access to an object and revoke that access whenever needed.</p> <p>To create a revocable proxy, we use the Proxy.revocable(target, handler) syntax. It returns an object with the proxy and revoke function.</p> <p>Here's an example:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">object</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">data</span><span style="color: #9cdcfe;">:</span><span style="color: #cccccc;"> </span><span style="color: #ce9178;">"Valuable data"</span></div> <div><span style="color: #cccccc;">};</span> </div><br> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> { </span><span style="color: #9cdcfe;">proxy</span><span style="color: #cccccc;">, </span><span style="color: #dcdcaa;">revoke</span><span style="color: #cccccc;"> } </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Proxy</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">revocable</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">object</span><span style="color: #cccccc;">, {});</span></div><br> <div><span style="color: #6a9955;">// Pass the proxy somewhere instead of the original object</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">proxy</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">data</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// Valuable data</span></div><br> <div><span style="color: #6a9955;">// Later in our code</span></div> <div><span style="color: #dcdcaa;">revoke</span><span style="color: #cccccc;">();</span> </div><br> <div><span style="color: #6a9955;">// The proxy isn't working anymore (revoked)</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">proxy</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">data</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// Error</span></div> </div> </div> <p>In this example, we create a revocable proxy for the object. We can access the properties of the object through the proxy. However, when we call revoke(), the proxy is disabled, and any further access to the proxy will result in an error.</p> <p>The revoke() function removes all internal references between the proxy and the target object, effectively disabling the proxy.</p> <p>Additionally, we can bind the revoke method to the proxy itself by setting proxy.revoke = revoke, making it more convenient to revoke the proxy directly.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #9cdcfe;">proxy</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">revoke</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">revoke</span> </div> <div><span style="color: #9cdcfe;">proxy</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">revoke</span><span style="color: #cccccc;">();</span> </div> <div><span style="color: #6a9955;">// The proxy isn't working anymore (revoked)</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">proxy</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">data</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// Error</span></div> </div> </div> </li> </ul> </details> </li> <li> <details> <summary>Eval: run a code string</summary> <ul> <li> <h3>Eval</h3> <p>The eval function in JavaScript allows us to execute a string of code. It takes a string parameter containing the code to be executed.</p> <p>Here's an example:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">code</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #ce9178;">'alert("Hello")'</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #dcdcaa;">eval</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">code</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// Executes the code and displays an alert with "Hello"</span> </div> </div> </div> <p>The result of the eval function is the result of the last statement in the code string.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">value</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">eval</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'1+1'</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">value</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// Outputs 2</span></div><br> <div><span style="color: #9cdcfe;">value</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">eval</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'let i = 0; ++i'</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">value</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// Outputs 1</span></div> </div> </div> <p>The eval function executes the code in the current lexical environment, which means it can access and modify outer variables.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">a</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">;</span> </div><br> <div><span style="color: #569cd6;">function</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">f</span><span style="color: #cccccc;">() {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">a</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">;</span> </div><br> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">eval</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'console.log(a)'</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// Accesses the inner 'a' variable with value 2</span></div> <div><span style="color: #cccccc;">}</span> </div><br> <div><span style="color: #dcdcaa;">f</span><span style="color: #cccccc;">(); </span><span style="color: #6a9955;">// Displays an alert with "2"</span></div> </div> </div> <p>However, when using eval in strict mode, it creates its own lexical environment, and variables declared inside eval are not visible outside.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #ce9178;">"use strict"</span><span style="color: #cccccc;">;</span> </div><br> <div><span style="color: #dcdcaa;">eval</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"var x = 5; function f() {}"</span><span style="color: #cccccc;">);</span> </div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">typeof</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">x</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// Outputs "undefined"</span></div> <div><span style="color: #6a9955;">// The function 'f' is also not accessible outside</span></div> </div> </div> <p>It's worth noting that using eval is generally discouraged in modern programming. It is considered a bad practice and should be used sparingly, if at all. There are usually better alternatives available in the language to achieve the desired functionality.</p> <p>If there is a need to execute code in the global scope without accessing outer variables, window.eval(...) can be used.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">x</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">{</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">x</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">5</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">window</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">eval</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'console.log(x)'</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// Accesses the global 'x' variable with value 1</span></div> <div><span style="color: #cccccc;">}</span> </div> </div> </div> <p>To safely use local variables within the evaluated code, the new Function construct can be used instead of eval. It allows passing variables explicitly as arguments.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">f</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">new</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">Function</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'a'</span><span style="color: #cccccc;">, </span><span style="color: #ce9178;">'console.log(a)'</span><span style="color: #cccccc;">);</span> </div><br> <div><span style="color: #dcdcaa;">f</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">5</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// Displays an alert with "5"</span></div> </div> </div> <p>Using new Function creates a function from a string of code, similar to eval, but it operates in the global scope and doesn't have access to local variables. By passing the necessary variables as arguments, it ensures clear and explicit communication.</p> </li> </ul> </details> </li> <li> <details> <summary>Reference Type</summary> <ul> <li> <h3>Reference Type</h3> <p>When making a method call in JavaScript, there can be cases where the value of this inside the method is lost. This article dives into this behavior to provide a better understanding of certain edge cases.</p> <p>Consider the following example:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">nick</span><span style="color: #9cdcfe;">:</span><span style="color: #cccccc;"> </span><span style="color: #ce9178;">"John"</span><span style="color: #cccccc;">,</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">hi</span><span style="color: #cccccc;">() {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">this</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">this</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">nick</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #cccccc;">&nbsp; &nbsp; },</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">bye</span><span style="color: #cccccc;">() { </span><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"Bye"</span><span style="color: #cccccc;">); }</span></div> <div><span style="color: #cccccc;">};</span> </div><br> <div><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">hi</span><span style="color: #cccccc;">(); </span><span style="color: #6a9955;">// Works </span></div><br> <div><span style="color: #6a9955;">// Now let's call user.hi or user.bye depending on the nick</span> </div> <div><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;">.</span><span style="color: #9cdcfe;">nick</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">==</span><span style="color: #cccccc;"> </span><span style="color: #ce9178;">"John"</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">?</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">hi</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">:</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">user</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">bye</span><span style="color: #cccccc;">)(); </span><span style="color: #6a9955;">// undefined </span></div> </div> </div> <p>In the last line, there is a conditional operator that chooses either user.hi or user.bye. In this case, the result is user.hi. However, immediately calling the method with parentheses () results in an error because the value of this inside the call becomes the global object and the nick property doesn't exist in the global object so result in undefined.</p> <p>While user.hi() works as expected, (user.name == "John" ? user.hi : user.bye)() fails to maintain the correct value of this. To understand why this happens, let's explore how the obj.method() call works under the hood. </p> <p>In the statement obj.method(), there are two operations:</p> <ol> <li>The dot (<code>.</code>) retrieves the property <code>obj.method</code>. </li> <li>The parentheses (<code>()</code>) execute the retrieved method.</li> </ol> <p>To pass the information about this from the first part to the second one, JavaScript uses a trick. It employs the concept of the Reference Type, which is an internal type used by the language.</p> <p>The Reference Type is a three-value combination (base, name, strict), where:</p> <ol> <li> <p><code>base</code> is the object.</p> </li> <li> <p><code>name</code> is the property name.</p> </li> <li> <p><code>strict</code> is <code>true</code> if <code>"use strict"</code> is in effect. </p> </li> </ol> <p>The result of a property access, such as user.hi, is not a function directly but a value of the Reference Type. In strict mode, it can be represented as (user, "hi", true). <br> When the parentheses () are called on the Reference Type, they receive the complete information about the object and its method, allowing them to set the correct this value (user in this case).<br> However, any other operation that separates the dot from the parentheses, like hi = user.hi, discards the Reference Type and passes only the function itself. As a result, the value of this is lost.<br> To ensure that this is correctly passed, the function should be called directly using the dot (obj.method()) or square brackets (obj['method']()) syntax.<br> There are various ways to solve this problem, such as using func.bind() to bind the appropriate this value explicitly.</p> </li> </ul> </details> </li> <li> <details> <summary>BigInt</summary> <ul> <li> <h3>BigInt</h3> <p>BigInt is a special numeric type that provides support for integers of arbitrary length.</p> <p>A bigint is created by appending n to the end of an integer literal or by calling the function BigInt that creates bigints from strings, numbers etc.</p> <div class="cods" contenteditable="" spellcheck="false"> <div class="cods" spellcheck="false" contenteditable=""> <div> <div><span style="color: #569cd6;">const</span><span style="color: #cccccc;"> </span><span style="color: #4fc1ff;">bigint</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1234567890123456789012345678901234567890</span><span style="color: #569cd6;">n</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #569cd6;">const</span><span style="color: #cccccc;"> </span><span style="color: #4fc1ff;">sameBigint</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">BigInt</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"1234567890123456789012345678901234567890"</span><span style="color: #cccccc;">);</span> </div> <div><span style="color: #569cd6;">const</span><span style="color: #cccccc;"> </span><span style="color: #4fc1ff;">bigintFromNumber</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">BigInt</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">10</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// same as 10n</span></div> </div> </div> </div> </li> <li> <h3>Math operators</h3> <p>BigInt can mostly be used like a regular number, for example: </p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">1</span><span style="color: #569cd6;">n</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">+</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">2</span><span style="color: #569cd6;">n</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// 3</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">5</span><span style="color: #569cd6;">n</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">/</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">2</span><span style="color: #569cd6;">n</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// 2</span></div> </div> </div> <p>Please note: the division 5/2 returns the result rounded towards zero, without the decimal part. All operations on bigints return bigints.</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">5</span><span style="color: #569cd6;">n</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">/</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">2</span><span style="color: #569cd6;">n</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// 2n</span></div> </div> </div> <p>We can’t mix bigints and regular numbers:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">1</span><span style="color: #569cd6;">n</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">+</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// TypeError: can't convert BigInt to number</span></div> </div> </div> <p>We should explicitly convert them if needed: using either BigInt() or Number(), like this:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">bigint</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #569cd6;">n</span><span style="color: #cccccc;">;</span> </div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">number</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">;</span> </div><br> <div><span style="color: #6a9955;">// number to bigint</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">bigint</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">+</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">BigInt</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">number</span><span style="color: #cccccc;">)); </span><span style="color: #6a9955;">// 3</span></div><br> <div><span style="color: #6a9955;">// bigint to number</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #4ec9b0;">Number</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">bigint</span><span style="color: #cccccc;">) </span><span style="color: #d4d4d4;">+</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">number</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// 3</span></div> </div> </div> <p>The unary plus is not supported on bigints</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #569cd6;">let</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">bigint</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #569cd6;">n</span><span style="color: #cccccc;">;</span> </div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #d4d4d4;">+</span><span style="color: #9cdcfe;">bigint</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// error </span></div> </div> </div> </li> <li> <h3>Comparisons</h3> <p>Comparisons, such as &lt;, > work with bigints and numbers just fine:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">2</span><span style="color: #569cd6;">n</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">&gt;</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #569cd6;">n</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// true</span></div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">2</span><span style="color: #569cd6;">n</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">&gt;</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// true</span></div> </div> </div> <p>Please note though, as numbers and bigints belong to different types, they can be equal ==, but not strictly equal ===:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">( </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">==</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #569cd6;">n</span><span style="color: #cccccc;"> ); </span><span style="color: #6a9955;">// true</span></div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">( </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">===</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #569cd6;">n</span><span style="color: #cccccc;"> ); </span><span style="color: #6a9955;">// false</span></div> </div> </div> </li> <li> <h3>Boolean operations</h3> <p>When inside if or other boolean operations, bigints behave like numbers.</p> <p>For instance, in if, bigint 0n is falsy, other values are truthy:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> (</span><span style="color: #b5cea8;">0</span><span style="color: #569cd6;">n</span><span style="color: #cccccc;">) {</span></div> <div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// never executes</span></div> <div><span style="color: #cccccc;">}</span> </div> </div> </div> <p>Boolean operators, such as ||, && and others also work with bigints similar to numbers:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">1</span><span style="color: #569cd6;">n</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">||</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// 1 (1n is considered truthy)</span></div><br> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">0</span><span style="color: #569cd6;">n</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">||</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// 2 (0n is considered falsy)</span></div> </div> </div> </li> </ul> </details> </li> <li> <details> <summary>Unicode, String internals</summary> <ul> <li> <h3>Unicode , string internals</h3> <p>JavaScript strings are based on Unicode, where each character is represented by a byte sequence of 1-4 bytes. To insert a character into a string using Unicode codes, we can use three notations. For example, "\x7A" represents the character "z" (U+007A). Here are some examples:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"</span><span style="color: #d7ba7d;">\x7A</span><span style="color: #ce9178;">"</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// z</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"</span><span style="color: #d7ba7d;">\xA9</span><span style="color: #ce9178;">"</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// ©</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"</span><span style="color: #d7ba7d;">\u00A9</span><span style="color: #ce9178;">"</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// ©</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"</span><span style="color: #d7ba7d;">\u044F</span><span style="color: #ce9178;">"</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// я</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"</span><span style="color: #d7ba7d;">\u2191</span><span style="color: #ce9178;">"</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// ↑</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"</span><span style="color: #d7ba7d;">\u{20331}</span><span style="color: #ce9178;">"</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// 佫</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"</span><span style="color: #d7ba7d;">\u{1F60D}</span><span style="color: #ce9178;">"</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// 😍</span></div> </div> </div> <p>Some characters in Unicode require more than 2 bytes, so they are encoded using a pair of 2-byte characters called "surrogate pairs." However, JavaScript initially did not handle surrogate pairs correctly, leading to issues with length measurement and character access. To address this, JavaScript introduced the String.fromCodePoint and str.codePointAt methods. Here's an example:</p> <div class="cods" contenteditable="" spellcheck="false"> <div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'𝒳'</span><span style="color: #cccccc;">.</span><span style="color: #4fc1ff;">length</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// 2</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'😂'</span><span style="color: #cccccc;">.</span><span style="color: #4fc1ff;">length</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// 2</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'𩷶'</span><span style="color: #cccccc;">.</span><span style="color: #4fc1ff;">length</span><span style="color: #cccccc;">); </span><span style="color: #6a9955;">// 2</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'𝒳'</span><span style="color: #cccccc;">[</span><span style="color: #b5cea8;">0</span><span style="color: #cccccc;">]); </span><span style="color: #6a9955;">// shows strange symbols...</span> </div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'𝒳'</span><span style="color: #cccccc;">[</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">]); </span><span style="color: #6a9955;">// ...pieces of the surrogate pair</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'𝒳'</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">charCodeAt</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">0</span><span style="color: #cccccc;">).</span><span style="color: #dcdcaa;">toString</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">16</span><span style="color: #cccccc;">)); </span><span style="color: #6a9955;">// d835</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'𝒳'</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">codePointAt</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">0</span><span style="color: #cccccc;">).</span><span style="color: #dcdcaa;">toString</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">16</span><span style="color: #cccccc;">)); </span><span style="color: #6a9955;">// 1d4b3</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'𝒳'</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">charCodeAt</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">).</span><span style="color: #dcdcaa;">toString</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">16</span><span style="color: #cccccc;">)); </span><span style="color: #6a9955;">// dcb3</span></div> <div><span style="color: #9cdcfe;">console</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">'𝒳'</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">codePointAt</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">).</span><span style="color: #dcdcaa;">toString</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">16</span><span style="color: #cccccc;">)); </span><span style="color: #6a9955;">// dcb3</span></div> </div> </div> </li> <li></li> <li></li> </ul> </details> </li> </ul> </details></body></html>